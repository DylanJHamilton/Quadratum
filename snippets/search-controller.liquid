{%- comment -%} Honor search_mode & predictive options {%- endcomment -%}
<script>
  (function(){
    var mode = "{{ settings.search_mode | escape }}"; // page | popup | predictive
    var allow = {
      products: {{ settings.search_src_products | json }},
      collections: {{ settings.search_src_collections | json }},
      articles: {{ settings.search_src_articles | json }},
      pages: {{ settings.search_src_pages | json }},
      limit: {{ settings.search_results_limit | default: 8 }}
    };

    // simple example: add attributes/classes your header JS looks for
    document.documentElement.dataset.searchMode = mode;

    // if predictive, attach your predictive search init here:
    if (mode === 'predictive' && window.initPredictiveSearch) {
      window.initPredictiveSearch(allow);
    }
  })();
</script>
