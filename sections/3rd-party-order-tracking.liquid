{% comment %}
  Quadratum — 3rd Party · Order Tracking CTA (Theme-only redirect helper)
  File: sections/third-party-order-tracking-cta.liquid

  • Collects tracking/order ID (+ optional email) and redirects to:
      - Shopify help page (optional query params), OR
      - External URL pattern with {tracking}/{email} placeholders
  • No server-side post, no live tracking data, no external JS/assets/snippets
  • Tokenized, scoped styling; A11Y labels + aria-live error messaging
  • UX polish:
      - Optional helper line under tracking input
      - Secondary help text can render even when URL is blank
      - Button style selector
      - Optional open-in-new-tab for redirects
{% endcomment %}

{%- assign s = section.settings -%}

{%- if s.enable_section -%}
  {%- assign root_id = 'order-tracking-cta-' | append: section.id -%}

  {%- assign mode = s.mode | default: 'shopify_help' -%}
  {%- assign layout_variant = s.layout_variant | default: 'card' -%}
  {%- assign alignment = s.alignment | default: 'center' -%}
  {%- assign icon_style = s.icon_style | default: 'package' -%}

  {%- assign button_style = s.button_style | default: 'primary' -%}
  {%- assign button_class = 'q-button q-button--' | append: button_style -%}

  {%- assign shopify_help_url = s.shopify_help_url | default: '/pages/order-tracking' -%}
  {%- assign shopify_qp_name = s.shopify_help_query_param | default: 'tracking' | strip -%}
  {%- if shopify_qp_name == blank -%}{%- assign shopify_qp_name = 'tracking' -%}{%- endif -%}

  {%- assign external_pattern = s.external_pattern_url | default: 'https://track.aftership.com/{tracking}' -%}

  <section
    id="{{ root_id }}"
    class="q-section q-section--bg-{{ s.background_style }} q-order-tracking q-order-tracking--layout-{{ layout_variant }} q-order-tracking--align-{{ alignment }}"
    aria-label="{{ s.aria_label | escape }}"
    data-q-section="order-tracking"
    data-q-order-tracking-mode="{{ mode }}"
    data-q-order-tracking-shopify-url="{{ shopify_help_url | escape }}"
    data-q-order-tracking-shopify-append="{% if s.shopify_help_append_query %}true{% else %}false{% endif %}"
    data-q-order-tracking-shopify-param="{{ shopify_qp_name | escape }}"
    data-q-order-tracking-external-pattern="{{ external_pattern | escape }}"
    data-q-order-tracking-external-fallback="{{ s.external_fallback_url | escape }}"
    data-q-order-tracking-newtab="{% if s.open_in_new_tab %}true{% else %}false{% endif %}"
    data-q-email-disabled="{% if s.show_email_field %}false{% else %}true{% endif %}"
  >
    <style>
      #{{ root_id }}{
        --q-ot-pad-y: var(--q-pad-y, clamp(22px, 4vw, 54px));
        --q-ot-pad-x: var(--q-pad-x, clamp(16px, 3vw, 34px));
        --q-ot-gap: var(--q-gap-md, 16px);
        --q-ot-radius: var(--q-radius-lg, var(--q-radius, 16px));
        --q-ot-border: var(--q-border, rgba(0,0,0,0.12));
        --q-ot-soft: var(--q-soft, rgba(0,0,0,0.05));
        --q-ot-shadow: var(--q-shadow-md, 0 14px 34px rgba(0,0,0,0.10));
        --q-ot-max: var(--q-container-md, 860px);
      }

      #{{ root_id }} .q-order-tracking__inner{
        margin-inline: auto;
        padding-inline: var(--q-ot-pad-x);
        padding-block: var(--q-ot-pad-y);
        max-width: var(--q-ot-max);
      }

      /* Layout variants */
      #{{ root_id }}.q-order-tracking--layout-card .q-order-tracking__panel{
        border: 1px solid var(--q-ot-border);
        background: var(--q-surface, #fff);
        border-radius: var(--q-ot-radius);
        box-shadow: var(--q-ot-shadow);
        padding: clamp(18px, 3.2vw, 30px);
      }

      #{{ root_id }}.q-order-tracking--layout-full_width .q-order-tracking__inner{
        max-width: var(--q-container-lg, 1100px);
      }
      #{{ root_id }}.q-order-tracking--layout-full_width .q-order-tracking__panel{
        border: 1px solid var(--q-ot-border);
        background: var(--q-surface, #fff);
        border-radius: var(--q-ot-radius);
        box-shadow: var(--q-ot-shadow);
        padding: clamp(18px, 3.2vw, 30px);
      }

      #{{ root_id }}.q-order-tracking--layout-split .q-order-tracking__panel{
        border: 1px solid var(--q-ot-border);
        background: var(--q-surface, #fff);
        border-radius: var(--q-ot-radius);
        box-shadow: var(--q-ot-shadow);
        padding: clamp(18px, 3.2vw, 30px);
      }
      #{{ root_id }}.q-order-tracking--layout-split .q-order-tracking__grid{
        display: grid;
        gap: clamp(16px, 3vw, 28px);
        align-items: center;
      }
      @media (min-width: 990px){
        #{{ root_id }}.q-order-tracking--layout-split .q-order-tracking__grid{
          grid-template-columns: 0.9fr 1.1fr;
        }
      }

      /* Alignment */
      #{{ root_id }}.q-order-tracking--align-center .q-order-tracking__header{
        text-align: center;
        margin-inline: auto;
      }
      #{{ root_id }}.q-order-tracking--align-left .q-order-tracking__header{
        text-align: left;
      }

      /* Typography */
      #{{ root_id }} .q-kicker{
        margin: 0 0 0.35rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        opacity: 0.78;
        font-size: var(--q-kicker-fs, 0.85rem);
      }
      #{{ root_id }} .q-heading--section{
        margin: 0;
        font-size: var(--q-heading-2-fs, clamp(1.55rem, 2.3vw, 2.15rem));
        line-height: 1.12;
        letter-spacing: -0.01em;
      }
      #{{ root_id }} .q-text{
        margin-top: 0.75rem;
        max-width: 80ch;
        font-size: var(--q-body-fs, 1.02rem);
        line-height: var(--q-body-lh, 1.7);
        opacity: 0.92;
      }
      #{{ root_id }}.q-order-tracking--align-center .q-text{
        margin-inline: auto;
      }
      #{{ root_id }} .q-text--muted{ opacity: 0.82; }
      #{{ root_id }} .rte p{ margin: 0 0 0.75rem; }
      #{{ root_id }} .rte p:last-child{ margin-bottom: 0; }

      /* Icon */
      #{{ root_id }} .q-order-tracking__icon{
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 56px;
        height: 56px;
        border-radius: 14px;
        border: 1px solid var(--q-ot-border);
        background: var(--q-ot-soft);
        color: currentColor;
        margin-bottom: 0.85rem;
      }
      #{{ root_id }}.q-order-tracking--align-center .q-order-tracking__icon{
        margin-inline: auto;
      }
      #{{ root_id }} .q-order-tracking__icon svg{
        width: 26px;
        height: 26px;
        display: block;
      }
      #{{ root_id }} .q-order-tracking__icon-img{
        width: 28px;
        height: 28px;
        object-fit: contain;
        display: block;
      }

      /* Form */
      #{{ root_id }} .q-order-tracking__form{
        margin-top: 1.05rem;
        display: grid;
        gap: 0.9rem;
      }

      #{{ root_id }} .q-form__row{
        display: grid;
        gap: 0.85rem;
      }
      @media (min-width: 750px){
        #{{ root_id }} .q-form__row{
          grid-template-columns: 1.3fr 1fr;
          align-items: end;
        }
        #{{ root_id }} .q-order-tracking__field--email{
          min-width: 220px;
        }
        #{{ root_id }}[data-q-email-disabled="true"] .q-form__row{
          grid-template-columns: 1fr;
        }
      }

      #{{ root_id }} .q-field{ display: grid; gap: 0.35rem; }
      #{{ root_id }} .q-field__label{
        font-weight: 650;
        font-size: 0.95rem;
        opacity: 0.92;
      }

      #{{ root_id }} .q-field__input{
        width: 100%;
        border: 1px solid var(--q-ot-border);
        background: var(--q-surface, #fff);
        border-radius: calc(var(--q-ot-radius) - 6px);
        padding: 0.82rem 0.95rem;
        font-size: 1rem;
        line-height: 1.25;
        outline: none;
        box-shadow: 0 0 0 0 rgba(0,0,0,0);
        transition: box-shadow 140ms ease, border-color 140ms ease;
        min-height: 46px;
      }
      #{{ root_id }} .q-field__input:focus{
        border-color: currentColor;
        box-shadow: 0 0 0 4px rgba(0,0,0,0.08);
      }
      @media (prefers-reduced-motion: reduce){
        #{{ root_id }} .q-field__input{ transition: none; }
      }

      #{{ root_id }} .q-field__help{
        margin: 0.25rem 0 0;
        font-size: 0.92rem;
        opacity: 0.78;
      }

      /* Actions */
      #{{ root_id }} .q-form__actions{
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
      }
      #{{ root_id }}.q-order-tracking--align-center .q-form__actions{
        justify-content: center;
      }
      #{{ root_id }}.q-order-tracking--align-left .q-form__actions{
        justify-content: flex-start;
      }

      /* Button fallback (won't fight theme if already styled) */
      #{{ root_id }} .q-button{
        appearance: none;
        border: 1px solid transparent;
        border-radius: calc(var(--q-ot-radius) - 6px);
        padding: 0.86rem 1.08rem;
        font-weight: 750;
        font-size: 1rem;
        line-height: 1;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-height: 46px;
        transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
      }
      #{{ root_id }} .q-button--primary{
        background: var(--q-primary, #111);
        color: var(--q-on-primary, #fff);
        box-shadow: 0 10px 22px rgba(0,0,0,0.14);
      }
      #{{ root_id }} .q-button--secondary{
        background: var(--q-surface-contrast, rgba(0,0,0,0.06));
        color: var(--q-text, #111);
        border-color: var(--q-ot-border);
        box-shadow: 0 10px 22px rgba(0,0,0,0.08);
      }
      #{{ root_id }} .q-button--ghost{
        background: transparent;
        color: var(--q-text, #111);
        border-color: var(--q-ot-border);
        box-shadow: none;
      }
      #{{ root_id }} .q-button:focus-visible{
        outline: 2px solid currentColor;
        outline-offset: 3px;
      }
      #{{ root_id }} .q-button:hover{ transform: translateY(-1px); }
      @media (prefers-reduced-motion: reduce){
        #{{ root_id }} .q-button{ transition: none; }
        #{{ root_id }} .q-button:hover{ transform: none; }
      }

      /* Links */
      #{{ root_id }} .q-link{
        font-weight: 650;
        text-decoration: none;
        opacity: 0.82;
      }
      #{{ root_id }} .q-link:hover{
        opacity: 1;
        text-decoration: underline;
        text-underline-offset: 3px;
      }
      #{{ root_id }} .q-link:focus-visible{
        outline: 2px solid currentColor;
        outline-offset: 3px;
        border-radius: 10px;
      }

      /* Error */
      #{{ root_id }} .q-form__message{
        margin: 0;
        font-size: 0.95rem;
        opacity: 0.9;
        min-height: 1.2em;
      }
      #{{ root_id }} .q-form__message--error{
        color: var(--q-danger, #b42318);
        opacity: 0;
        transform: translateY(-2px);
        transition: opacity 140ms ease, transform 140ms ease;
      }
      #{{ root_id }} .q-form__message--error.is-visible{
        opacity: 1;
        transform: translateY(0);
      }
      @media (prefers-reduced-motion: reduce){
        #{{ root_id }} .q-form__message--error{ transition: none; }
      }
    </style>

    <div class="q-section__inner q-order-tracking__inner q-order-tracking__inner--{{ layout_variant }}">
      <div class="q-order-tracking__panel">
        {%- capture icon_markup -%}
          {%- if s.show_icon -%}
            <div class="q-order-tracking__icon" aria-hidden="true">
              {%- if icon_style == 'custom' and s.custom_icon != blank -%}
                {{ s.custom_icon | image_url: width: 96 | image_tag: loading: 'lazy', class: 'q-order-tracking__icon-img', alt: '' }}
              {%- else -%}
                {%- if icon_style == 'truck' -%}
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M3 6h11v10H3V6Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M14 9h4l3 3v4h-7V9Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M7 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" stroke="currentColor" stroke-width="1.6"/>
                    <path d="M18 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" stroke="currentColor" stroke-width="1.6"/>
                  </svg>
                {%- elsif icon_style == 'clock' -%}
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="currentColor" stroke-width="1.6"/>
                    <path d="M12 7v6l4 2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                {%- else -%}
                  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M7 7h10v4H7V7Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M6 11h12v10H6V11Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M9 15h6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  </svg>
                {%- endif -%}
              {%- endif -%}
            </div>
          {%- endif -%}
        {%- endcapture -%}

        {%- capture header_markup -%}
          <header class="q-order-tracking__header">
            {%- if s.kicker != blank -%}
              <p class="q-kicker">{{ s.kicker | escape }}</p>
            {%- endif -%}
            {%- if s.heading != blank -%}
              <h2 class="q-heading q-heading--section">{{ s.heading | escape }}</h2>
            {%- endif -%}
            {%- if s.body != blank -%}
              <div class="q-text q-text--muted rte">
                {{ s.body }}
              </div>
            {%- endif -%}
          </header>
        {%- endcapture -%}

        {%- capture form_markup -%}
          <form class="q-order-tracking__form q-form" data-q-order-tracking-form novalidate>
            <div class="q-form__row">
              <div class="q-field">
                <label for="{{ section.id }}-tracking" class="q-field__label">
                  {{ s.tracking_label | escape }}
                </label>
                <input
                  id="{{ section.id }}-tracking"
                  type="text"
                  name="tracking"
                  class="q-field__input"
                  placeholder="{{ s.tracking_placeholder | escape }}"
                  autocomplete="off"
                  required
                >
                {%- if s.tracking_helper != blank -%}
                  <p class="q-field__help q-text q-text--muted">{{ s.tracking_helper | escape }}</p>
                {%- endif -%}
              </div>

              {%- if s.show_email_field -%}
                <div class="q-field q-order-tracking__field--email">
                  <label for="{{ section.id }}-email" class="q-field__label">
                    {{ s.email_label | escape }}
                  </label>
                  <input
                    id="{{ section.id }}-email"
                    type="email"
                    name="email"
                    class="q-field__input"
                    placeholder="{{ s.email_placeholder | escape }}"
                    autocomplete="email"
                  >
                </div>
              {%- endif -%}
            </div>

            <div class="q-form__actions">
              <button type="submit" class="{{ button_class }}">
                {{ s.button_label | escape }}
              </button>

              {%- if s.show_secondary_help and s.secondary_help_text != blank -%}
                {%- if s.secondary_help_url != blank -%}
                  <a href="{{ s.secondary_help_url }}" class="q-link q-link--muted q-order-tracking__secondary">
                    {{ s.secondary_help_text | escape }}
                  </a>
                {%- else -%}
                  <span class="q-text q-text--muted q-order-tracking__secondary">
                    {{ s.secondary_help_text | escape }}
                  </span>
                {%- endif -%}
              {%- endif -%}
            </div>

            <p class="q-form__message q-form__message--error" data-q-order-tracking-error aria-live="polite"></p>
          </form>
        {%- endcapture -%}

        {%- if layout_variant == 'split' -%}
          <div class="q-order-tracking__grid">
            <div class="q-order-tracking__content">
              {{ icon_markup }}
              {{ header_markup }}
            </div>
            <div class="q-order-tracking__form-wrap">
              {{ form_markup }}
            </div>
          </div>
        {%- else -%}
          <div class="q-order-tracking__content">
            {{ icon_markup }}
            {{ header_markup }}
            {{ form_markup }}
          </div>
        {%- endif -%}
      </div>
    </div>

    <script>
      (function(){
        var root = document.getElementById({{ root_id | json }});
        if(!root) return;

        var form = root.querySelector('[data-q-order-tracking-form]');
        var errorEl = root.querySelector('[data-q-order-tracking-error]');
        if(!form) return;

        var trackingInput = root.querySelector('#{{ section.id }}-tracking');
        var emailInput = root.querySelector('#{{ section.id }}-email');

        function setError(msg){
          if(!errorEl) return;
          errorEl.textContent = msg || '';
          if(msg){
            errorEl.classList.add('is-visible');
          } else {
            errorEl.classList.remove('is-visible');
          }
        }

        function safeTrim(v){
          return (v || '').toString().trim();
        }

        function go(url, openNewTab){
          if(!url) return;
          if(openNewTab){
            window.open(url, '_blank', 'noopener,noreferrer');
          } else {
            window.location.href = url;
          }
        }

        function buildShopifyUrl(baseUrl, appendQuery, qpName, tracking, email){
          var fallback = '/';
          var raw = safeTrim(baseUrl) || fallback;
          var u;
          try{
            u = new URL(raw, window.location.origin);
          } catch(e){
            u = new URL(fallback, window.location.origin);
          }

          if(appendQuery){
            var paramName = safeTrim(qpName) || 'tracking';
            u.searchParams.set(paramName, tracking);
            if(email){
              u.searchParams.set('email', email);
            }
          }
          return u.toString();
        }

        function buildExternalUrl(pattern, tracking, email){
          var p = safeTrim(pattern);
          if(!p) return '';

          var t = encodeURIComponent(tracking);
          var e = encodeURIComponent(email || '');

          var out = p.split('{tracking}').join(t);
          out = out.split('{email}').join(e);

          // If merchant forgot {tracking}, append as query param to stay usable.
          if(out.indexOf(t) === -1){
            try{
              var u = new URL(out, window.location.origin);
              u.searchParams.set('tracking', tracking);
              if(email) u.searchParams.set('email', email);
              return u.toString();
            } catch(err){
              return out;
            }
          }

          return out;
        }

        form.addEventListener('submit', function(ev){
          ev.preventDefault();
          setError('');

          var tracking = safeTrim(trackingInput && trackingInput.value);
          var email = safeTrim(emailInput && emailInput.value);

          if(!tracking){
            setError('Enter your order number or tracking ID.');
            if(trackingInput) trackingInput.focus();
            return;
          }

          if(emailInput && email){
            if(!emailInput.checkValidity()){
              setError('Enter a valid email address.');
              emailInput.focus();
              return;
            }
          }

          var openNewTab = (root.getAttribute('data-q-order-tracking-newtab') === 'true');
          var mode = root.getAttribute('data-q-order-tracking-mode') || 'shopify_help';

          if(mode === 'external_pattern'){
            var pattern = root.getAttribute('data-q-order-tracking-external-pattern') || '';
            var finalUrl = buildExternalUrl(pattern, tracking, email);

            if(!finalUrl){
              var fallbackUrl = root.getAttribute('data-q-order-tracking-external-fallback') || '';
              finalUrl = safeTrim(fallbackUrl);
            }

            if(!finalUrl){
              setError('Tracking is not configured yet. Please contact support.');
              return;
            }

            go(finalUrl, openNewTab);
            return;
          }

          // shopify_help
          var helpUrl = root.getAttribute('data-q-order-tracking-shopify-url') || '/pages/order-tracking';
          var append = (root.getAttribute('data-q-order-tracking-shopify-append') === 'true');
          var qp = root.getAttribute('data-q-order-tracking-shopify-param') || 'tracking';

          go(buildShopifyUrl(helpUrl, append, qp, tracking, email), openNewTab);
        });
      })();
    </script>
  </section>
{%- endif -%}

{% schema %}
{
  "name": "3P - Order Tracking",
  "tag": "section",
  "class": "q-section q-order-tracking",
  "settings": [
    { "type": "checkbox", "id": "enable_section", "label": "Enable section", "default": true },
    { "type": "text", "id": "aria_label", "label": "Section aria-label", "default": "Track your order" },

    { "type": "header", "content": "Content" },
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "Order tracking" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Track your order" },
    { "type": "richtext", "id": "body", "label": "Explanation", "default": "<p>Enter your order number or tracking ID to follow your shipment’s progress.</p>" },

    { "type": "header", "content": "Inputs" },
    { "type": "checkbox", "id": "show_email_field", "label": "Ask for email address", "default": false },
    { "type": "text", "id": "tracking_label", "label": "Tracking field label", "default": "Order number or tracking ID" },
    { "type": "text", "id": "tracking_placeholder", "label": "Tracking field placeholder", "default": "e.g. #1234 or 1Z999..." },
    { "type": "text", "id": "tracking_helper", "label": "Tracking helper text", "default": "Example: #1234, 9400 1000 0000 0000 0000, or 1Z…" },
    { "type": "text", "id": "email_label", "label": "Email field label", "default": "Email address" },
    { "type": "text", "id": "email_placeholder", "label": "Email field placeholder", "default": "you@example.com" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Track my order" },
    { "type": "checkbox", "id": "show_secondary_help", "label": "Show additional help text/link", "default": true },
    { "type": "text", "id": "secondary_help_text", "label": "Secondary help text", "default": "Can’t find your order?" },
    { "type": "url", "id": "secondary_help_url", "label": "Secondary help URL" },

    { "type": "header", "content": "Button options" },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "default": "primary",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "ghost", "label": "Ghost" }
      ]
    },
    { "type": "checkbox", "id": "open_in_new_tab", "label": "Open destination in new tab", "default": false },

    { "type": "header", "content": "Mode & routing" },
    {
      "type": "select",
      "id": "mode",
      "label": "Tracking mode",
      "default": "shopify_help",
      "options": [
        { "value": "shopify_help", "label": "Send to Shopify order help / status page" },
        { "value": "external_pattern", "label": "Redirect to external tracking URL pattern" }
      ]
    },

    { "type": "header", "content": "Shopify help mode" },
    { "type": "url", "id": "shopify_help_url", "label": "Shopify order help URL" },
    { "type": "checkbox", "id": "shopify_help_append_query", "label": "Append tracking ID as query parameter", "default": false },
    { "type": "text", "id": "shopify_help_query_param", "label": "Query parameter name", "default": "tracking" },

    { "type": "header", "content": "External pattern mode" },
    { "type": "text", "id": "external_pattern_url", "label": "External tracking URL pattern", "default": "https://track.aftership.com/{tracking}" },
    { "type": "url", "id": "external_fallback_url", "label": "Fallback URL if tracking is empty" },

    { "type": "header", "content": "Layout & styling" },
    {
      "type": "select",
      "id": "layout_variant",
      "label": "Layout variant",
      "default": "card",
      "options": [
        { "value": "card", "label": "Card" },
        { "value": "full_width", "label": "Full width" },
        { "value": "split", "label": "Split" }
      ]
    },
    {
      "type": "select",
      "id": "background_style",
      "label": "Background style",
      "default": "surface",
      "options": [
        { "value": "surface", "label": "Surface" },
        { "value": "contrast", "label": "Contrast" },
        { "value": "brand", "label": "Brand color" }
      ]
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Content alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    { "type": "checkbox", "id": "show_icon", "label": "Show tracking icon", "default": true },
    {
      "type": "select",
      "id": "icon_style",
      "label": "Icon style",
      "default": "package",
      "options": [
        { "value": "package", "label": "Package" },
        { "value": "truck", "label": "Truck" },
        { "value": "clock", "label": "Clock" },
        { "value": "custom", "label": "Custom" }
      ]
    },
    { "type": "image_picker", "id": "custom_icon", "label": "Custom icon (optional when icon style = custom)" }
  ],
  "presets": [
    {
      "name": "3rd Party - Order Tracking",
      "category": "3rd Party Integrations"
    }
  ]
}
{% endschema %}
