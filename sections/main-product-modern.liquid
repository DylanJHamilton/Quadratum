{%- comment -%}
  Quadratum — Main Product Modern (Self-contained PDP)
  File: sections/main-product-modern.liquid

  GOALS (This patch):
  - Keep Quadratum conventions / self-contained assets
  - Add Dawn-like feature surface (layout + settings) without Dawn dependency graph
  - Fix schema/preset validation:
    - Allow @app in blocks
    - Do NOT include @app in presets
  - Keep Liquid syntax Shopify-safe (no ternaries)
{%- endcomment -%}

{{ 'main-product-modern.css' | asset_url | stylesheet_tag }}
<script src="{{ 'main-product-modern.js' | asset_url }}" defer="defer"></script>

{%- liquid
  assign s = section.settings
  assign p = product

  if p == blank
    break
  endif

  assign media_limit = s.media_limit | default: 12
  assign tabs_mode = s.content_display_mode | default: 'tabs'

  assign current_variant = p.selected_or_first_available_variant
  if current_variant == blank
    assign current_variant = p.variants.first
  endif

  assign section_aria = s.section_aria_label
  if section_aria == blank
    assign section_aria = 'Product details'
  endif

  assign media_aria = s.media_aria_label
  if media_aria == blank
    assign media_aria = 'Product media'
  endif

  assign summary_aria = s.summary_aria_label
  if summary_aria == blank
    assign summary_aria = 'Product information'
  endif

  assign media_bg = 'transparent'
  if s.media_bg_mode == 'custom'
    assign media_bg = s.media_bg_color | default: '#ffffff'
  endif

  assign active_media_id = ''
  if current_variant.featured_media != blank
    assign active_media_id = current_variant.featured_media.id
  elsif p.featured_media != blank
    assign active_media_id = p.featured_media.id
  elsif p.media.size > 0
    assign active_media_id = p.media.first.id
  endif

  assign desktop_dir = s.desktop_layout_direction | default: 'normal'
  assign sticky_target = s.desktop_sticky_target | default: 'none'

  assign gallery_layout = s.gallery_layout | default: 'stacked'
  assign media_position = s.media_position | default: 'left'
  assign media_size = s.media_size | default: 'large'
  assign mobile_thumbs = s.mobile_thumbnails | default: 'hide'
  assign image_zoom = s.image_zoom | default: 'lightbox'

  assign enable_sticky_info = s.enable_sticky_info
  if enable_sticky_info == blank
    assign enable_sticky_info = true
  endif

  assign padding_top = s.padding_top | default: 36
  assign padding_bottom = s.padding_bottom | default: 36

  assign section_color_scheme = s.color_scheme | default: 'scheme-1'
-%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
    }
  }
{%- endstyle -%}

<section
  id="q-pdp-modern-{{ section.id }}"
  class="
    q-pdp-modern
    section-{{ section.id }}-padding
    gradient
    color-{{ section_color_scheme }}
    q-ui--{{ s.ui_surface_style | default: 'soft' }}
    q-tabs--{{ s.tabs_style | default: 'pills' }}
    q-content--{{ s.content_display_mode | default: 'tabs' }}
    q-dir--{{ desktop_dir }}
    q-sticky--{{ sticky_target }}
    q-pad-y--{{ s.pad_y | default: 'md' }}
    q-pad-x--{{ s.pad_x | default: 'md' }}
    q-maxw--{{ s.max_width | default: 'lg' }}

    q-media-size--{{ media_size }}
    q-media-pos--{{ media_position }}
    q-gallery--{{ gallery_layout }}
    q-mobile-thumbs--{{ mobile_thumbs }}
    q-zoom--{{ image_zoom }}
  "
  aria-label="{{ section_aria | escape }}"
  data-section-id="{{ section.id }}"
  data-product-id="{{ p.id }}"
  data-update-url="true"
  data-url="{{ p.url }}"
  data-initial-variant-id="{{ current_variant.id }}"
  data-initial-media-id="{{ active_media_id }}"
  {% if image_zoom == 'hover' %}
    data-zoom-on-hover
  {% endif %}
  style="
    --q-maxw: {%- case s.max_width -%}
      {%- when 'sm' -%} 40rem
      {%- when 'md' -%} 56rem
      {%- when 'lg' -%} 72rem
      {%- when 'xl' -%} 84rem
      {%- when 'full' -%} 100%
      {%- else -%} 72rem
    {%- endcase -%};
    --q-py: {%- case s.pad_y -%}
      {%- when 'none' -%} 0
      {%- when 'sm' -%} 1rem
      {%- when 'md' -%} 2rem
      {%- when 'lg' -%} 3rem
      {%- when 'xl' -%} 4rem
      {%- else -%} 2rem
    {%- endcase -%};
    --q-px: {%- case s.pad_x -%}
      {%- when 'none' -%} 0
      {%- when 'sm' -%} 1rem
      {%- when 'md' -%} 1.5rem
      {%- when 'lg' -%} 2rem
      {%- else -%} 1.5rem
    {%- endcase -%};

    --q-media-bg: {{ media_bg }};
    --q-media-r: {{ s.media_radius | default: 16 | times: 1 }}px;
    --q-media-bw: {{ s.media_border_width | default: 1 | times: 1 }}px;
    --q-media-bc: {{ s.media_border_color | default: '#e5e7eb' }};

    --q-thumb-size: {%- case s.thumb_size -%}
      {%- when 'sm' -%} 3rem
      {%- when 'md' -%} 3.75rem
      {%- when 'lg' -%} 4.5rem
      {%- else -%} 3.75rem
    {%- endcase -%};
    --q-thumb-gap: {{ s.thumb_gap | default: 12 | times: 1 }}px;
    --q-thumb-r: {{ s.thumb_radius | default: 12 | times: 1 }}px;
    --q-thumb-bw: {{ s.thumb_border_width | default: 1 | times: 1 }}px;
    --q-thumb-bc: {{ s.thumb_border_color | default: '#e5e7eb' }};
    --q-thumb-bc-active: {{ s.thumb_border_color_active | default: '#111827' }};

    --q-ui-r: {{ s.ui_radius | default: 12 | times: 1 }}px;
    --q-ui-bw: {{ s.ui_border_width | default: 1 | times: 1 }}px;
    --q-ui-bc: {{ s.ui_border_color | default: '#e5e7eb' }};

    {%- if s.use_custom_colors -%}
      --q-bg: {{ s.bg_color | default: '#ffffff' }};
      --q-text: {{ s.text_color | default: '#111827' }};
    {%- else -%}
      --q-bg: transparent;
      --q-text: inherit;
    {%- endif -%}

    --q-btn-bg: {{ s.btn_bg | default: '#111827' }};
    --q-btn-text: {{ s.btn_text | default: '#ffffff' }};
    --q-btn-bc: {{ s.btn_border | default: '#111827' }};
    --q-btn-bg-h: {{ s.btn_bg_hover | default: '#0b0f19' }};
    --q-btn-text-h: {{ s.btn_text_hover | default: '#ffffff' }};
    --q-btn-bc-h: {{ s.btn_border_hover | default: '#0b0f19' }};
    --q-btn-dis-bg: {{ s.btn_disabled_bg | default: '#e5e7eb' }};
    --q-btn-dis-text: {{ s.btn_disabled_text | default: '#6b7280' }};
    --q-btn-dis-bc: {{ s.btn_disabled_border | default: '#e5e7eb' }};
  "
>
  <div class="q-pdp-modern__inner">
    <div class="q-pdp-modern__grid">
      <!-- MEDIA -->
      <div class="q-pdp-modern__media" aria-label="{{ media_aria | escape }}">
        <div class="q-modern-media" data-gallery>
          <div class="q-modern-media__viewer" data-viewer aria-label="Media viewer">
            {%- for m in p.media limit: media_limit -%}
              <div
                class="q-modern-media__item"
                data-media-id="{{ m.id }}"
                {% if m.id == active_media_id %}data-active="true"{% endif %}
              >
                <div class="q-modern-media__frame">
                  {{ m | media_tag }}
                </div>
              </div>
            {%- endfor -%}
          </div>

          {%- if p.media.size > 1 and s.show_thumbnails -%}
            <div class="q-modern-media__thumbs" aria-label="Media thumbnails">
              <div class="q-modern-thumbs" role="list">
                {%- for m in p.media limit: media_limit -%}
                  {%- assign timg = m.preview_image -%}
                  <button
                    type="button"
                    class="q-modern-thumb"
                    role="listitem"
                    data-thumb
                    data-media-id="{{ m.id }}"
                    aria-label="View media {{ forloop.index }}"
                    {% if m.id == active_media_id %}aria-current="true"{% endif %}
                  >
                    {%- if timg != blank -%}
                      <img
                        src="{{ timg | image_url: width: 160 }}"
                        alt="{{ timg.alt | default: p.title | escape }}"
                        loading="lazy"
                        width="160"
                        height="160"
                      >
                    {%- else -%}
                      <span class="q-modern-thumb__ph" aria-hidden="true"></span>
                    {%- endif -%}
                  </button>
                {%- endfor -%}
              </div>
            </div>
          {%- endif -%}
        </div>
      </div>

      <!-- INFO -->
      <div class="q-pdp-modern__info" aria-label="{{ summary_aria | escape }}">
        <div class="q-modern-info {% if enable_sticky_info %}q-modern-info--sticky{% endif %}">
          {%- if s.show_vendor and p.vendor != blank -%}
            <div class="q-modern-vendor">{{ p.vendor }}</div>
          {%- endif -%}

          <h1 class="q-modern-title">{{ p.title }}</h1>

          <div class="q-modern-price" aria-live="polite" data-price>
            {%- if current_variant.compare_at_price > current_variant.price -%}
              <span class="q-modern-price__sale" data-price-sale>{{ current_variant.price | money }}</span>
              <span class="q-modern-price__compare" data-price-compare>{{ current_variant.compare_at_price | money }}</span>
            {%- else -%}
              <span class="q-modern-price__regular" data-price-regular>{{ current_variant.price | money }}</span>
            {%- endif -%}
          </div>

          {%- if cart.taxes_included or cart.duties_included or shop.shipping_policy.body != blank -%}
            <div class="q-modern-tax caption rte">
              {%- if cart.duties_included and cart.taxes_included -%}
                {{ 'products.product.duties_and_taxes_included' | t }}
              {%- elsif cart.taxes_included -%}
                {{ 'products.product.taxes_included' | t }}
              {%- elsif cart.duties_included -%}
                {{ 'products.product.duties_included' | t }}
              {%- endif -%}
              {%- if shop.shipping_policy.body != blank -%}
                {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
              {%- endif -%}
            </div>
          {%- endif -%}

          <div class="q-modern-installments">
            {%- assign product_form_installment_id = 'q-modern-installment-' | append: section.id -%}
            {%- form 'product', p, id: product_form_installment_id, class: 'installment caption-large' -%}
              <input type="hidden" name="id" value="{{ current_variant.id }}">
              {{ form | payment_terms }}
            {%- endform -%}
          </div>

          {%- form 'product', p, class: 'q-modern-form', novalidate: 'novalidate' -%}
            <select name="id" class="q-modern__variant-id" data-variant-id hidden>
              {%- for v in p.variants -%}
                <option value="{{ v.id }}" {% if v.id == current_variant.id %}selected{% endif %}>
                  {{ v.title }}
                </option>
              {%- endfor -%}
            </select>

            <noscript>
              <div class="q-modern-field">
                <label class="q-modern-label" for="q-modern-noscript-variant-{{ section.id }}">Variant</label>
                <select id="q-modern-noscript-variant-{{ section.id }}" name="id" class="q-modern-select">
                  {%- for v in p.variants -%}
                    <option value="{{ v.id }}"
                      {% if v.id == current_variant.id %}selected{% endif %}
                      {% unless v.available %}disabled{% endunless %}
                    >
                      {{ v.title }}{%- unless v.available -%} — Sold out{%- endunless -%}
                    </option>
                  {%- endfor -%}
                </select>
              </div>
            </noscript>

            {%- unless p.has_only_default_variant -%}
              {%- unless s.hide_variants -%}
                {%- for opt in p.options_with_values -%}
                  <div class="q-modern-field">
                    <label class="q-modern-label" for="q-modern-opt-{{ section.id }}-{{ forloop.index0 }}">
                      {{ opt.name }}
                    </label>
                    <select
                      id="q-modern-opt-{{ section.id }}-{{ forloop.index0 }}"
                      class="q-modern-select"
                      data-option-select
                      data-option-index="{{ forloop.index0 }}"
                    >
                      {%- for val in opt.values -%}
                        <option value="{{ val | escape }}" {% if opt.selected_value == val %}selected{% endif %}>
                          {{ val }}
                        </option>
                      {%- endfor -%}
                    </select>
                  </div>
                {%- endfor -%}
              {%- endunless -%}
            {%- endunless -%}

            {%- if s.show_quantity -%}
              <div class="q-modern-field q-modern-field--qty">
                <label class="q-modern-label" for="q-modern-qty-{{ section.id }}">Qty</label>
                <input
                  id="q-modern-qty-{{ section.id }}"
                  class="q-modern-input"
                  type="number"
                  name="quantity"
                  value="1"
                  min="1"
                  inputmode="numeric"
                >
              </div>
            {%- endif -%}

            <button
              type="submit"
              class="q-modern-btn"
              name="add"
              data-atc
              {% unless current_variant.available %}disabled{% endunless %}
            >
              <span data-atc-text>
                {%- if current_variant.available -%}Add to cart{%- else -%}Sold out{%- endif -%}
              </span>
            </button>

            {%- if s.show_dynamic_checkout -%}
              <div class="q-modern-dynamic-checkout">
                {{ form | payment_button }}
              </div>
            {%- endif -%}
          {%- endform -%}

          <script type="application/json" data-variants-json>
            {{ p.variants | json }}
          </script>

          <script type="application/json" data-money-format>
            {{ shop.money_format | json }}
          </script>
        </div>
      </div>
    </div>

    <!-- CONTENT -->
    <div class="q-pdp-modern__content">
      {%- if section.blocks.size > 0 -%}
        {%- if tabs_mode == 'tabs' -%}
          <div class="q-modern-tabs" role="tablist" aria-label="Product content tabs">
            {%- assign first_tab_checked = false -%}

            {%- for block in section.blocks -%}
              {%- case block.type -%}
                {%- when 'description' -%}
                  {%- assign tab_title = block.settings.heading -%}
                  {%- if tab_title == blank -%}{%- assign tab_title = 'Product Description' -%}{%- endif -%}

                  <input
                    class="q-modern-tab__radio"
                    type="radio"
                    name="q-modern-tabs-{{ section.id }}"
                    id="q-modern-tab-{{ section.id }}-{{ block.id }}"
                    {%- unless first_tab_checked -%}checked{%- assign first_tab_checked = true -%}{%- endunless -%}
                  >
                  <label class="q-modern-tab__label" for="q-modern-tab-{{ section.id }}-{{ block.id }}">
                    {{ tab_title }}
                  </label>
                  <div class="q-modern-tab__panel" {{ block.shopify_attributes }}>
                    <div class="q-modern-richtext">
                      {{ p.description }}
                    </div>
                  </div>

                {%- when 'meta_data' -%}
                  {%- assign tab_title = block.settings.heading -%}
                  {%- if tab_title == blank -%}{%- assign tab_title = 'Meta Data' -%}{%- endif -%}

                  <input
                    class="q-modern-tab__radio"
                    type="radio"
                    name="q-modern-tabs-{{ section.id }}"
                    id="q-modern-tab-{{ section.id }}-{{ block.id }}"
                    {%- unless first_tab_checked -%}checked{%- assign first_tab_checked = true -%}{%- endunless -%}
                  >
                  <label class="q-modern-tab__label" for="q-modern-tab-{{ section.id }}-{{ block.id }}">
                    {{ tab_title }}
                  </label>
                  <div class="q-modern-tab__panel" {{ block.shopify_attributes }}>
                    <div class="q-modern-specs">
                      {%- for i in (1..6) -%}
                        {%- assign label_key = 'label_' | append: i -%}
                        {%- assign ns_key = 'namespace_' | append: i -%}
                        {%- assign key_key = 'key_' | append: i -%}
                        {%- assign row_label = block.settings[label_key] -%}
                        {%- assign ns = block.settings[ns_key] -%}
                        {%- assign k = block.settings[key_key] -%}
                        {%- if ns != blank and k != blank -%}
                          {%- assign mf = p.metafields[ns][k] -%}
                          {%- if mf != blank -%}
                            <div class="q-modern-spec">
                              <div class="q-modern-spec__k">{{ row_label | default: 'Spec' }}</div>
                              <div class="q-modern-spec__v">{{ mf | metafield_tag }}</div>
                            </div>
                          {%- endif -%}
                        {%- endif -%}
                      {%- endfor -%}
                    </div>
                  </div>

                {%- when '@app' -%}
                  <input
                    class="q-modern-tab__radio"
                    type="radio"
                    name="q-modern-tabs-{{ section.id }}"
                    id="q-modern-tab-{{ section.id }}-{{ block.id }}"
                    {%- unless first_tab_checked -%}checked{%- assign first_tab_checked = true -%}{%- endunless -%}
                  >
                  <label class="q-modern-tab__label" for="q-modern-tab-{{ section.id }}-{{ block.id }}">
                    Reviews
                  </label>
                  <div class="q-modern-tab__panel" {{ block.shopify_attributes }}>
                    {%- render block -%}
                  </div>
              {%- endcase -%}
            {%- endfor -%}
          </div>
        {%- else -%}
          <div class="q-modern-sections">
            {%- for block in section.blocks -%}
              {%- case block.type -%}
                {%- when 'description' -%}
                  {%- assign h = block.settings.heading -%}
                  {%- if h == blank -%}{%- assign h = 'Product Description' -%}{%- endif -%}
                  <div class="q-modern-section" {{ block.shopify_attributes }}>
                    <h2 class="q-modern-h2">{{ h }}</h2>
                    <div class="q-modern-richtext">
                      {{ p.description }}
                    </div>
                  </div>

                {%- when '@app' -%}
                  <div class="q-modern-section" {{ block.shopify_attributes }}>
                    <h2 class="q-modern-h2">Reviews</h2>
                    {%- render block -%}
                  </div>

                {%- when 'meta_data' -%}
                  {%- assign h = block.settings.heading -%}
                  {%- if h == blank -%}{%- assign h = 'Meta Data' -%}{%- endif -%}
                  <div class="q-modern-section" {{ block.shopify_attributes }}>
                    <h2 class="q-modern-h2">{{ h }}</h2>
                    <div class="q-modern-specs">
                      {%- for i in (1..6) -%}
                        {%- assign label_key = 'label_' | append: i -%}
                        {%- assign ns_key = 'namespace_' | append: i -%}
                        {%- assign key_key = 'key_' | append: i -%}
                        {%- assign row_label = block.settings[label_key] -%}
                        {%- assign ns = block.settings[ns_key] -%}
                        {%- assign k = block.settings[key_key] -%}
                        {%- if ns != blank and k != blank -%}
                          {%- assign mf = p.metafields[ns][k] -%}
                          {%- if mf != blank -%}
                            <div class="q-modern-spec">
                              <div class="q-modern-spec__k">{{ row_label | default: 'Spec' }}</div>
                              <div class="q-modern-spec__v">{{ mf | metafield_tag }}</div>
                            </div>
                          {%- endif -%}
                        {%- endif -%}
                      {%- endfor -%}
                    </div>
                  </div>
              {%- endcase -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
      {%- endif -%}
    </div>

    <script type="application/ld+json">
      {{ p | structured_data }}
    </script>
  </div>
</section>

{% schema %}
{
  "name": "Main Product - Modern",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "header", "content": "Dawn parity" },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "Enable sticky info (desktop)"
    },
    {
      "type": "select",
      "id": "media_size",
      "label": "Media size",
      "default": "large",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ]
    },
    {
      "type": "select",
      "id": "media_position",
      "label": "Media position",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "label": "Gallery layout",
      "default": "stacked",
      "options": [
        { "value": "stacked", "label": "Stacked" },
        { "value": "columns", "label": "Columns" },
        { "value": "thumbnail", "label": "Thumbnail" },
        { "value": "thumbnail_slider", "label": "Thumbnail slider" }
      ]
    },
    {
      "type": "select",
      "id": "mobile_thumbnails",
      "label": "Mobile thumbnails",
      "default": "hide",
      "options": [
        { "value": "columns", "label": "Columns" },
        { "value": "show", "label": "Show" },
        { "value": "hide", "label": "Hide" }
      ]
    },
    {
      "type": "select",
      "id": "image_zoom",
      "label": "Image zoom",
      "default": "lightbox",
      "options": [
        { "value": "lightbox", "label": "Lightbox" },
        { "value": "hover", "label": "Hover" },
        { "value": "none", "label": "None" }
      ]
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "Hide variants"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "Enable video looping"
    },

    { "type": "header", "content": "Section padding" },
    { "type": "range", "id": "padding_top", "label": "Padding top", "min": 0, "max": 100, "step": 4, "unit": "px", "default": 36 },
    { "type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "default": 36 },

    { "type": "header", "content": "Quadratum layout" },
    {
      "type": "select",
      "id": "desktop_layout_direction",
      "label": "Desktop layout direction",
      "default": "normal",
      "options": [
        { "value": "normal", "label": "Media left / Info right" },
        { "value": "reverse", "label": "Media right / Info left" }
      ]
    },
    {
      "type": "select",
      "id": "desktop_sticky_target",
      "label": "Desktop sticky target",
      "default": "none",
      "options": [
        { "value": "info", "label": "Info" },
        { "value": "media", "label": "Media" },
        { "value": "none", "label": "None" }
      ]
    },
    {
      "type": "select",
      "id": "max_width",
      "label": "Max width",
      "default": "lg",
      "options": [
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" },
        { "value": "xl", "label": "Extra large" },
        { "value": "full", "label": "Full width" }
      ]
    },
    {
      "type": "select",
      "id": "pad_y",
      "label": "Vertical padding",
      "default": "md",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" },
        { "value": "xl", "label": "Extra large" }
      ]
    },
    {
      "type": "select",
      "id": "pad_x",
      "label": "Horizontal padding",
      "default": "md",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" }
      ]
    },

    { "type": "header", "content": "Media" },
    { "type": "range", "id": "media_limit", "label": "Media limit", "min": 1, "max": 24, "step": 1, "default": 12 },
    { "type": "checkbox", "id": "show_thumbnails", "label": "Show thumbnails", "default": true },
    {
      "type": "select",
      "id": "media_bg_mode",
      "label": "Media background mode",
      "default": "transparent",
      "options": [
        { "value": "transparent", "label": "Transparent" },
        { "value": "custom", "label": "Custom color" }
      ]
    },
    { "type": "color", "id": "media_bg_color", "label": "Media background color", "default": "#ffffff" },

    {
      "type": "select",
      "id": "thumb_size",
      "label": "Thumb size",
      "default": "md",
      "options": [
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" }
      ]
    },
    { "type": "range", "id": "thumb_gap", "label": "Thumb gap", "min": 6, "max": 18, "step": 1, "default": 12 },

    { "type": "header", "content": "Purchase" },
    { "type": "checkbox", "id": "show_quantity", "label": "Show quantity", "default": true },
    { "type": "checkbox", "id": "show_dynamic_checkout", "label": "Show dynamic checkout buttons", "default": false },
    { "type": "checkbox", "id": "show_vendor", "label": "Show vendor", "default": true },

    { "type": "header", "content": "Content" },
    {
      "type": "select",
      "id": "content_display_mode",
      "label": "Content display mode",
      "default": "tabs",
      "options": [
        { "value": "tabs", "label": "Tabs" },
        { "value": "sections", "label": "Sections" }
      ]
    },
    {
      "type": "select",
      "id": "tabs_style",
      "label": "Tabs style",
      "default": "pills",
      "options": [
        { "value": "pills", "label": "Pills" },
        { "value": "underline", "label": "Underline" },
        { "value": "minimal", "label": "Minimal" }
      ]
    },

    { "type": "header", "content": "Colors" },
    { "type": "checkbox", "id": "use_custom_colors", "label": "Use custom colors", "default": false },
    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#111827" },

    { "type": "header", "content": "Buttons" },
    { "type": "color", "id": "btn_bg", "label": "Button background", "default": "#111827" },
    { "type": "color", "id": "btn_text", "label": "Button text", "default": "#ffffff" },
    { "type": "color", "id": "btn_border", "label": "Button border", "default": "#111827" },
    { "type": "color", "id": "btn_bg_hover", "label": "Button hover background", "default": "#0b0f19" },
    { "type": "color", "id": "btn_text_hover", "label": "Button hover text", "default": "#ffffff" },
    { "type": "color", "id": "btn_border_hover", "label": "Button hover border", "default": "#0b0f19" },
    { "type": "color", "id": "btn_disabled_bg", "label": "Button disabled background", "default": "#e5e7eb" },
    { "type": "color", "id": "btn_disabled_text", "label": "Button disabled text", "default": "#6b7280" },
    { "type": "color", "id": "btn_disabled_border", "label": "Button disabled border", "default": "#e5e7eb" },

    { "type": "header", "content": "Borders & radius" },
    {
      "type": "select",
      "id": "ui_surface_style",
      "label": "UI surface style",
      "default": "soft",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "soft", "label": "Soft" },
        { "value": "bordered", "label": "Bordered" }
      ]
    },
    { "type": "range", "id": "media_radius", "label": "Media radius", "min": 0, "max": 24, "step": 1, "default": 16 },
    { "type": "range", "id": "media_border_width", "label": "Media border width", "min": 0, "max": 4, "step": 1, "default": 1 },
    { "type": "color", "id": "media_border_color", "label": "Media border color", "default": "#e5e7eb" },
    { "type": "range", "id": "thumb_radius", "label": "Thumb radius", "min": 0, "max": 24, "step": 1, "default": 12 },
    { "type": "range", "id": "thumb_border_width", "label": "Thumb border width", "min": 0, "max": 4, "step": 1, "default": 1 },
    { "type": "color", "id": "thumb_border_color", "label": "Thumb border color", "default": "#e5e7eb" },
    { "type": "color", "id": "thumb_border_color_active", "label": "Thumb border active", "default": "#111827" },
    { "type": "range", "id": "ui_radius", "label": "UI radius", "min": 0, "max": 24, "step": 1, "default": 12 },
    { "type": "range", "id": "ui_border_width", "label": "UI border width", "min": 0, "max": 4, "step": 1, "default": 1 },
    { "type": "color", "id": "ui_border_color", "label": "UI border color", "default": "#e5e7eb" },

    { "type": "header", "content": "Accessibility" },
    { "type": "text", "id": "section_aria_label", "label": "Section aria label" },
    { "type": "text", "id": "media_aria_label", "label": "Media aria label" },
    { "type": "text", "id": "summary_aria_label", "label": "Summary aria label" }
  ],
  "blocks": [
    { "type": "@app" },
    {
      "type": "description",
      "name": "Description",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading" }
      ]
    },
    {
      "type": "meta_data",
      "name": "Meta Data",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading" },

        { "type": "text", "id": "label_1", "label": "Label 1" },
        { "type": "text", "id": "namespace_1", "label": "Namespace 1" },
        { "type": "text", "id": "key_1", "label": "Key 1" },

        { "type": "text", "id": "label_2", "label": "Label 2" },
        { "type": "text", "id": "namespace_2", "label": "Namespace 2" },
        { "type": "text", "id": "key_2", "label": "Key 2" },

        { "type": "text", "id": "label_3", "label": "Label 3" },
        { "type": "text", "id": "namespace_3", "label": "Namespace 3" },
        { "type": "text", "id": "key_3", "label": "Key 3" },

        { "type": "text", "id": "label_4", "label": "Label 4" },
        { "type": "text", "id": "namespace_4", "label": "Namespace 4" },
        { "type": "text", "id": "key_4", "label": "Key 4" },

        { "type": "text", "id": "label_5", "label": "Label 5" },
        { "type": "text", "id": "namespace_5", "label": "Namespace 5" },
        { "type": "text", "id": "key_5", "label": "Key 5" },

        { "type": "text", "id": "label_6", "label": "Label 6" },
        { "type": "text", "id": "namespace_6", "label": "Namespace 6" },
        { "type": "text", "id": "key_6", "label": "Key 6" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Main Product - Modern",
      "category": "Product",
      "blocks": [
        { "type": "description" },
        { "type": "meta_data" }
      ]
    }
  ]
}
{% endschema %}
