{%- comment -%}
  snippets/q-social-pinterest-thumb.liquid
  Quadratum â€” Pinterest pin thumbnail (lightweight)
{%- endcomment -%}

{%- liquid
  assign b = block.settings
  assign s = section_settings

  assign ratio = s.image_ratio | default: '2:3'
  assign url = b.pinterest_url
  assign has_url = false

  if url != blank and url != '#'
    assign has_url = true
  endif

  assign ratio_key = ratio
  if ratio_key == 'adapt' and b.image == blank
    assign ratio_key = '2:3'
  endif

  assign ratio_class = ''
  if ratio_key != 'adapt'
    assign ratio_class = 'q-media--ratio-' | append: ratio_key | replace: ':', '-'
  endif

  assign alt_text = b.title | default: 'Pinterest idea' | escape
-%}

<div class="q-pin-thumb" {{ block.shopify_attributes }}>
  {%- if has_url -%}
    <a
      href="{{ url }}"
      class="q-pin-thumb__link"
      aria-label="{{ b.aria_label | default: 'Open this idea on Pinterest' | escape }}"
      {%- if s.open_pins_in_new_tab -%} target="_blank" rel="noopener noreferrer"{%- endif -%}
    >
  {%- endif -%}

    <div class="q-pin-thumb__media q-media{% if ratio_class != blank %} {{ ratio_class }}{% endif %}">
      {%- if b.image != blank -%}
        {{ b.image | image_url: width: 720 | image_tag: loading: 'lazy', alt: alt_text }}
      {%- else -%}
        <div class="q-pin-thumb__placeholder" aria-hidden="true"></div>
      {%- endif -%}

      {%- if s.show_pinterest_badge -%}
        <div class="q-pin-thumb__badge" aria-hidden="true">
          {%- render 'icon-social', name: 'pinterest' -%}
        </div>
      {%- endif -%}
    </div>

    {%- if s.show_pin_titles and b.title != blank -%}
      <p class="q-pin-thumb__title">{{ b.title | escape }}</p>
    {%- endif -%}

  {%- if has_url -%}
    </a>
  {%- endif -%}
</div>


<style>  .q-social-pinterest-idea-board .q-pin-thumb__link {
    display: block;
    text-decoration: none;
    color: inherit;
  }

  .q-social-pinterest-idea-board .q-pin-thumb__media {
    position: relative;
    overflow: hidden;
    border-radius: var(--q-radius, 16px);
  }

  .q-social-pinterest-idea-board .q-pin-thumb__placeholder {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.06);
  }

  .q-social-pinterest-idea-board .q-pin-thumb__badge {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 28px;
    height: 28px;
    display: grid;
    place-items: center;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.9);
  }

  .q-social-pinterest-idea-board .q-pin-thumb__badge svg {
    width: 18px;
    height: 18px;
    display: block;
  }

  .q-social-pinterest-idea-board .q-pin-thumb__title {
    margin: 10px 0 0;
    font-size: 0.95em;
    line-height: 1.3;
  }
</style>