{% comment %}
  CTA — Featured Product (slides, full color controls)
  - Product resolution: picker OR "shopify://products/<handle>" OR dev handle
  - Slideshow: arrows + dots (section-scoped JS, ~1KB)
  - Colors: text/muted/price/compare/savings badge bg+fg/stock in+out/btn bg+fg
  - Layout: compact/split/minimal, media width %, aspect ratio
  - Sticky CTA: mobile only (<=749px)
{% endcomment %}

{{ 'call-to-action-featured-product.css' | asset_url | stylesheet_tag }}

{%- assign s = section.settings -%}

{%- comment -%} Resolve product from picker / shopify://products/<handle> / dev handle {%- endcomment -%}
{%- assign _raw = s.product | to_s -%}
{%- assign _handle = '' -%}
{%- if _raw contains 'shopify://products/' -%}
  {%- assign _handle = _raw | replace: 'shopify://products/', '' -%}
{%- elsif _raw contains '/' -%}
  {%- assign _handle = _raw | split: '/' | last -%}
{%- else -%}
  {%- assign _handle = _raw -%}
{%- endif -%}
{%- assign product = all_products[_handle] -%}
{%- if product == blank and s.dev_product_handle != blank -%}
  {%- assign product = all_products[s.dev_product_handle] -%}
{%- endif -%}

{%- comment %} Tokens / classes {%- endcomment -%}
{%- assign T_btn_radius = settings.button_radius | default: 12 -%}
{%- assign T_btn_bw     = settings.button_border_width | default: 1 -%}

{%- assign layout_class  = 'is-compact' -%}
{%- if s.layout == 'split'   -%}{%- assign layout_class  = 'is-split'   -%}{%- endif -%}
{%- if s.layout == 'minimal' -%}{%- assign layout_class  = 'is-minimal' -%}{%- endif -%}

{%- assign align_class = 'align-start' -%}
{%- if s.align == 'center' -%}{%- assign align_class = 'align-center' -%}{%- endif -%}

{%- assign surface_class = '' -%}
{%- if s.surface_style == 'elevated' -%}{%- assign surface_class = 'is-elevated' -%}{%- endif -%}
{%- if s.surface_style == 'outlined' -%}{%- assign surface_class = 'is-outlined' -%}{%- endif -%}

{%- comment %} CTA justify {%- endcomment -%}
{%- assign _cta_justify = 'flex-start' -%}
{%- if s.cta_align == 'center' -%}{%- assign _cta_justify = 'center' -%}{%- endif -%}
{%- if s.cta_align == 'end' -%}{%- assign _cta_justify = 'flex-end' -%}{%- endif -%}

{%- comment %} Aspect ratio math {%- endcomment -%}
{%- assign ratio_w = 0 -%}{%- assign ratio_h = 0 -%}
{%- case s.media_ratio -%}
  {%- when '1:1'  -%}{%- assign ratio_w = 1 -%}{%- assign ratio_h = 1 -%}
  {%- when '4:3'  -%}{%- assign ratio_w = 4 -%}{%- assign ratio_h = 3 -%}
  {%- when '3:2'  -%}{%- assign ratio_w = 3 -%}{%- assign ratio_h = 2 -%}
  {%- when '16:9' -%}{%- assign ratio_w = 16 -%}{%- assign ratio_h = 9 -%}
  {%- else -%}{%- assign ratio_w = 0 -%}{%- assign ratio_h = 0 -%}
{%- endcase -%}
{%- assign ratio_pad = 0 -%}
{%- if ratio_w > 0 and ratio_h > 0 -%}
  {%- assign ratio_pad = ratio_h | times: 100.0 | divided_by: ratio_w -%}
{%- endif -%}

<style>
  /* Section-scoped variables and layout */
  #{{ section.id }}{
    --q-bg: {{ s.color_bg | default: '#ffffff' }};
    --q-text: {{ s.color_text | default: '#111111' }};
    --q-muted: {{ s.color_muted | default: '#6b7280' }};
    --q-price: {{ s.color_price | default: '#111111' }};
    --q-compare: {{ s.color_compare | default: '#6b7280' }};
    --q-save-bg: {{ s.color_savings_bg | default: '#ecfccb' }};
    --q-save-fg: {{ s.color_savings_fg | default: '#365314' }};
    --q-stock-in: {{ s.color_stock_in | default: '#166534' }};
    --q-stock-out: {{ s.color_stock_out | default: '#991b1b' }};
    --q-btn-bg: {{ s.color_btn_bg | default: '#2563eb' }};
    --q-btn-fg: {{ s.color_btn_fg | default: '#ffffff' }};
    --q-btn-br: {{ T_btn_radius }}px;
    --q-btn-bw: {{ T_btn_bw }}px;
    --q-card-br: {{ s.card_radius | default: 16 }}px;
    --q-pad-top: {{ s.pad_top | default: 32 | divided_by: 100.0 }}rem;
    --q-pad-bot: {{ s.pad_bottom | default: 32 | divided_by: 100.0 }}rem;
    --q-cta-justify: {{ _cta_justify }};
    --q-media-width: {{ s.media_width | default: 50 }}%;
    --q-ratio-pad: {{ ratio_pad }}%;
    background: var(--q-bg);
    color: var(--q-text);
  }

  #{{ section.id }} .q-wrap.is-split{
    display:grid; gap:1.5rem;
    grid-template-columns:minmax(0,1fr) minmax(0,1fr);
    align-items:start;
  }
  @media (min-width: 900px){
    #{{ section.id }} .q-wrap.is-split .q-media{ width:var(--q-media-width); }
  }

  /* media / slider */
  #{{ section.id }} .q-media{ position:relative; }
  #{{ section.id }} .q-aspect{ width:100%; position:relative; overflow:hidden; border-radius:var(--q-card-br); }
  #{{ section.id }} .q-aspect::before{ content:""; display:block; padding-top:var(--q-ratio-pad); }
  #{{ section.id }} .q-aspect > img, 
  #{{ section.id }} .q-aspect > video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

  #{{ section.id }} .q-slider{ position:relative; overflow:hidden; border-radius:var(--q-card-br); }
  #{{ section.id }} .q-track{ display:flex; transition:transform .35s ease; }
  #{{ section.id }} .q-slide{ flex:0 0 100%; }
  #{{ section.id }} .q-slide img{ width:100%; height:auto; display:block; }

  #{{ section.id }} .q-arrows{ position:absolute; inset:0; display:flex; justify-content:space-between; align-items:center; pointer-events:none; padding:0 .5rem; }
  #{{ section.id }} .q-arrow{
    pointer-events:auto; border:none; cursor:pointer; border-radius:999px; padding:.5rem .65rem; background:rgba(0,0,0,.5); color:#fff;
  }

  #{{ section.id }} .q-dots{ display:flex; gap:.35rem; justify-content:center; margin-top:.5rem; }
  #{{ section.id }} .q-dot{ width:8px; height:8px; border-radius:999px; background:rgba(0,0,0,.2); border:none; cursor:pointer; }
  #{{ section.id }} .q-dot[aria-current="true"]{ background:rgba(0,0,0,.6); }

  /* price / badges */
  #{{ section.id }} [data-price]{ color:var(--q-price); font-weight:600; }
  #{{ section.id }} [data-compare]{ color:var(--q-compare); text-decoration:line-through; margin-left:.4rem; }
  #{{ section.id }} [data-savings]{ background:var(--q-save-bg); color:var(--q-save-fg); padding:.15rem .5rem; border-radius:999px; margin-left:.5rem; font-size:.875rem; }
  #{{ section.id }} [data-stock]{ margin-left:.5rem; font-size:.875rem; }
  #{{ section.id }} [data-stock][data-available="true"]{ color:var(--q-stock-in); }
  #{{ section.id }} [data-stock][data-available="false"]{ color:var(--q-stock-out); }

  /* CTAs */
  #{{ section.id }} .q-ctas{ display:flex; gap:.75rem; justify-content:var(--q-cta-justify); }
  #{{ section.id }} .q-btn.q-btn--solid{
    background:var(--q-btn-bg); color:var(--q-btn-fg);
    border:var(--q-btn-bw) solid transparent; border-radius:var(--q-btn-br);
    padding:.65rem 1rem; font-weight:600;
  }
  #{{ section.id }} .q-btn.q-btn--ghost{
    background:transparent; color:var(--q-btn-bg);
    border:var(--q-btn-bw) solid var(--q-btn-bg); border-radius:var(--q-btn-br);
    padding:.65rem 1rem; font-weight:600;
  }

  /* sticky CTA — strictly mobile */
  #{{ section.id }} .q-sticky{ display:none; }
  @media (max-width: 749px){
    #{{ section.id }}[data-sticky-enabled="true"] .q-sticky{
      display:block; position:sticky; bottom:0; left:0; right:0; background:var(--q-bg);
      padding:.75rem; box-shadow:0 -6px 16px rgba(0,0,0,.08); z-index:5;
    }
    #{{ section.id }} .q-sticky-inner{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
  }
</style>

<section id="{{ section.id }}"
  class="q-section cta-featured-product {{ layout_class }} {{ surface_class }} {{ align_class }}"
  role="region"
  aria-label="{{ s.aria_label | default: 'Featured product call to action' }}"
  data-sticky-enabled="{{ s.sticky_mobile_cta }}"
>
  <div class="container" style="padding-top:var(--q-pad-top);padding-bottom:var(--q-pad-bot);">
    {%- if product == blank -%}
      <div class="q-admin-empty card">
        <h3 class="q-heading">Select a product to feature</h3>
        <p class="q-sub">This CTA highlights a single product with live price, variants, and purchase actions.</p>
      </div>
    {%- else -%}
      {%- assign firstv = product.selected_or_first_available_variant -%}

      {%- assign primary_label = s.primary_label -%}
      {%- if primary_label == blank -%}
        {%- if s.primary_cta_type == 'buy' -%}{%- assign primary_label = 'Buy now' -%}
        {%- elsif s.primary_cta_type == 'view' -%}{%- assign primary_label = 'View product' -%}
        {%- else -%}{%- assign primary_label = 'Add to cart' -%}{%- endif -%}
      {%- endif -%}

      <div class="q-wrap card {{ layout_class }}">
        {%- unless layout_class == 'is-minimal' -%}
          <div class="q-media">
            {%- if s.enable_slider and product.media.size > 0 -%}
              <div class="q-slider" id="slider-{{ section.id }}" data-index="0">
                <div class="q-track">
                  {%- for m in product.media -%}
                    <div class="q-slide">
                      {%- if s.media_ratio != 'auto' -%}
                        <div class="q-aspect">
                          {{ m | image_url: width: 1600
                             | image_tag: loading: 'lazy', decoding: 'async',
                               sizes: '100vw', widths: '640,960,1280,1600,1920',
                               alt: m.alt | escape }}
                        </div>
                      {%- else -%}
                        {{ m | image_url: width: 1600
                           | image_tag: loading: 'lazy', decoding: 'async',
                             sizes: '100vw', widths: '640,960,1280,1600,1920',
                             alt: m.alt | escape }}
                      {%- endif -%}
                    </div>
                  {%- endfor -%}
                </div>
                {%- if s.show_arrows -%}
                  <div class="q-arrows">
                    <button class="q-arrow" type="button" data-prev aria-label="Previous slide">‹</button>
                    <button class="q-arrow" type="button" data-next aria-label="Next slide">›</button>
                  </div>
                {%- endif -%}
                {%- if s.show_dots -%}
                  <div class="q-dots" aria-label="Slide navigation">
                    {%- for m in product.media -%}
                      <button class="q-dot" type="button" data-dot="{{ forloop.index0 }}" aria-current="{% if forloop.first %}true{% else %}false{% endif %}"></button>
                    {%- endfor -%}
                  </div>
                {%- endif -%}
              </div>
            {%- else -%}
              {%- assign media = s.custom_media | default: product.featured_media -%}
              {%- if media and media.preview_image != blank -%}
                {%- if s.media_ratio != 'auto' -%}
                  <div class="q-aspect">
                    {{ media.preview_image | image_url: width: 1600
                      | image_tag: loading: 'lazy', decoding: 'async',
                        widths: '640,960,1280,1600,1920',
                        sizes: '(min-width: 1024px) 48vw, 100vw',
                        alt: media.alt | default: product.title | escape }}
                  </div>
                {%- else -%}
                  {{ media.preview_image | image_url: width: 1600
                    | image_tag: loading: 'lazy', decoding: 'async',
                      widths: '640,960,1280,1600,1920',
                      sizes: '(min-width: 1024px) 48vw, 100vw',
                      alt: media.alt | default: product.title | escape }}
                {%- endif -%}
              {%- elsif product.featured_image -%}
                {%- if s.media_ratio != 'auto' -%}
                  <div class="q-aspect">
                    {{ product.featured_image | image_url: width: 1600
                      | image_tag: loading: 'lazy', decoding: 'async',
                        widths: '640,960,1280,1600,1920',
                        sizes: '(min-width: 1024px) 48vw, 100vw',
                        alt: product.title | escape }}
                  </div>
                {%- else -%}
                  {{ product.featured_image | image_url: width: 1600
                    | image_tag: loading: 'lazy', decoding: 'async',
                      widths: '640,960,1280,1600,1920',
                      sizes: '(min-width: 1024px) 48vw, 100vw',
                      alt: product.title | escape }}
                {%- endif -%}
              {%- else -%}
                <div class="q-media-ph" aria-hidden="true"></div>
              {%- endif -%}
            {%- endif -%}
          </div>
        {%- endunless -%}

        <div class="q-content">
          {%- if s.eyebrow != blank -%}<p class="q-eyebrow" style="color:var(--q-muted)">{{ s.eyebrow }}</p>{%- endif -%}

          {%- if s.headline != blank -%}
            <h2 class="q-heading">{{ s.headline }}</h2>
          {%- else -%}
            <h2 class="q-heading">{{ product.title | escape }}</h2>
          {%- endif -%}

          {%- if s.subheading != blank -%}
            <p class="q-sub" style="color:var(--q-muted)">{{ s.subheading | newline_to_br }}</p>
          {%- endif -%}

          <div class="q-price" data-price-area aria-live="polite">
            {%- if s.show_price -%}
              <span class="q-price-now" data-price>{{ firstv.price | money }}</span>
            {%- endif -%}
            {%- if s.show_compare and firstv.compare_at_price > firstv.price -%}
              <span class="q-price-compare" data-compare>{{ firstv.compare_at_price | money }}</span>
            {%- endif -%}
            {%- if s.show_savings and firstv.compare_at_price > firstv.price -%}
              {%- assign save_amt = firstv.compare_at_price | minus: firstv.price -%}
              {%- assign save_pct = save_amt | times: 100 | divided_by: firstv.compare_at_price | round -%}
              <span class="q-price-save" data-savings>Save {{ save_amt | money }} ({{ save_pct }}%)</span>
            {%- endif -%}
            <span class="q-stock" data-stock data-available="{{ firstv.available }}">
              {% if firstv.available %}In stock{% else %}Sold out{% endif %}
            </span>
          </div>

          {%- assign _form_id = 'q-cta-form-' | append: section.id -%}
          {%- form 'product', product, id: _form_id, class: 'q-form', novalidate: 'novalidate' -%}
            <input type="hidden" name="id" value="{{ firstv.id }}" data-variant-input>

            {%- if s.show_vendor or s.show_sku -%}
              <div class="q-meta" style="color:var(--q-muted)">
                {%- if s.show_vendor and product.vendor != blank -%}<span class="q-vendor">{{ product.vendor }}</span>{%- endif -%}
                {%- if s.show_sku and firstv.sku != blank -%}<span class="q-sku" data-sku> • {{ firstv.sku }}</span>{%- endif -%}
              </div>
            {%- endif -%}

            {%- if product.has_only_default_variant == false -%}
              <div class="q-options" data-options>
                {%- for option in product.options_with_values -%}
                  <fieldset class="q-option" data-option-index="{{ forloop.index0 }}">
                    <legend class="q-option-label">{{ option.name }}</legend>
                    {%- case s.variant_style -%}
                      {%- when 'buttons' -%}
                        <div class="q-opt-buttons" role="radiogroup" aria-label="{{ option.name }}">
                          {%- for val in option.values -%}
                            <label class="q-opt-btn" data-opt-btn>
                              <input type="radio" name="options[{{ option.name | escape }}]" value="{{ val | escape }}"
                                     {% if option.selected_value == val %}checked{% endif %}
                                     aria-checked="{% if option.selected_value == val %}true{% else %}false{% endif %}" />
                              <span>{{ val }}</span>
                            </label>
                          {%- endfor -%}
                        </div>
                      {%- when 'swatches' -%}
                        <div class="q-opt-swatches" role="radiogroup" aria-label="{{ option.name }}">
                          {%- for val in option.values -%}
                            <label class="q-swatch" data-opt-btn>
                              <input type="radio" name="options[{{ option.name | escape }}]" value="{{ val | escape }}"
                                     {% if option.selected_value == val %}checked{% endif %}
                                     aria-checked="{% if option.selected_value == val %}true{% else %}false{% endif %}" />
                              <span class="q-swatch-chip" aria-hidden="true"></span>
                              <span class="q-swatch-label">{{ val }}</span>
                            </label>
                          {%- endfor -%}
                        </div>
                      {%- else -%}
                        <div class="q-opt-select">
                          <label class="sr-only" for="opt-{{ section.id }}-{{ forloop.index0 }}">{{ option.name }}</label>
                          <select id="opt-{{ section.id }}-{{ forloop.index0 }}" name="options[{{ option.name | escape }}]">
                            {%- for val in option.values -%}
                              <option value="{{ val | escape }}"{% if option.selected_value == val %} selected{% endif %}>{{ val }}</option>
                            {%- endfor -%}
                          </select>
                        </div>
                    {%- endcase -%}
                  </fieldset>
                {%- endfor -%}
              </div>
            {%- endif -%}

           {%- if s.show_qty -%}
            {%- comment -%}
                Build a safe qty label:
                1) section override -> s.qty_label
                2) theme translation -> 'products.product.quantity' | t
                3) hard fallback     -> 'Quantity'
            {%- endcomment -%}
            {%- assign qty_label = s.qty_label | to_s -%}
            {%- if qty_label == blank -%}
                {%- assign qty_label = 'products.product.quantity' | t -%}
            {%- endif -%}
            {%- if qty_label == blank or qty_label contains 'translation missing' -%}
                {%- assign qty_label = 'Quantity' -%}
            {%- endif -%}

            <div class="q-qty">
                <label for="qty-{{ section.id }}" class="sr-only">{{ qty_label }}</label>
                <input
                id="qty-{{ section.id }}"
                class="q-input"
                min="1"
                step="1"
                type="number"
                name="quantity"
                value="1"
                inputmode="numeric"
                aria-label="{{ qty_label }}"
                />
            </div>
            {%- endif -%}


            <div class="q-ctas">
              {%- if s.primary_cta_type == 'view' -%}
                <a class="btn q-btn q-btn--solid" href="{{ product.url }}">{{ primary_label }}</a>
              {%- else -%}
                <button class="btn q-btn q-btn--solid" type="submit" name="{% if s.primary_cta_type == 'buy' %}checkout{% else %}add{% endif %}"
                        data-primary-cta data-available="{{ firstv.available }}">{{ primary_label }}</button>
              {%- endif -%}

              {%- if s.secondary_label != blank and s.secondary_url != blank -%}
                <a class="btn q-btn q-btn--ghost" href="{{ s.secondary_url }}" data-secondary-cta>{{ s.secondary_label }}</a>
              {%- endif -%}
            </div>

            {%- if s.microcopy != blank -%}<p class="q-microcopy" style="color:var(--q-muted)">{{ s.microcopy }}</p>{%- endif -%}
          {%- endform -%}

          <div class="sr-only" aria-live="polite" data-live></div>
        </div>
      </div>

      {%- if s.sticky_mobile_cta -%}
        <div class="q-sticky" data-sticky hidden>
          <div class="q-sticky-inner">
            <div class="q-sticky-price" data-sticky-price>{{ firstv.price | money }}</div>
            {%- if s.primary_cta_type == 'view' -%}
              <a class="btn q-btn q-btn--solid" href="{{ product.url }}">{{ primary_label }}</a>
            {%- else -%}
              <button class="btn q-btn q-btn--solid" type="submit" form="q-cta-form-{{ section.id }}"
                      name="{% if s.primary_cta_type == 'buy' %}checkout{% else %}add{% endif %}"
                      data-sticky-button disabled>{{ primary_label }}</button>
            {%- endif -%}
          </div>
        </div>
      {%- endif -%}

      <script type="application/json" data-product-json>{{ product | json }}</script>
      {%- if s.enable_slider and product.media.size > 1 -%}
        <script>
          (function(){
            var root = document.getElementById('slider-{{ section.id }}');
            if(!root) return;
            var track = root.querySelector('.q-track');
            var dots  = root.querySelectorAll('.q-dot');
            var slides = root.querySelectorAll('.q-slide');
            var i = 0, n = slides.length;

            function go(to){
              i = (to + n) % n;
              track.style.transform = 'translateX(' + (-100 * i) + '%)';
              dots.forEach(function(d,idx){ d.setAttribute('aria-current', idx===i ? 'true' : 'false'); });
            }

            var prev = root.querySelector('[data-prev]'), next = root.querySelector('[data-next]');
            if(prev) prev.addEventListener('click', function(){ go(i-1); });
            if(next) next.addEventListener('click', function(){ go(i+1); });
            dots.forEach(function(d){ d.addEventListener('click', function(){ go(parseInt(d.getAttribute('data-dot'),10)||0); }); });

            window.addEventListener('resize', function(){ go(i); }, { passive:true });
          })();
        </script>
      {%- endif -%}
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "CTA — Featured Product",
  "tag": "section",
  "class": "cta-featured-product",
  "settings": [
    { "type": "text", "id": "aria_label", "label": "ARIA label", "default": "Featured product call to action" },

    { "type": "header", "content": "Product (prod & dev)" },
    { "type": "product", "id": "product", "label": "Product", "info": "Pick in Theme Editor or pass \"shopify://products/<handle>\" / \"<handle>\" via JSON." },
    { "type": "text", "id": "dev_product_handle", "label": "DEV ONLY: Product handle (fallback)", "info": "Used only when Product is empty. Example: cotton-tee" },

    { "type": "header", "content": "Appearance" },
    { "type": "color", "id": "color_bg", "label": "Background", "default": "#ffffff" },
    { "type": "color", "id": "color_text", "label": "Text", "default": "#111111" },
    { "type": "color", "id": "color_muted", "label": "Muted text", "default": "#6b7280" },
    { "type": "color", "id": "color_price", "label": "Price text", "default": "#111111" },
    { "type": "color", "id": "color_compare", "label": "Compare-at text", "default": "#6b7280" },
    { "type": "color", "id": "color_savings_bg", "label": "Savings badge background", "default": "#ecfccb" },
    { "type": "color", "id": "color_savings_fg", "label": "Savings badge text", "default": "#365314" },
    { "type": "color", "id": "color_stock_in", "label": "In-stock text", "default": "#166534" },
    { "type": "color", "id": "color_stock_out", "label": "Out-of-stock text", "default": "#991b1b" },
    { "type": "color", "id": "color_btn_bg", "label": "Primary button background", "default": "#2563eb" },
    { "type": "color", "id": "color_btn_fg", "label": "Primary button text", "default": "#ffffff" },

    { "type": "header", "content": "Layout" },
    { "type": "select", "id": "layout", "label": "Layout", "default": "compact", "options": [
      { "value": "compact", "label": "Compact card" },
      { "value": "split", "label": "Wide split" },
      { "value": "minimal", "label": "Spotlight minimal (no image)" }
    ]},
    { "type": "select", "id": "align", "label": "Text alignment", "default": "start", "options": [
      { "value": "start", "label": "Start" },
      { "value": "center", "label": "Center" }
    ]},
    { "type": "select", "id": "surface_style", "label": "Surface style", "default": "default", "options": [
      { "value": "default", "label": "Default" },
      { "value": "elevated", "label": "Elevated (shadow)" },
      { "value": "outlined", "label": "Outlined" }
    ]},
    { "type": "range", "id": "media_width", "label": "Media width (split layout, %)", "min": 30, "max": 70, "step": 5, "default": 50 },
    { "type": "select", "id": "media_ratio", "label": "Media aspect ratio", "default": "auto", "options": [
      { "value": "auto", "label": "Auto (image natural ratio)" },
      { "value": "1:1",  "label": "1:1" },
      { "value": "4:3",  "label": "4:3" },
      { "value": "3:2",  "label": "3:2" },
      { "value": "16:9", "label": "16:9" }
    ]},

    { "type": "header", "content": "Slideshow" },
    { "type": "checkbox", "id": "enable_slider", "label": "Use slideshow (uses all product media)", "default": true },
    { "type": "checkbox", "id": "show_arrows", "label": "Show arrows", "default": true },
    { "type": "checkbox", "id": "show_dots", "label": "Show dots", "default": true },
    { "type": "image_picker", "id": "custom_media", "label": "Custom image/video (overrides product image if slider is off)" },

    { "type": "header", "content": "Content" },
    { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Editor’s pick" },
    { "type": "text", "id": "headline", "label": "Headline (≤ 8 words)", "default": "Sleep better tonight" },
    { "type": "textarea", "id": "subheading", "label": "Subheading (1–2 sentences)", "default": "Clinically proven cooling foam keeps you comfortable." },
    { "type": "checkbox", "id": "social_proof", "label": "Show rating placeholder", "default": true },
    { "type": "richtext", "id": "trust_badges", "label": "Trust badges row (icons/text)" },
    { "type": "text", "id": "microcopy", "label": "Microcopy / shipping line", "default": "Free 30-day returns. Fast shipping." },
    { "type": "text", "id": "qty_label", "label": "Quantity label (override)", "default": "Quantity" },

    { "type": "header", "content": "Pricing visibility" },
    { "type": "checkbox", "id": "show_price", "label": "Show price", "default": true },
    { "type": "checkbox", "id": "show_compare", "label": "Show compare-at price", "default": true },
    { "type": "checkbox", "id": "show_savings", "label": "Show savings badge", "default": true },

    { "type": "header", "content": "Variants & quantity" },
    { "type": "select", "id": "variant_style", "label": "Variant control style", "default": "dropdowns", "options": [
      { "value": "dropdowns", "label": "Dropdowns" },
      { "value": "buttons",  "label": "Buttons" },
      { "value": "swatches", "label": "Swatches" }
    ]},
    { "type": "checkbox", "id": "show_qty", "label": "Show quantity field", "default": false },
    { "type": "checkbox", "id": "show_vendor", "label": "Show vendor", "default": false },
    { "type": "checkbox", "id": "show_sku", "label": "Show SKU", "default": false },

    { "type": "header", "content": "Primary action" },
    { "type": "select", "id": "primary_cta_type", "label": "Primary CTA", "default": "add", "options": [
      { "value": "add", "label": "Add to cart" },
      { "value": "buy", "label": "Buy now" },
      { "value": "view", "label": "View product" }
    ]},
    { "type": "text", "id": "primary_label", "label": "Primary label (optional override)" },
    { "type": "text", "id": "secondary_label", "label": "Secondary CTA label", "default": "Learn more" },
    { "type": "url",  "id": "secondary_url", "label": "Secondary CTA link" },
    { "type": "select", "id": "cta_align", "label": "CTA alignment", "default": "start", "options": [
      { "value": "start", "label": "Left" },
      { "value": "center", "label": "Center" },
      { "value": "end", "label": "Right" }
    ]},

    { "type": "header", "content": "Sticky CTA (mobile)" },
    { "type": "checkbox", "id": "sticky_mobile_cta", "label": "Enable sticky CTA bar on mobile (≤ 749px)", "default": true },

    { "type": "header", "content": "Spacing & radius" },
    { "type": "range", "id": "pad_top", "label": "Padding top (rem ×100)", "min": 0, "max": 96, "step": 2, "default": 32 },
    { "type": "range", "id": "pad_bottom", "label": "Padding bottom (rem ×100)", "min": 0, "max": 96, "step": 2, "default": 32 },
    { "type": "range", "id": "card_radius", "label": "Card radius (px)", "min": 0, "max": 40, "step": 1, "default": 16 }
  ],
  "presets": [
    { "name": "Featured Product — Compact", "category": "Call To Action", "settings": { "layout": "compact", "social_proof": true } },
    { "name": "Featured Product — Split", "category": "Call To Action", "settings": { "layout": "split", "social_proof": true } },
    { "name": "Featured Product — Minimal", "category": "Call To Action", "settings": { "layout": "minimal", "social_proof": false, "show_compare": false, "show_savings": false } }
  ]
}
{% endschema %}
