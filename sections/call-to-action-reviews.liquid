{% comment %}
  Quadratum — Call To Action - Reviews
  • Four layout modes: Slideshow, Grid, Masonry, Carousel
  • Product review integration with star ratings
  • Theme-aware styling + full accessibility
  • Review app integration support (Judge.me, Loox, Yotpo, Stamped)
{% endcomment %}

{{ 'call-to-action-reviews.css' | asset_url | stylesheet_tag }}

{%- assign s = section.settings -%}

{%- comment %} THEME TOKENS {% endcomment -%}
{%- assign T_font_heading = settings.font_heading -%}
{%- assign T_font_body = settings.font_body -%}
{%- assign T_head_letter = settings.headings_letterspacing | default: 0 -%}
{%- assign T_head_uppercase = settings.headings_uppercase -%}
{%- assign T_btn_variant_default = settings.button_variant_default | default: 'solid' -%}
{%- assign T_btn_radius = settings.button_radius | default: 12 -%}
{%- assign T_btn_bw = settings.button_border_width | default: 1 -%}
{%- assign T_btn_hover_op = settings.button_hover_opacity | default: 92 -%}
{%- assign T_btn_active_scale = settings.button_active_scale | default: 98 -%}

{%- assign C_primary = settings.color_primary | default: '#2563eb' -%}
{%- assign C_text_base = settings.text_base | default: '#111111' -%}
{%- assign C_text_muted = settings.text_muted | default: '#6b7280' -%}
{%- assign C_text_on_color = settings.text_on_color | default: '#ffffff' -%}
{%- assign C_bg_base = settings.bg_base | default: '#ffffff' -%}
{%- assign C_bg_contrast = settings.bg_contrast | default: '#f6f7f8' -%}

{%- comment %} SECTION SETTINGS {% endcomment -%}
{%- assign layout_mode = s.layout_mode | default: 'slideshow' -%}
{%- assign text_align = s.text_alignment | default: 'center' -%}
{%- assign heading_align = s.heading_alignment | default: 'inherit' -%}
{%- if heading_align == 'inherit' or heading_align == blank -%}
  {%- assign heading_align = text_align -%}
{%- endif -%}
{%- assign description_align = s.description_alignment | default: heading_align -%}
{%- assign actions_align = s.actions_alignment | default: text_align -%}

{%- assign _btn_choice = s.button_mode | default: 'inherit' -%}
{%- if _btn_choice == 'inherit' or _btn_choice == blank -%}
  {%- assign _btn_variant = T_btn_variant_default -%}
{%- else -%}
  {%- assign _btn_variant = _btn_choice -%}
{%- endif -%}
{%- assign btn_mode_class = 'q-btn--solid' -%}
{%- if _btn_variant == 'outline' -%}{%- assign btn_mode_class = 'q-btn--outline' -%}{%- endif -%}
{%- if _btn_variant == 'ghost' -%}{%- assign btn_mode_class = 'q-btn--ghost' -%}{%- endif -%}

{%- comment %} Review App Detection {% endcomment -%}
{%- assign review_app = s.review_app_integration | default: 'none' -%}

{%- comment %} MEDIA CONTROLS (Slideshow/Carousel) {% endcomment -%}
{%- assign media_fit = s.media_object_fit | default: 'cover' -%}
{%- assign slide_img_h_mobile = s.slide_image_height_mobile | default: 240 -%}
{%- assign slide_img_h_desktop = s.slide_image_height_desktop | default: 360 -%}
{%- assign slide_img_radius = s.slide_image_radius | default: 12 -%}
{%- assign slide_img_aspect = s.slide_image_aspect | default: 'auto' -%}

<style>
  /* ------------------------------
     Scoped tokens + alignment helpers
  ---------------------------------*/
  #{{ section.id }} {
    --q-link: {{ s.link_color | default: C_primary }};
    background-color: {{ s.background_color | default: C_bg_base }};
  }
  #{{ section.id }} .q-text-left { text-align: left; }
  #{{ section.id }} .q-text-center { text-align: center; }
  #{{ section.id }} .q-text-right { text-align: right; }

  #{{ section.id }} .q-heading {
    {% if T_font_heading %}font-family: {{ T_font_heading.family }}, {{ T_font_heading.fallback_families }};{% endif %}
    {% if T_head_uppercase %}text-transform: uppercase;{% endif %}
    {% if T_head_letter != 0 %}letter-spacing: {{ T_head_letter | divided_by: 1000.0 }}em;{% endif %}
    color: {{ s.heading_color | default: C_text_base }};
    font-size: {{ s.heading_size_mobile | default: '2rem' }};
    margin: 0 0 0.5em 0;
  }
  @media (min-width: 768px) {
    #{{ section.id }} .q-heading { font-size: {{ s.heading_size_desktop | default: '3rem' }}; }
  }
  #{{ section.id }} .q-kicker {
    color: {{ s.kicker_color | default: C_primary }};
    font-size: {{ s.kicker_size | default: '0.875rem' }};
    margin: 0 0 0.5rem 0;
  }
  #{{ section.id }} .q-description {
    color: {{ s.description_color | default: C_text_muted }};
    font-size: {{ s.description_size | default: '1.125rem' }};
  }
  #{{ section.id }} a { color: var(--q-link); }

  /* Buttons */
  #{{ section.id }} .q-btn {
    --q-btn-bg: {{ s.button_bg_color | default: C_primary }};
    --q-btn-fg: {{ s.button_text_color | default: C_text_on_color }};
    --q-btn-bdr: {{ s.button_border_color | default: C_primary }};
    --q-btn-bw: {{ s.button_border_width | default: T_btn_bw }}px;
    --q-btn-br: {{ s.button_radius | default: T_btn_radius }}px;
    --q-btn-px: {{ s.button_padding_horizontal | default: 24 }}px;
    --q-btn-py: {{ s.button_padding_vertical | default: 12 }}px;
    --q-btn-hover-op: {{ T_btn_hover_op }}%;
    --q-btn-active-scale: {{ T_btn_active_scale | divided_by: 100.0 }};
  }

  /* Typography/meta inside cards */
  #{{ section.id }} .q-review-star { color: {{ s.star_color | default: '#fbbf24' }}; }
  #{{ section.id }} .q-review-text { color: {{ s.review_text_color | default: C_text_base }}; font-size: {{ s.review_text_size | default: '1rem' }}; }
  #{{ section.id }} .q-reviewer-name { color: {{ s.reviewer_name_color | default: C_text_base }}; font-size: {{ s.reviewer_name_size | default: '1rem' }}; }
  #{{ section.id }} .q-product-name { color: {{ s.product_name_color | default: C_text_muted }}; font-size: {{ s.product_name_size | default: '0.875rem' }}; }

  /* ------------------------------
     Media sizing (slideshow + carousel)
  ---------------------------------*/
  #{{ section.id }} .q-review-media {
    --q-img-h-m: {{ slide_img_h_mobile }}px;
    --q-img-h-d: {{ slide_img_h_desktop }}px;
    --q-img-br: {{ slide_img_radius }}px;
    --q-fit: {{ media_fit }};
  }
  #{{ section.id }} .q-review-media .q-review-img {
    display: block;
    width: 100%;
    height: var(--q-img-h-m);
    object-fit: var(--q-fit);
    border-radius: var(--q-img-br);
  }
  @media (min-width: 768px){
    #{{ section.id }} .q-review-media .q-review-img { height: var(--q-img-h-d); }
  }
  {% if slide_img_aspect != 'auto' %}
  #{{ section.id }} .q-review-media .q-review-img {
    aspect-ratio:
      {% case slide_img_aspect %}
        {% when '1/1' %}1/1
        {% when '4/5' %}4/5
        {% when '3/4' %}3/4
        {% when '4/3' %}4/3
        {% when '16/9' %}16/9
        {% else %}auto
      {% endcase %};
    height: auto;
  }
  {% endif %}

  /* ------------------------------
     Slideshow skeleton
  ---------------------------------*/
  #{{ section.id }} .q-reviews-slideshow { position: relative; overflow: hidden; }
  #{{ section.id }} .q-reviews-track {
    display: flex;
    will-change: transform;
    transition: transform 400ms ease;
  }
  #{{ section.id }} .q-review-slide { flex: 0 0 100%; max-width: 100%; }

  /* Dots + arrows */
  #{{ section.id }} .q-reviews-dots { display:flex; gap:.5rem; justify-content:center; margin-top:1rem; }
  #{{ section.id }} .q-review-dot { width:.6rem; height:.6rem; border-radius:999px; border:1px solid currentColor; opacity:.4; }
  #{{ section.id }} .q-review-dot[aria-current="true"] { opacity:1; }
  #{{ section.id }} .q-review-arrow { position:absolute; top:50%; transform:translateY(-50%); background:transparent; border:0; padding:.5rem; cursor:pointer; }
  #{{ section.id }} .q-review-arrow--prev { left:.25rem; }
  #{{ section.id }} .q-review-arrow--next { right:.25rem; }

    /* Slide inner layout */
  #{{ section.id }} .q-review-slide-inner {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.25rem;
    align-items: start;
    padding: 1.25rem;
    border-radius: 16px;
  }
  #{{ section.id }} .q-review-image-wrapper { order: 1; }
  #{{ section.id }} .q-review-content { order: 2; }
  @media (min-width: 1024px){
    #{{ section.id }} .q-review-slide-inner {
      grid-template-columns: minmax(320px, 520px) 1fr; /* image left / content right */
      gap: 1.5rem;
    }
    #{{ section.id }} .q-review-image-wrapper { order: 1; }
    #{{ section.id }} .q-review-content { order: 2; }
  }
  #{{ section.id }} .q-review-content .q-review-text { margin:.5rem 0 .75rem; }
  #{{ section.id }} .q-reviewer-meta { display:flex; justify-content:space-between; align-items:center; gap:.75rem; }
  #{{ section.id }} .q-reviewed-product { margin-top:.5rem; }

  /* Make sure videos inherit radius and don’t overflow */
  #{{ section.id }} .q-review-video-el { width:100%; display:block; border-radius: {{ slide_img_radius }}px; max-height: {{ slide_img_h_desktop }}px; }
  /* ---------- Alignment fixes for heading, description, and actions ---------- */
#{{ section.id }} .q-heading-group {
  text-align: {{ s.text_alignment | default: 'center' }};
}


</style>

<section
  id="{{ s.anchor_id | default: section.id }}"
  class="q-cta-reviews q-layout-{{ layout_mode }}"
  role="region"
  aria-label="{{ s.aria_label | default: 'Customer reviews' }}"
  style="
    margin-top: {{ s.margin_top | default: 0 }}px;
    margin-bottom: {{ s.margin_bottom | default: 0 }}px;
    padding-top: {{ s.padding_top | default: 60 }}px;
    padding-bottom: {{ s.padding_bottom | default: 60 }}px;
  "
>
  {%- comment %} Background Media {% endcomment -%}
  {%- if s.background_image != blank or s.background_video != blank -%}
    <div class="q-cta-bg" aria-hidden="true">
      {%- if s.background_video != blank -%}
        <video class="q-cta-bg-media" autoplay loop muted playsinline preload="metadata">
          <source src="{{ s.background_video }}" type="video/mp4">
        </video>
      {%- elsif s.background_image != blank -%}
        {{ s.background_image | image_url: width: 2560 | image_tag:
          loading: 'lazy',
          class: 'q-cta-bg-media',
          sizes: '100vw',
          widths: '960,1440,1920,2560'
        }}
      {%- endif -%}
      
      {%- if s.overlay_type == 'gradient' -%}
        {%- assign g1 = s.grad_start | default: '#000000' -%}
        {%- assign g1o = s.grad_start_opacity | default: 40 | divided_by: 100.0 -%}
        {%- assign g2 = s.grad_end | default: '#000000' -%}
        {%- assign g2o = s.grad_end_opacity | default: 0 | divided_by: 100.0 -%}
        {%- assign ang = s.grad_angle | default: 180 -%}
        {%- assign g1c = g1 | color_modify: 'alpha', g1o -%}
        {%- assign g2c = g2 | color_modify: 'alpha', g2o -%}
        <div class="q-cta-overlay" style="background: linear-gradient({{ ang }}deg, {{ g1c }}, {{ g2c }});"></div>
      {%- else -%}
        {%- assign oc = s.overlay_color | default: '#000000' -%}
        {%- assign oo = s.overlay_opacity | default: 0 | divided_by: 100.0 -%}
        <div class="q-cta-overlay" style="background-color: {{ oc }}; opacity: {{ oo }};"></div>
      {%- endif -%}
    </div>
  {%- endif -%}

  <div class="q-container" style="max-width: {{ s.container_width | default: '1200px' }};">
    {%- comment %} Section Header {% endcomment -%}
    <div class="q-cta-header">
      {%- if s.kicker != blank -%}
        <p class="q-kicker q-text-{{ text_align }}">{{ s.kicker }}</p>
      {%- endif -%}
      {%- if s.heading != blank -%}
        <h2 class="q-heading q-text-{{ heading_align }}">{{ s.heading }}</h2>
      {%- endif -%}
      {%- if s.description != blank -%}
        <div class="q-description q-text-{{ description_align }}">{{ s.description }}</div>
      {%- endif -%}
    </div>

    {%- comment %} Review App Integration {% endcomment -%}
    {%- if review_app != 'none' and review_app != blank -%}
      <div class="q-review-app-container">
        {%- case review_app -%}
          {%- when 'judgeme' -%}
            <div id="judgeme_product_reviews" class="jdgm-widget jdgm-review-widget"></div>
          {%- when 'loox' -%}
            <div id="looxReviews" data-loox-aggregate></div>
          {%- when 'yotpo' -%}
            <div class="yotpo yotpo-reviews-carousel" data-background-color="transparent"></div>
          {%- when 'stamped' -%}
            <div id="stamped-main-widget" data-widget-style="standard"></div>
        {%- endcase -%}
      </div>
    {%- endif -%}

    {%- comment %} Reviews Content {% endcomment -%}
    {%- if section.blocks.size > 0 -%}

      {%- comment -%} SLIDESHOW {%- endcomment -%}
      {%- if layout_mode == 'slideshow' -%}
        <div 
          class="q-reviews-slideshow" 
          data-reviews-slideshow
          data-autoplay="{{ s.autoplay | default: true }}"
          data-interval="{{ s.autoplay_interval | default: 5 }}"
          role="group"
          aria-roledescription="carousel"
          aria-label="Customer reviews carousel"
        >
          <div class="q-reviews-track" data-reviews-track role="list">
            {%- for block in section.blocks -%}
              {%- assign b = block.settings -%}
              <div 
                class="q-review-slide{% if forloop.first %} is-active{% endif %}" 
                data-review-slide
                role="listitem"
                aria-label="Review {{ forloop.index }} of {{ section.blocks.size }}"
                {% unless forloop.first %}aria-hidden="true"{% endunless %}
                {{ block.shopify_attributes }}
              >
                <div class="q-review-slide-inner q-card">
                  <div class="q-review-image-wrapper q-review-media">
                    {%- if b.review_image != blank -%}
                      {%- assign media_tag = b.review_image | image_url: width: 1100 | image_tag:
                        class: 'q-review-img',
                        alt: 'Review image',
                        loading: 'lazy'
                      -%}
                      {%- if b.product != blank -%}
                        <a href="{{ b.product.url }}" aria-label="View {{ b.product.title }}">{{ media_tag }}</a>
                      {%- else -%}
                        {{ media_tag }}
                      {%- endif -%}
                    {%- endif -%}
                    {%- if b.review_video_url != blank -%}
                      <div class="q-review-video">
                        <video controls preload="metadata" class="q-review-video-el">
                          <source src="{{ b.review_video_url }}" type="video/mp4">
                        </video>
                      </div>
                    {%- endif -%}
                  </div>

                  <div class="q-review-content">
                    <div class="q-review-stars" role="img" aria-label="{{ b.rating }} out of 5 stars">
                      {%- for i in (1..5) -%}
                        {%- if i <= b.rating -%}
                          <svg class="q-review-star q-star-filled" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                        {%- else -%}
                          <svg class="q-review-star q-star-empty" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                        {%- endif -%}
                      {%- endfor -%}
                    </div>

                    {%- if b.review_text != blank -%}
                      <blockquote class="q-review-text"><p>"{{ b.review_text }}"</p></blockquote>
                    {%- endif -%}

                    <div class="q-reviewer-meta">
                      <div class="q-reviewer-details">
                        {%- if b.reviewer_name != blank -%}<p class="q-reviewer-name">{{ b.reviewer_name }}</p>{%- endif -%}
                        {%- if b.reviewer_location != blank -%}<p class="q-reviewer-location">{{ b.reviewer_location }}</p>{%- endif -%}
                        {%- if b.verified_purchase -%}
                          <span class="q-verified-badge">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                            Verified Purchase
                          </span>
                        {%- endif -%}
                      </div>
                      {%- if b.review_date != blank -%}<p class="q-review-date">{{ b.review_date }}</p>{%- endif -%}
                    </div>

                    {%- if b.product != blank or b.product_name_override != blank -%}
                      <div class="q-reviewed-product">
                        <p class="q-product-name">
                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/><path d="M21 15l-5-5L5 21"/></svg>
                          {%- assign pname = b.product_name_override | default: b.product.title -%}
                          {%- if b.product != blank -%}
                            <a href="{{ b.product.url }}" aria-label="View {{ pname | escape }}">{{ pname }}</a>
                          {%- else -%}
                            {{ pname }}
                          {%- endif -%}
                        </p>
                      </div>
                    {%- endif -%}
                  </div>
                </div>
              </div>
            {%- endfor -%}
          </div>

          {%- if s.show_arrows and section.blocks.size > 1 -%}
            <button class="q-review-arrow q-review-arrow--prev" data-reviews-prev aria-label="Previous review" type="button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <button class="q-review-arrow q-review-arrow--next" data-reviews-next aria-label="Next review" type="button">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          {%- endif -%}

          {%- if s.show_dots and section.blocks.size > 1 -%}
            <div class="q-reviews-dots" role="tablist" aria-label="Review navigation">
              {%- for block in section.blocks -%}
                <button 
                  class="q-review-dot" 
                  data-reviews-dot
                  data-index="{{ forloop.index0 }}"
                  role="tab"
                  aria-label="Go to review {{ forloop.index }}"
                  {% if forloop.first %}aria-current="true"{% endif %}
                  type="button"
                ></button>
              {%- endfor -%}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- comment -%} GRID {%- endcomment -%}
      {%- if layout_mode == 'grid' -%}
        <div class="q-reviews-grid q-grid-cols-{{ s.grid_columns_mobile }}-{{ s.grid_columns_tablet }}-{{ s.grid_columns_desktop }}">
          {%- for block in section.blocks -%}
            {%- assign b = block.settings -%}
            <article class="q-review-card q-review-card--grid" {{ block.shopify_attributes }}>
              <div class="q-review-card-media q-review-media">
                {%- if b.review_image != blank -%}
                  {%- assign media_tag = b.review_image | image_url: width: 640 | image_tag:
                    class: 'q-review-img',
                    alt: 'Review image',
                    loading: 'lazy'
                  -%}
                  {%- if b.product != blank -%}
                    <a href="{{ b.product.url }}" aria-label="View {{ b.product.title }}">{{ media_tag }}</a>
                  {%- else -%}
                    {{ media_tag }}
                  {%- endif -%}
                {%- endif -%}
                {%- if b.review_video_url != blank -%}
                  <video class="q-review-video-el" controls preload="metadata" style="border-radius: {{ slide_img_radius }}px; max-height: {{ slide_img_h_desktop }}px;">
                    <source src="{{ b.review_video_url }}" type="video/mp4">
                  </video>
                {%- endif -%}
              </div>

              <div class="q-review-card-body">
                <div class="q-review-stars" role="img" aria-label="{{ b.rating }} out of 5 stars">
                  {%- for i in (1..5) -%}
                    {%- if i <= b.rating -%}
                      <svg class="q-review-star q-star-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- else -%}
                      <svg class="q-review-star q-star-empty" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- endif -%}
                  {%- endfor -%}
                </div>

                {%- if b.review_text != blank -%}
                  <blockquote class="q-review-text"><p>"{{ b.review_text }}"</p></blockquote>
                {%- endif -%}

                <div class="q-reviewer-meta">
                  <div>
                    {%- if b.reviewer_name != blank -%}<p class="q-reviewer-name">{{ b.reviewer_name }}</p>{%- endif -%}
                    {%- if b.reviewer_location != blank -%}<p class="q-reviewer-location">{{ b.reviewer_location }}</p>{%- endif -%}
                    {%- if b.verified_purchase -%}
                      <span class="q-verified-badge">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        Verified Purchase
                      </span>
                    {%- endif -%}
                  </div>
                  {%- if b.review_date != blank -%}<p class="q-review-date">{{ b.review_date }}</p>{%- endif -%}
                </div>

                {%- if b.product != blank or b.product_name_override != blank -%}
                  <p class="q-product-name">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/><path d="M21 15l-5-5L5 21"/></svg>
                    {%- assign pname = b.product_name_override | default: b.product.title -%}
                    {%- if b.product != blank -%}
                      <a href="{{ b.product.url }}" aria-label="View {{ pname | escape }}">{{ pname }}</a>
                    {%- else -%}
                      {{ pname }}
                    {%- endif -%}
                  </p>
                {%- endif -%}
              </div>
            </article>
          {%- endfor -%}
        </div>
      {%- endif -%}

      {%- comment -%} MASONRY (no extra <header>) {%- endcomment -%}
      {%- if layout_mode == 'masonry' -%}
        <div class="q-reviews-masonry" data-reviews-masonry>
          {%- for block in section.blocks -%}
            {%- assign b = block.settings -%}
            <article class="q-review-card q-review-card--masonry" {{ block.shopify_attributes }}>
              {%- if b.review_image != blank -%}
                <div class="q-masonry-media q-review-media">
                  {%- assign media_tag = b.review_image | image_url: width: 900 | image_tag:
                    class: 'q-review-img',
                    alt: 'Review image',
                    loading: 'lazy'
                  -%}
                  {%- if b.product != blank -%}
                    <a href="{{ b.product.url }}" aria-label="View {{ b.product.title }}">{{ media_tag }}</a>
                  {%- else -%}
                    {{ media_tag }}
                  {%- endif -%}
                </div>
              {%- endif -%}

              <div class="q-masonry-header" role="group" aria-label="Review rating">
                <div class="q-review-stars" role="img" aria-label="{{ b.rating }} out of 5 stars">
                  {%- for i in (1..5) -%}
                    {%- if i <= b.rating -%}
                      <svg class="q-review-star q-star-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- else -%}
                      <svg class="q-review-star q-star-empty" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
              </div>

              {%- if b.review_text != blank -%}
                <blockquote class="q-review-text q-masonry-text"><p>"{{ b.review_text }}"</p></blockquote>
              {%- endif -%}

              <footer class="q-masonry-footer">
                <div class="q-reviewer-row">
                  {%- if b.reviewer_image != blank -%}
                    {{ b.reviewer_image | image_url: width: 96 | image_tag:
                      class: 'q-reviewer-avatar',
                      alt: b.reviewer_name | append: ' photo',
                      loading: 'lazy'
                    }}
                  {%- endif -%}
                  <div class="q-reviewer-col">
                    {%- if b.reviewer_name != blank -%}<p class="q-reviewer-name">{{ b.reviewer_name }}</p>{%- endif -%}
                    {%- if b.reviewer_location != blank -%}<p class="q-reviewer-location">{{ b.reviewer_location }}</p>{%- endif -%}
                    {%- if b.verified_purchase -%}
                      <span class="q-verified-badge">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        Verified Purchase
                      </span>
                    {%- endif -%}
                  </div>
                  {%- if b.review_date != blank -%}<p class="q-review-date">{{ b.review_date }}</p>{%- endif -%}
                </div>

                {%- if b.product != blank or b.product_name_override != blank -%}
                  <p class="q-product-name">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/><path d="M21 15l-5-5L5 21"/></svg>
                    {%- assign pname = b.product_name_override | default: b.product.title -%}
                    {%- if b.product != blank -%}
                      <a href="{{ b.product.url }}" aria-label="View {{ pname | escape }}">{{ pname }}</a>
                    {%- else -%}
                      {{ pname }}
                    {%- endif -%}
                  </p>
                {%- endif -%}
              </footer>
            </article>
          {%- endfor -%}
        </div>
      {%- endif -%}

      {%- comment -%} NEW: CAROUSEL / FILMSTRIP {%- endcomment -%}
      {%- if layout_mode == 'carousel' -%}
        <div class="q-reviews-carousel" role="list">
          {%- for block in section.blocks -%}
            {%- assign b = block.settings -%}
            <article class="q-review-card q-review-card--carousel" role="listitem" {{ block.shopify_attributes }}>
              <div class="q-carousel-media q-review-media">
                {%- if b.review_image != blank -%}
                  {%- assign media_tag = b.review_image | image_url: width: 1200 | image_tag:
                    class: 'q-review-img',
                    alt: 'Review image',
                    loading: 'lazy'
                  -%}
                  {%- if b.product != blank -%}
                    <a href="{{ b.product.url }}" aria-label="View {{ b.product.title }}">{{ media_tag }}</a>
                  {%- else -%}
                    {{ media_tag }}
                  {%- endif -%}
                {%- endif -%}
              </div>
              <div class="q-carousel-body">
                <div class="q-review-stars" role="img" aria-label="{{ b.rating }} out of 5 stars">
                  {%- for i in (1..5) -%}
                    {%- if i <= b.rating -%}
                      <svg class="q-review-star q-star-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- else -%}
                      <svg class="q-review-star q-star-empty" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
                {%- if b.review_text != blank -%}
                  <blockquote class="q-review-text"><p>"{{ b.review_text }}"</p></blockquote>
                {%- endif -%}
                <div class="q-reviewer-meta">
                  {%- if b.reviewer_name != blank -%}<p class="q-reviewer-name">{{ b.reviewer_name }}</p>{%- endif -%}
                  {%- if b.review_date != blank -%}<p class="q-review-date">{{ b.review_date }}</p>{%- endif -%}
                </div>
                {%- if b.product != blank or b.product_name_override != blank -%}
                  <p class="q-product-name">
                    {%- assign pname = b.product_name_override | default: b.product.title -%}
                    {%- if b.product != blank -%}
                      <a href="{{ b.product.url }}" aria-label="View {{ pname | escape }}">{{ pname }}</a>
                    {%- else -%}
                      {{ pname }}
                    {%- endif -%}
                  </p>
                {%- endif -%}
              </div>
            </article>
          {%- endfor -%}
        </div>
      {%- endif -%}

      {%- comment -%} CTA Buttons {% endcomment -%}
      {%- if s.cta_text != blank or s.cta2_text != blank -%}
        <div class="q-cta-actions q-text-{{ actions_align }}">
          {%- if s.cta_text != blank -%}
            <a 
              href="{{ s.cta_link | default: '#' }}" 
              class="q-btn {{ btn_mode_class }}"
              aria-label="{{ s.cta_aria_label | default: s.cta_text | escape }}"
            >{{ s.cta_text }}</a>
          {%- endif -%}
          {%- if s.cta2_text != blank -%}
            <a 
              href="{{ s.cta2_link | default: '#' }}" 
              class="q-btn {{ btn_mode_class }}"
              aria-label="{{ s.cta2_aria_label | default: s.cta2_text | escape }}"
            >{{ s.cta2_text }}</a>
          {%- endif -%}
        </div>
      {%- endif -%}

    {%- else -%}
      <div class="q-empty-state">
        <p>Add review blocks to display customer testimonials.</p>
      </div>
    {%- endif -%}
  </div>

  {%- if s.enable_schema -%}
    <script type="application/ld+json">
      {
        "@context":"https://schema.org",
        "@type":"ItemList",
        "itemListElement":[
          {%- for block in section.blocks -%}
            {%- assign b = block.settings -%}
            {%- assign pname = b.product_name_override | default: b.product.title -%}
            {
              "@type":"Review",
              "reviewRating":{"@type":"Rating","ratingValue":"{{ b.rating }}","bestRating":"5"},
              "author":{"@type":"Person","name":"{{ b.reviewer_name | escape }}"},
              "reviewBody":{{ b.review_text | json }},
              {% if b.product != blank %}
              "itemReviewed":{"@type":"Product","name":{{ pname | json }},"url":"{{ b.product.url }}"},
              {% endif %}
              "datePublished":{{ b.review_date | json }}
            }{% unless forloop.last %},{% endunless %}
          {%- endfor -%}
        ]
      }
    </script>
  {%- endif -%}
</section>

{%- if layout_mode == 'slideshow' and section.blocks.size > 1 -%}
<script>
(function() {
  function initReviewSlideshow(section) {
    const container = section.querySelector('[data-reviews-slideshow]');
    if (!container || container.dataset.init === '1') return;

    const track   = container.querySelector('[data-reviews-track]');
    const slides  = Array.from(track.querySelectorAll('[data-review-slide]'));
    const dots    = Array.from(container.querySelectorAll('[data-reviews-dot]'));
    const prevBtn = container.querySelector('[data-reviews-prev]');
    const nextBtn = container.querySelector('[data-reviews-next]');

    if (slides.length <= 1) return;

    container.dataset.init = '1';
    let currentIndex = 0;
    let autoplayTimer = null;
    const autoplay = container.dataset.autoplay === 'true';
    const interval = parseInt(container.dataset.interval || '5', 10) * 1000;

    function normalize() {
      const w = container.clientWidth;
      slides.forEach((s) => {
        s.style.width = w + 'px';
        s.style.minWidth = w + 'px';
        s.style.maxWidth = w + 'px';
      });
      const h = slides.reduce((m, s) => Math.max(m, s.offsetHeight), 0);
      track.style.height = h + 'px';
      setTransform();
    }

    function setTransform() {
      const w = container.clientWidth;
      track.style.transform = 'translateX(' + (-currentIndex * w) + 'px)';
      track.style.transition = 'transform 400ms ease';
    }

    function goToSlide(index) {
      const total = slides.length;
      currentIndex = ((index % total) + total) % total;
      setTransform();

      slides.forEach((slide, i) => {
        slide.classList.toggle('is-active', i === currentIndex);
        slide.setAttribute('aria-hidden', i === currentIndex ? 'false' : 'true');
      });

      dots.forEach((dot, i) => {
        if (i === currentIndex) { dot.setAttribute('aria-current', 'true'); }
        else { dot.removeAttribute('aria-current'); }
      });
    }

    function nextSlide() { goToSlide(currentIndex + 1); }
    function prevSlide() { goToSlide(currentIndex - 1); }

    function startAutoplay() { if (autoplay && slides.length > 1) { autoplayTimer = setInterval(nextSlide, interval); } }
    function stopAutoplay()  { if (autoplayTimer) { clearInterval(autoplayTimer); autoplayTimer = null; } }

    if (prevBtn) prevBtn.addEventListener('click', () => { stopAutoplay(); prevSlide(); });
    if (nextBtn) nextBtn.addEventListener('click', () => { stopAutoplay(); nextSlide(); });
    dots.forEach((dot, index) => { dot.addEventListener('click', () => { stopAutoplay(); goToSlide(index); }); });

    container.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') { stopAutoplay(); prevSlide(); }
      else if (e.key === 'ArrowRight') { stopAutoplay(); nextSlide(); }
    });
    container.addEventListener('mouseenter', stopAutoplay);
    container.addEventListener('focusin', stopAutoplay);
    container.addEventListener('mouseleave', startAutoplay);
    container.addEventListener('focusout', startAutoplay);
    window.addEventListener('resize', normalize, { passive: true });

    normalize();
    startAutoplay();
    goToSlide(0);
  }

  function init() {
    document.querySelectorAll('.q-cta-reviews').forEach(initReviewSlideshow);
  }

  if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', init); }
  else { init(); }

  document.addEventListener('shopify:section:load', (e) => {
    const section = e.target.querySelector('.q-cta-reviews') || e.target;
    if (section.classList.contains('q-cta-reviews')) { initReviewSlideshow(section); }
  });
})();
</script>
{%- endif -%}

{% schema %}
{
  "name": "CTA - Reviews",
  "tag": "section",
  "class": "q-cta-reviews-section",
  "settings": [
    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "layout_mode",
      "label": "Layout mode",
      "default": "slideshow",
      "options": [
        { "value": "slideshow", "label": "Slideshow" },
        { "value": "grid", "label": "Grid" },
        { "value": "masonry", "label": "Masonry" },
        { "value": "carousel", "label": "Carousel (filmstrip)" }
      ]
    },
    { "type": "text", "id": "aria_label", "label": "ARIA label", "default": "Customer reviews" },
    { "type": "text", "id": "container_width", "label": "Container max width", "default": "1200px" },

    { "type": "range", "id": "padding_top", "label": "Padding top", "min": 0, "max": 200, "step": 10, "default": 60, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 200, "step": 10, "default": 60, "unit": "px" },
    { "type": "range", "id": "margin_top", "label": "Margin top", "min": 0, "max": 100, "step": 10, "default": 0, "unit": "px" },
    { "type": "range", "id": "margin_bottom", "label": "Margin bottom", "min": 0, "max": 100, "step": 10, "default": 0, "unit": "px" },

    { "type": "header", "content": "Background" },
    { "type": "color", "id": "background_color", "label": "Background color", "default": "#ffffff" },
    { "type": "image_picker", "id": "background_image", "label": "Background image" },
    { "type": "text", "id": "background_video", "label": "Background video URL (MP4)" },

    { "type": "header", "content": "Overlay" },
    {
      "type": "select", "id": "overlay_type", "label": "Overlay type", "default": "solid",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "gradient", "label": "Gradient" }
      ]
    },
    { "type": "color", "id": "overlay_color", "label": "Overlay color", "default": "#000000" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay opacity", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "%" },
    { "type": "color", "id": "grad_start", "label": "Gradient start", "default": "#000000" },
    { "type": "range", "id": "grad_start_opacity", "label": "Start opacity", "min": 0, "max": 100, "step": 5, "default": 40, "unit": "%" },
    { "type": "color", "id": "grad_end", "label": "Gradient end", "default": "#000000" },
    { "type": "range", "id": "grad_end_opacity", "label": "End opacity", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "%" },
    { "type": "range", "id": "grad_angle", "label": "Gradient angle", "min": 0, "max": 360, "step": 15, "default": 180, "unit": "deg" },

    { "type": "header", "content": "Content" },
    { "type": "text", "id": "kicker", "label": "Kicker text", "default": "Customer Reviews" },
    { "type": "color", "id": "kicker_color", "label": "Kicker color", "default": "#2563eb" },
    { "type": "text", "id": "kicker_size", "label": "Kicker size", "default": "0.875rem" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "What our customers say" },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#111111" },
    { "type": "text", "id": "heading_size_mobile", "label": "Heading size (mobile)", "default": "2rem" },
    { "type": "text", "id": "heading_size_desktop", "label": "Heading size (desktop)", "default": "3rem" },
    { "type": "textarea", "id": "description", "label": "Description", "default": "Read authentic reviews from our satisfied customers." },
    { "type": "color", "id": "description_color", "label": "Description color", "default": "#6b7280" },
    { "type": "text", "id": "description_size", "label": "Description size", "default": "1.125rem" },

    { "type": "header", "content": "Alignment" },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Default text alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Inherit from default" },
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "description_alignment",
      "label": "Description alignment",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Inherit from heading" },
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "actions_alignment",
      "label": "Buttons alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },

    { "type": "header", "content": "Media (Slideshow & Carousel)" },
    {
      "type": "select",
      "id": "media_object_fit",
      "label": "Image fit",
      "default": "cover",
      "options": [
        { "value": "cover", "label": "Cover (crop)" },
        { "value": "contain", "label": "Contain (letterbox)" },
        { "value": "fill", "label": "Fill" },
        { "value": "scale-down", "label": "Scale down" }
      ]
    },
    {
      "type": "select",
      "id": "slide_image_aspect",
      "label": "Image aspect ratio",
      "default": "auto",
      "options": [
        { "value": "auto", "label": "Natural" },
        { "value": "1/1", "label": "Square 1:1" },
        { "value": "4/5", "label": "Portrait 4:5" },
        { "value": "3/4", "label": "Portrait 3:4" },
        { "value": "4/3", "label": "Landscape 4:3" },
        { "value": "16/9", "label": "Wide 16:9" }
      ]
    },
    { "type": "range", "id": "slide_image_height_mobile", "label": "Image height (mobile)", "min": 120, "max": 600, "step": 10, "default": 240, "unit": "px" },
    { "type": "range", "id": "slide_image_height_desktop", "label": "Image height (desktop)", "min": 160, "max": 800, "step": 10, "default": 360, "unit": "px" },
    { "type": "range", "id": "slide_image_radius", "label": "Image corner radius", "min": 0, "max": 40, "step": 1, "default": 12, "unit": "px" },

    { "type": "header", "content": "Slideshow Settings" },
    { "type": "checkbox", "id": "autoplay", "label": "Auto-rotate slides", "default": true },
    { "type": "range", "id": "autoplay_interval", "label": "Time between slides", "min": 3, "max": 12, "step": 1, "default": 5, "unit": "s" },
    { "type": "checkbox", "id": "show_arrows", "label": "Show navigation arrows", "default": true },
    { "type": "checkbox", "id": "show_dots", "label": "Show navigation dots", "default": true },

    { "type": "header", "content": "Grid Settings" },
    { "type": "range", "id": "grid_columns_mobile", "label": "Columns (mobile)", "min": 1, "max": 3, "step": 1, "default": 1 },
    { "type": "range", "id": "grid_columns_tablet", "label": "Columns (tablet)", "min": 1, "max": 3, "step": 1, "default": 2 },
    { "type": "range", "id": "grid_columns_desktop", "label": "Columns (desktop)", "min": 1, "max": 4, "step": 1, "default": 3 },

    { "type": "header", "content": "Review Styling" },
    { "type": "color", "id": "star_color", "label": "Star rating color", "default": "#fbbf24" },
    { "type": "color", "id": "review_text_color", "label": "Review text color", "default": "#111111" },
    { "type": "text", "id": "review_text_size", "label": "Review text size", "default": "1rem" },
    { "type": "color", "id": "reviewer_name_color", "label": "Reviewer name color", "default": "#111111" },
    { "type": "text", "id": "reviewer_name_size", "label": "Reviewer name size", "default": "1rem" },
    { "type": "color", "id": "product_name_color", "label": "Product name color", "default": "#6b7280" },
    { "type": "text", "id": "product_name_size", "label": "Product name size", "default": "0.875rem" },
    { "type": "color", "id": "link_color", "label": "Link color", "default": "#2563eb" },

    { "type": "header", "content": "Buttons" },
    {
      "type": "select",
      "id": "button_mode",
      "label": "Button style",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Inherit from theme" },
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" }
      ]
    },
    { "type": "color", "id": "button_bg_color", "label": "Button background", "default": "#2563eb" },
    { "type": "color", "id": "button_text_color", "label": "Button text color", "default": "#ffffff" },
    { "type": "color", "id": "button_border_color", "label": "Button border color", "default": "#2563eb" },
    { "type": "range", "id": "button_border_width", "label": "Button border width", "min": 0, "max": 6, "step": 1, "default": 1, "unit": "px" },
    { "type": "range", "id": "button_radius", "label": "Button border radius", "min": 0, "max": 50, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "button_padding_vertical", "label": "Button padding (vertical)", "min": 6, "max": 24, "step": 1, "default": 12, "unit": "px" },
    { "type": "range", "id": "button_padding_horizontal", "label": "Button padding (horizontal)", "min": 12, "max": 48, "step": 2, "default": 24, "unit": "px" },

    { "type": "header", "content": "Call to Action" },
    { "type": "text", "id": "cta_text", "label": "Primary CTA text", "default": "View All Reviews" },
    { "type": "url", "id": "cta_link", "label": "Primary CTA link" },
    { "type": "text", "id": "cta_aria_label", "label": "Primary CTA aria-label" },
    { "type": "text", "id": "cta2_text", "label": "Secondary CTA text" },
    { "type": "url", "id": "cta2_link", "label": "Secondary CTA link" },
    { "type": "text", "id": "cta2_aria_label", "label": "Secondary CTA aria-label" },

    { "type": "header", "content": "Review App Integration" },
    {
      "type": "select",
      "id": "review_app_integration",
      "label": "Review app",
      "default": "none",
      "info": "Enable integration with popular review apps",
      "options": [
        { "value": "none", "label": "None (manual blocks)" },
        { "value": "judgeme", "label": "Judge.me" },
        { "value": "loox", "label": "Loox" },
        { "value": "yotpo", "label": "Yotpo" },
        { "value": "stamped", "label": "Stamped.io" }
      ]
    },

    { "type": "header", "content": "SEO & Accessibility" },
    { "type": "text", "id": "anchor_id", "label": "Section anchor ID (optional)" },
    { "type": "checkbox", "id": "enable_schema", "label": "Enable Review schema markup", "default": true, "info": "Adds structured data for SEO" }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Customer Review",
      "settings": [
        { "type": "header", "content": "Reviewer Information" },
        { "type": "image_picker", "id": "reviewer_image", "label": "Reviewer photo" },
        { "type": "text", "id": "reviewer_name", "label": "Reviewer name", "default": "Sarah Johnson" },
        { "type": "text", "id": "reviewer_location", "label": "Reviewer location (optional)", "default": "New York, NY" },
        { "type": "checkbox", "id": "verified_purchase", "label": "Verified purchase badge", "default": true },

        { "type": "header", "content": "Review Content" },
        { "type": "range", "id": "rating", "label": "Star rating", "min": 1, "max": 5, "step": 1, "default": 5 },
        { "type": "textarea", "id": "review_text", "label": "Review text", "default": "Absolutely love this product! The quality exceeded my expectations and customer service was excellent." },
        { "type": "text", "id": "review_date", "label": "Review date", "default": "January 15, 2025" },

        { "type": "header", "content": "Product Information" },
        { "type": "product", "id": "product", "label": "Reviewed product (optional)" },
        { "type": "text", "id": "product_name_override", "label": "Product name override", "info": "Leave blank to use product title" },

        { "type": "header", "content": "Review Media" },
        { "type": "image_picker", "id": "review_image", "label": "Review image (optional)" },
        { "type": "text", "id": "review_video_url", "label": "Review video URL (optional)" }
      ]
    }
  ],
  "presets": [
    {
      "name": "CTA - Review Slideshow",
      "category": "Call To Action",
      "settings": {
        "layout_mode": "slideshow",
        "heading": "What our customers say",
        "description": "Don't just take our word for it — hear from our satisfied customers."
      },
      "blocks": [
        { "type": "review", "settings": { "reviewer_name": "Emma Rodriguez", "reviewer_location": "Los Angeles, CA", "rating": 5, "review_text": "This product completely transformed my routine. Visible results in just two weeks!", "review_date": "January 10, 2025" } },
        { "type": "review", "settings": { "reviewer_name": "Michael Chen", "reviewer_location": "San Francisco, CA", "rating": 5, "review_text": "Outstanding quality and fast shipping. Support was incredibly helpful.", "review_date": "January 8, 2025" } },
        { "type": "review", "settings": { "reviewer_name": "Sophia Williams", "reviewer_location": "Chicago, IL", "rating": 4, "review_text": "Exactly as described. Would definitely recommend to friends.", "review_date": "January 5, 2025" } }
      ]
    },
    {
      "name": "CTA - Review Grid",
      "category": "Call To Action",
      "settings": {
        "layout_mode": "grid",
        "heading": "Customer testimonials",
        "description": "Trusted by thousands of satisfied customers worldwide.",
        "grid_columns_mobile": 1,
        "grid_columns_tablet": 2,
        "grid_columns_desktop": 3
      },
      "blocks": [
        { "type": "review", "settings": { "reviewer_name": "Jessica Martinez", "rating": 5, "review_text": "Amazing product! Highly recommend." } },
        { "type": "review", "settings": { "reviewer_name": "David Kim", "rating": 5, "review_text": "Best purchase I've made this year. Worth every penny." } },
        { "type": "review", "settings": { "reviewer_name": "Amanda Foster", "rating": 5, "review_text": "Exceptional quality and excellent support." } }
      ]
    },
    {
      "name": "CTA - Review Masonry",
      "category": "Call To Action",
      "settings": {
        "layout_mode": "masonry",
        "heading": "Real stories, real results",
        "description": "See what our community has to say about their experience."
      },
      "blocks": [
        { "type": "review", "settings": { "reviewer_name": "Lauren Anderson", "rating": 5, "review_text": "Exceeded my expectations. The results speak for themselves!" } },
        { "type": "review", "settings": { "reviewer_name": "Ryan Thompson", "rating": 4, "review_text": "Great quality. Fast delivery and excellent packaging." } },
        { "type": "review", "settings": { "reviewer_name": "Olivia Brown", "rating": 5, "review_text": "Absolutely love it! Will be ordering again." } }
      ]
    },
    {
      "name": "CTA - Review Carousel",
      "category": "Call To Action",
      "settings": {
        "layout_mode": "carousel",
        "heading": "Loved by our customers",
        "description": "Swipe through real photos and reviews."
      }
    }
  ]
}
{% endschema %}
