{% comment %}
  Quadratum — Form: Bulk order / PO request (Section)
  File: sections/form-bulk-order-request.liquid

  - Uses Quadratum frontend-form-logic.js contract:
      .q-form, [data-q-field], .q-error, .q-live, wrapper [data-q-form-wrap="1"]
  - Submission modes:
      shopify_contact  (Shopify built-in contact form)
      external_post    (POST to external endpoint)
      global_default   (decide from theme settings.forms_backend)
  - Captcha:
      settings.forms_captcha_provider
      settings.captcha_turnstile_site_key / settings.captcha_recaptcha_site_key
{% endcomment %}

{{ 'forms-sections.css' | asset_url | stylesheet_tag }}

{%- assign s = section.settings -%}
{%- assign g = settings -%}

{%- if s.enable_section -%}

  {%- comment -%} Captcha (provider-aware; safe defaults) {%- endcomment -%}
  {%- assign eff_captcha_mode = g.forms_captcha_provider | default: 'none' -%}
  {%- assign eff_captcha_key = '' -%}
  {%- if eff_captcha_mode == 'turnstile' -%}
    {%- assign eff_captcha_key = g.captcha_turnstile_site_key | default: '' -%}
  {%- elsif eff_captcha_mode == 'recaptcha_v3' -%}
    {%- assign eff_captcha_key = g.captcha_recaptcha_site_key | default: '' -%}
  {%- endif -%}

  {%- comment -%} Button variant: global default -> q-btn class {%- endcomment -%}
  {%- assign btn_variant = g.button_variant_default | default: 'solid' -%}
  {%- assign btn_class = 'q-btn--solid' -%}
  {%- case btn_variant -%}
    {%- when 'outline' -%}{%- assign btn_class = 'q-btn--outline' -%}
    {%- when 'ghost' -%}{%- assign btn_class = 'q-btn--ghost' -%}
    {%- else -%}{%- assign btn_class = 'q-btn--solid' -%}
  {%- endcase -%}

  {%- comment -%} Tags {%- endcomment -%}
  {%- assign tags_theme   = g.forms_default_tags | default: 'form, web' -%}
  {%- assign tags_section = s.hidden_tags | default: '' -%}
  {%- assign tags_value = tags_theme -%}
  {%- if tags_section != blank -%}
    {%- assign tags_value = tags_value | append: ', ' | append: tags_section -%}
  {%- endif -%}

  {%- comment -%} Mode resolution {%- endcomment -%}
  {%- assign mode = s.form_mode | default: 'shopify_contact' -%}
  {%- assign use_shopify = false -%}

  {%- if mode == 'shopify_contact' -%}
    {%- assign use_shopify = true -%}
  {%- elsif mode == 'global_default' -%}
    {%- if g.forms_backend == 'shopify' -%}
      {%- assign use_shopify = true -%}
    {%- endif -%}
  {%- endif -%}

  {%- assign external_action = '' -%}
  {%- if use_shopify == false -%}
    {%- if mode == 'external_post' -%}
      {%- assign external_action = s.external_action_url | default: '' -%}
    {%- else -%}
      {%- assign external_action = g.forms_global_endpoint | default: '' -%}
      {%- if external_action == blank or external_action == 'none' -%}
        {%- assign external_action = g.proxy_forms_endpoint | default: '' -%}
      {%- endif -%}
    {%- endif -%}

    {%- if external_action == blank or external_action == 'none' -%}
      {%- assign external_action = routes.root_url | append: 'contact' -%}
    {%- endif -%}
  {%- endif -%}

  {%- assign form_id = 'BulkOrderForm-' | append: section.id -%}

<section
  class="q-section q-section--bg-{{ s.background_style }} q-form-section q-form-section--bulk-order"
  aria-label="{{ s.aria_label | escape }}"
>
  <div class="q-section__inner q-section__inner--{{ s.max_width }} q-form-section__inner q-form-section__inner--{{ s.layout_variant }}">

    {%- if s.show_divider -%}
      <div class="q-section__divider"></div>
    {%- endif -%}

    <div class="q-form-section__content q-stack q-stack--gap-md">
      {%- if s.kicker != blank -%}<p class="q-kicker">{{ s.kicker | escape }}</p>{%- endif -%}
      {%- if s.heading != blank -%}<h2 class="q-heading q-heading--section">{{ s.heading | escape }}</h2>{%- endif -%}
      {%- if s.body != blank -%}
        <div class="q-text q-text--muted">
          {{ s.body }}
        </div>
      {%- endif -%}
    </div>

    <div
      class="q-form-section__form"
      data-q-form-wrap="1"
      data-q-attrib-create="1"
      data-captcha="{{ eff_captcha_mode | escape }}"
      data-captcha-key="{{ eff_captcha_key | escape }}"
      data-msg-error="Please fix the highlighted fields and try again."
    >
      <div class="q-live" aria-live="polite"></div>

      <div class="q-card q-card--form q-bulk-order-card">

        {%- if use_shopify -%}
          {%- comment -%}
            IMPORTANT: first arg MUST be a valid Shopify form type (e.g. 'contact').
            Never pass section.id as the first arg.
          {%- endcomment -%}

          {% form 'contact', id: form_id, class: 'q-form q-form--bulk-order', novalidate: 'novalidate' %}

            <input type="hidden" name="contact[tags]" value="{{ tags_value | escape }}">
            <input type="hidden" name="contact[source]" value="{{ s.hidden_source | escape }}">
            <input type="hidden" name="contact[form_kind]" value="bulk_order_request">
            {%- if s.target_email != blank -%}
              <input type="hidden" name="contact[target_email]" value="{{ s.target_email | escape }}">
            {%- endif -%}

            {%- if form.posted_successfully? -%}
              {%- if s.success_mode == 'inline_message' -%}
                <div class="q-card q-card--success" data-q-success="1">
                  <h3 class="q-heading q-heading--sm">{{ s.success_heading | escape }}</h3>
                  <div class="q-text q-text--muted">{{ s.success_body }}</div>
                </div>
              {%- endif -%}
              {%- if s.success_mode == 'redirect' and s.success_redirect_url != blank -%}
                <script>window.location.href = {{ s.success_redirect_url | json }};</script>
              {%- endif -%}
            {%- endif -%}

            {%- if form.errors -%}
              <div class="q-card q-card--error">
                <div class="q-text">{{ form.errors | default_errors }}</div>
              </div>
            {%- endif -%}

            <div class="q-bulk-order__grid" data-q-grid="1">
              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-company">{{ s.company_label | escape }}</label>
                <input id="bo-{{ section.id }}-company" class="q-input__control" type="text" name="contact[company]" autocomplete="organization" placeholder="{{ s.company_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-company-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-name">{{ s.contact_name_label | escape }}</label>
                <input id="bo-{{ section.id }}-name" class="q-input__control" type="text" name="contact[name]" autocomplete="name" placeholder="{{ s.contact_name_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-name-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-email">{{ s.email_label | escape }}</label>
                <input id="bo-{{ section.id }}-email" class="q-input__control" type="email" name="contact[email]" autocomplete="email" placeholder="{{ s.email_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-email-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-phone">{{ s.phone_label | escape }}</label>
                <input id="bo-{{ section.id }}-phone" class="q-input__control" type="tel" name="contact[phone]" autocomplete="tel" placeholder="{{ s.phone_placeholder | escape }}">
                <div id="bo-{{ section.id }}-phone-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input q-bulk-order__span2" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-products">{{ s.products_label | escape }}</label>
                <textarea id="bo-{{ section.id }}-products" class="q-input__control" name="contact[products]" rows="4" placeholder="{{ s.products_placeholder | escape }}"></textarea>
                <div class="q-input__hint">{{ s.products_hint | escape }}</div>
                <div id="bo-{{ section.id }}-products-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-qty">{{ s.quantity_label | escape }}</label>
                <input id="bo-{{ section.id }}-qty" class="q-input__control" type="text" name="contact[quantity]" inputmode="numeric" placeholder="{{ s.quantity_placeholder | escape }}">
                <div class="q-input__hint">{{ s.quantity_hint | escape }} {{ s.min_quantity_hint | escape }}</div>
                <div id="bo-{{ section.id }}-qty-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-date">{{ s.delivery_date_label | escape }}</label>
                <input id="bo-{{ section.id }}-date" class="q-input__control" type="date" name="contact[delivery_date]">
                <div class="q-input__hint">{{ s.delivery_date_hint | escape }}</div>
                <div id="bo-{{ section.id }}-date-err" class="q-error" aria-live="polite"></div>
              </div>

              {%- if s.show_po_toggle -%}
                <div class="q-input q-bulk-order__span2" data-q-field>
                  <label class="q-check">
                    <input id="bo-{{ section.id }}-haspo" type="checkbox" name="contact[has_po]">
                    <span class="q-check__label">{{ s.po_toggle_label | escape }}</span>
                  </label>
                </div>

                <div class="q-input q-bulk-order__span2 is-hidden" data-q-field data-cond="1" data-cond-field="contact[has_po]" data-cond-operator="checked" data-cond-value="on">
                  <label class="q-input__label" for="bo-{{ section.id }}-ponum">{{ s.po_number_label | escape }}</label>
                  <input id="bo-{{ section.id }}-ponum" class="q-input__control" type="text" name="contact[po_number]" placeholder="{{ s.po_number_placeholder | escape }}">
                  <div id="bo-{{ section.id }}-ponum-err" class="q-error" aria-live="polite"></div>
                </div>
              {%- endif -%}

              <div class="q-input q-bulk-order__span2" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-body">{{ s.notes_label | escape }}</label>
                <textarea id="bo-{{ section.id }}-body" class="q-input__control" name="contact[body]" rows="4" placeholder="{{ s.notes_placeholder | escape }}"></textarea>
                <div id="bo-{{ section.id }}-body-err" class="q-error" aria-live="polite"></div>
              </div>

              {%- for block in section.blocks -%}
                {%- if block.type == 'custom_field' -%}
                  {%- assign b = block.settings -%}
                  {%- assign col_class = 'q-bulk-order__span2' -%}
                  {%- if b.width == 'half' -%}{%- assign col_class = '' -%}{%- endif -%}
                  {%- assign field_key = b.name | default: 'custom_field' | strip | handleize -%}

                  <div class="q-input {{ col_class }}" data-q-field {% if b.required %}data-required="true"{% endif %} {{ block.shopify_attributes }}>
                    <label class="q-input__label" for="bo-{{ section.id }}-cf-{{ block.id }}">{{ b.label | escape }}</label>

                    {%- if b.field_type == 'textarea' -%}
                      <textarea id="bo-{{ section.id }}-cf-{{ block.id }}" class="q-input__control" name="contact[{{ field_key }}]" rows="3" placeholder="{{ b.placeholder | escape }}" {% if b.required %}required{% endif %}></textarea>
                    {%- else -%}
                      <input id="bo-{{ section.id }}-cf-{{ block.id }}" class="q-input__control" type="text" name="contact[{{ field_key }}]" placeholder="{{ b.placeholder | escape }}" {% if b.required %}required{% endif %}>
                    {%- endif -%}

                    <div id="bo-{{ section.id }}-cf-{{ block.id }}-err" class="q-error" aria-live="polite"></div>
                  </div>
                {%- endif -%}
              {%- endfor -%}
            </div>

            <div class="q-form__actions">
              <button type="submit" class="q-btn {{ btn_class }}">
                {{ s.submit_label | escape }}
              </button>
            </div>

          {% endform %}

        {%- else -%}
          <form id="{{ form_id }}" class="q-form q-form--bulk-order" method="post" action="{{ external_action }}" novalidate>
            <input type="hidden" name="tags" value="{{ tags_value | escape }}">
            <input type="hidden" name="source" value="{{ s.hidden_source | escape }}">
            <input type="hidden" name="form_kind" value="bulk_order_request">

            <input type="hidden" name="contact[tags]" value="{{ tags_value | escape }}">
            <input type="hidden" name="contact[source]" value="{{ s.hidden_source | escape }}">
            <input type="hidden" name="contact[form_kind]" value="bulk_order_request">

            {%- if s.target_email != blank -%}
              <input type="hidden" name="target_email" value="{{ s.target_email | escape }}">
              <input type="hidden" name="contact[target_email]" value="{{ s.target_email | escape }}">
            {%- endif -%}

            <div class="q-bulk-order__grid" data-q-grid="1">
              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-company">{{ s.company_label | escape }}</label>
                <input id="bo-{{ section.id }}-company" class="q-input__control" type="text" name="contact[company]" placeholder="{{ s.company_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-company-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-name">{{ s.contact_name_label | escape }}</label>
                <input id="bo-{{ section.id }}-name" class="q-input__control" type="text" name="contact[name]" placeholder="{{ s.contact_name_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-name-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field data-required="true">
                <label class="q-input__label" for="bo-{{ section.id }}-email">{{ s.email_label | escape }}</label>
                <input id="bo-{{ section.id }}-email" class="q-input__control" type="email" name="contact[email]" placeholder="{{ s.email_placeholder | escape }}" required>
                <div id="bo-{{ section.id }}-email-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-phone">{{ s.phone_label | escape }}</label>
                <input id="bo-{{ section.id }}-phone" class="q-input__control" type="tel" name="contact[phone]" placeholder="{{ s.phone_placeholder | escape }}">
                <div id="bo-{{ section.id }}-phone-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input q-bulk-order__span2" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-products">{{ s.products_label | escape }}</label>
                <textarea id="bo-{{ section.id }}-products" class="q-input__control" name="contact[products]" rows="4" placeholder="{{ s.products_placeholder | escape }}"></textarea>
                <div class="q-input__hint">{{ s.products_hint | escape }}</div>
                <div id="bo-{{ section.id }}-products-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-qty">{{ s.quantity_label | escape }}</label>
                <input id="bo-{{ section.id }}-qty" class="q-input__control" type="text" name="contact[quantity]" inputmode="numeric" placeholder="{{ s.quantity_placeholder | escape }}">
                <div class="q-input__hint">{{ s.quantity_hint | escape }} {{ s.min_quantity_hint | escape }}</div>
                <div id="bo-{{ section.id }}-qty-err" class="q-error" aria-live="polite"></div>
              </div>

              <div class="q-input" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-date">{{ s.delivery_date_label | escape }}</label>
                <input id="bo-{{ section.id }}-date" class="q-input__control" type="date" name="contact[delivery_date]">
                <div class="q-input__hint">{{ s.delivery_date_hint | escape }}</div>
                <div id="bo-{{ section.id }}-date-err" class="q-error" aria-live="polite"></div>
              </div>

              {%- if s.show_po_toggle -%}
                <div class="q-input q-bulk-order__span2" data-q-field>
                  <label class="q-check">
                    <input id="bo-{{ section.id }}-haspo" type="checkbox" name="contact[has_po]">
                    <span class="q-check__label">{{ s.po_toggle_label | escape }}</span>
                  </label>
                </div>

                <div class="q-input q-bulk-order__span2 is-hidden" data-q-field data-cond="1" data-cond-field="contact[has_po]" data-cond-operator="checked" data-cond-value="on">
                  <label class="q-input__label" for="bo-{{ section.id }}-ponum">{{ s.po_number_label | escape }}</label>
                  <input id="bo-{{ section.id }}-ponum" class="q-input__control" type="text" name="contact[po_number]" placeholder="{{ s.po_number_placeholder | escape }}">
                  <div id="bo-{{ section.id }}-ponum-err" class="q-error" aria-live="polite"></div>
                </div>
              {%- endif -%}

              <div class="q-input q-bulk-order__span2" data-q-field>
                <label class="q-input__label" for="bo-{{ section.id }}-body">{{ s.notes_label | escape }}</label>
                <textarea id="bo-{{ section.id }}-body" class="q-input__control" name="contact[body]" rows="4" placeholder="{{ s.notes_placeholder | escape }}"></textarea>
                <div id="bo-{{ section.id }}-body-err" class="q-error" aria-live="polite"></div>
              </div>

              {%- for block in section.blocks -%}
                {%- if block.type == 'custom_field' -%}
                  {%- assign b = block.settings -%}
                  {%- assign col_class = 'q-bulk-order__span2' -%}
                  {%- if b.width == 'half' -%}{%- assign col_class = '' -%}{%- endif -%}
                  {%- assign field_key = b.name | default: 'custom_field' | strip | handleize -%}

                  <div class="q-input {{ col_class }}" data-q-field {% if b.required %}data-required="true"{% endif %} {{ block.shopify_attributes }}>
                    <label class="q-input__label" for="bo-{{ section.id }}-cf-{{ block.id }}">{{ b.label | escape }}</label>

                    {%- if b.field_type == 'textarea' -%}
                      <textarea id="bo-{{ section.id }}-cf-{{ block.id }}" class="q-input__control" name="contact[{{ field_key }}]" rows="3" placeholder="{{ b.placeholder | escape }}" {% if b.required %}required{% endif %}></textarea>
                    {%- else -%}
                      <input id="bo-{{ section.id }}-cf-{{ block.id }}" class="q-input__control" type="text" name="contact[{{ field_key }}]" placeholder="{{ b.placeholder | escape }}" {% if b.required %}required{% endif %}>
                    {%- endif -%}

                    <div id="bo-{{ section.id }}-cf-{{ block.id }}-err" class="q-error" aria-live="polite"></div>
                  </div>
                {%- endif -%}
              {%- endfor -%}
            </div>

            <div class="q-form__actions">
              <button type="submit" class="q-btn {{ btn_class }}">
                {{ s.submit_label | escape }}
              </button>
            </div>
          </form>
        {%- endif -%}

      </div>
    </div>
  </div>

  <style>
    /* ---------------------------------------------
      Bulk Order — Cosmetic polish (Quote-form parity)
      Goals:
      - Card/surface looks intentional
      - Inputs only style text-like controls
      - Checkbox doesn’t inherit full-width input styling
      - Invalid outline only on control, not row wrapper
    ---------------------------------------------- */

    .q-form-section--bulk-order .q-form-section__inner {
      display: grid;
      gap: var(--q-space-xl, 28px);
      align-items: start;
    }

    /* Card surface */
    .q-form-section--bulk-order .q-bulk-order-card {
      padding: var(--q-space-xl, 28px);
      border-radius: var(--q-radius-lg, 16px);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 28px rgba(0,0,0,.08);
      background: var(--q-surface, #fff);
    }

    .q-form-section--bulk-order .q-bulk-order__grid {
      display: grid;
      gap: var(--q-space-md, 16px);
    }
    .q-form-section--bulk-order .q-bulk-order__span2 { grid-column: 1 / -1; }

    /* Hide conditional block default */
    .q-form-section--bulk-order .is-hidden { display: none !important; }

    /* Actions spacing */
    .q-form-section--bulk-order .q-form__actions {
      margin-top: var(--q-space-lg, 18px);
      display: flex;
      gap: var(--q-space-sm, 12px);
      align-items: center;
    }

    /* ---- Text-like controls ONLY ---- */
    .q-form-section--bulk-order input.q-input__control:not([type="checkbox"]):not([type="radio"]),
    .q-form-section--bulk-order textarea.q-input__control,
    .q-form-section--bulk-order select.q-input__control {
      width: 100%;
      border-radius: var(--q-input-radius, 10px);
      border: 1px solid rgba(0,0,0,.14);
      padding: .7rem .85rem;
      background: #fff;
      color: inherit;
      line-height: 1.3;
      transition: border-color .15s ease, box-shadow .15s ease;
    }

    .q-form-section--bulk-order input.q-input__control:not([type="checkbox"]):not([type="radio"]):focus,
    .q-form-section--bulk-order textarea.q-input__control:focus,
    .q-form-section--bulk-order select.q-input__control:focus {
      outline: none;
      border-color: rgba(0,0,0,.32);
      box-shadow: 0 0 0 3px rgba(0,0,0,.08);
    }

    /* ---- Checkbox polish (prevents "full-width checkbox" syndrome) ---- */
    .q-form-section--bulk-order .q-check {
      display: inline-flex;
      gap: .55rem;
      align-items: center;
      line-height: 1.2;
      user-select: none;
    }
    .q-form-section--bulk-order .q-check input[type="checkbox"],
    .q-form-section--bulk-order .q-check input[type="radio"] {
      width: auto !important;
      min-width: 1.05rem;
      max-width: 1.05rem;
      height: 1.05rem;
      margin: 0;
      padding: 0 !important;
      display: inline-block;
      vertical-align: middle;
      accent-color: currentColor;
    }

    /* ---- Invalid state: only outline the CONTROL (not the whole row) ---- */
    /* Defensive: if wrapper gets a class/attr, kill outlines there */
    .q-form-section--bulk-order .q-input.is-invalid,
    .q-form-section--bulk-order .q-input[aria-invalid="true"],
    .q-form-section--bulk-order [data-q-field].is-invalid {
      outline: none !important;
      box-shadow: none !important;
    }

    .q-form-section--bulk-order input.q-input__control[aria-invalid="true"]:not([type="checkbox"]):not([type="radio"]),
    .q-form-section--bulk-order textarea.q-input__control[aria-invalid="true"],
    .q-form-section--bulk-order select.q-input__control[aria-invalid="true"] {
      border-color: var(--q-error, #dc2626);
      box-shadow: 0 0 0 3px rgba(220,38,38,.15);
    }

    .q-form-section--bulk-order .q-check input[type="checkbox"][aria-invalid="true"],
    .q-form-section--bulk-order .q-check input[type="radio"][aria-invalid="true"] {
      outline: 2px solid var(--q-error, #dc2626);
      outline-offset: 2px;
    }

    .q-form-section--bulk-order .q-error { margin-top: .35rem; }

    @media (min-width: {{ g.bp_md | default: 768 }}px) {
      .q-form-section--bulk-order .q-bulk-order__grid { grid-template-columns: 1fr 1fr; }
      .q-form-section--bulk-order .q-form-section__inner--split { grid-template-columns: 1fr 1.2fr; }
      .q-form-section--bulk-order .q-form-section__inner--stack,
      .q-form-section--bulk-order .q-form-section__inner--wide  { grid-template-columns: 1fr; }
    }
  </style>
</section>

{%- endif -%}

{% schema %}
{
  "name": "3P - Bulk Order",
  "class": "q-section-wrap q-section-wrap--bulk-order",
  "settings": [
    { "type": "checkbox", "id": "enable_section", "label": "Enable section", "default": true },
    { "type": "text", "id": "aria_label", "label": "Section aria-label", "default": "Bulk order and purchase order request form" },

    { "type": "text", "id": "kicker", "label": "Kicker", "default": "Bulk & wholesale" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Request a bulk order quote" },
    {
      "type": "richtext",
      "id": "body",
      "label": "Description",
      "default": "<p>Tell us what you need and our team will prepare a custom quote for your bulk or purchase order request, including lead times and shipping options.</p>"
    },

    { "type": "select", "id": "layout_variant", "label": "Layout", "default": "split",
      "options": [
        { "value": "stack", "label": "Stack" },
        { "value": "split", "label": "Split" },
        { "value": "wide", "label": "Wide" }
      ]
    },
    { "type": "select", "id": "background_style", "label": "Background style", "default": "surface",
      "options": [
        { "value": "surface", "label": "Surface" },
        { "value": "contrast", "label": "Contrast" },
        { "value": "brand", "label": "Brand" }
      ]
    },
    { "type": "select", "id": "max_width", "label": "Max content width", "default": "lg",
      "options": [
        { "value": "sm", "label": "sm" },
        { "value": "md", "label": "md" },
        { "value": "lg", "label": "lg" }
      ]
    },
    { "type": "checkbox", "id": "show_divider", "label": "Show top divider", "default": false },

    { "type": "select", "id": "form_mode", "label": "Submission mode", "default": "shopify_contact",
      "options": [
        { "value": "shopify_contact", "label": "Shopify contact form" },
        { "value": "external_post", "label": "POST to external endpoint" },
        { "value": "global_default", "label": "Use global forms endpoint from Theme Settings" }
      ]
    },
    { "type": "text", "id": "external_action_url", "label": "External form action URL", "default": "https://example.com/api/forms/bulk-order" },
    { "type": "text", "id": "target_email", "label": "Notification email (optional)", "default": "sales@example.com" },
    { "type": "text", "id": "hidden_source", "label": "Hidden source tag", "default": "bulk_order_request" },
    { "type": "text", "id": "hidden_tags", "label": "Additional tags (comma-separated)", "default": "b2b,bulk,quote" },

    { "type": "select", "id": "success_mode", "label": "On successful submission", "default": "inline_message",
      "options": [
        { "value": "inline_message", "label": "Inline message" },
        { "value": "redirect", "label": "Redirect" }
      ]
    },
    { "type": "text", "id": "success_heading", "label": "Success heading", "default": "Request received" },
    {
      "type": "richtext",
      "id": "success_body",
      "label": "Success message",
      "default": "<p>Thank you for your request. A member of our sales team will contact you within one business day with next steps.</p>"
    },
    { "type": "url", "id": "success_redirect_url", "label": "Redirect URL (if chosen above)" },

    { "type": "text", "id": "submit_label", "label": "Submit button label", "default": "Submit bulk order request" },

    { "type": "checkbox", "id": "show_po_toggle", "label": "Show “I already have a PO #” toggle", "default": true },
    { "type": "text", "id": "po_toggle_label", "label": "PO toggle label", "default": "I already have a purchase order number" },
    { "type": "text", "id": "po_number_label", "label": "PO number label", "default": "Purchase order number" },
    { "type": "text", "id": "po_number_placeholder", "label": "PO number placeholder", "default": "e.g., PO-10294" },

    { "type": "text", "id": "min_quantity_hint", "label": "Minimum quantity hint", "default": "Minimum order quantities may apply depending on product and region." },

    { "type": "header", "content": "Field labels & placeholders" },
    { "type": "text", "id": "company_label", "label": "Company label", "default": "Company name" },
    { "type": "text", "id": "company_placeholder", "label": "Company placeholder", "default": "Your company" },

    { "type": "text", "id": "contact_name_label", "label": "Contact name label", "default": "Contact name" },
    { "type": "text", "id": "contact_name_placeholder", "label": "Contact name placeholder", "default": "Your name" },

    { "type": "text", "id": "email_label", "label": "Email label", "default": "Email" },
    { "type": "text", "id": "email_placeholder", "label": "Email placeholder", "default": "you@company.com" },

    { "type": "text", "id": "phone_label", "label": "Phone (optional)" },
    { "type": "text", "id": "phone_placeholder", "label": "(555) 555-5555" },

    { "type": "text", "id": "products_label", "label": "Products of interest" },
    { "type": "text", "id": "products_placeholder", "label": "Paste links, SKUs, or describe what you need…" },
    { "type": "text", "id": "products_hint", "label": "Link to product pages, collections, or describe SKUs here." },

    { "type": "text", "id": "quantity_label", "label": "Estimated quantity" },
    { "type": "text", "id": "quantity_placeholder", "label": "e.g., 50–100 units" },
    { "type": "text", "id": "quantity_hint", "label": "Approximate units or ranges are fine." },

    { "type": "text", "id": "delivery_date_label", "label": "Desired delivery date / deadline" },
    { "type": "text", "id": "delivery_date_hint", "label": "If you don’t have a firm date, give your best estimate." },

    { "type": "text", "id": "notes_label", "label": "Additional notes" },
    { "type": "text", "id": "notes_placeholder", "label": "Delivery instructions, special requirements, questions…" }
  ],
  "blocks": [
    {
      "type": "custom_field",
      "name": "Custom field",
      "settings": [
        { "type": "text", "id": "label", "label": "Label", "default": "Additional field" },
        { "type": "text", "id": "name", "label": "Field key (used in name=contact[...])", "default": "custom_field" },
        { "type": "text", "id": "placeholder", "label": "Placeholder", "default": "Enter value" },
        { "type": "select", "id": "field_type", "label": "Type", "default": "text",
          "options": [
            { "value": "text", "label": "Text" },
            { "value": "textarea", "label": "Textarea" }
          ]
        },
        { "type": "select", "id": "width", "label": "Width", "default": "full",
          "options": [
            { "value": "full", "label": "Full" },
            { "value": "half", "label": "Half" }
          ]
        },
        { "type": "checkbox", "id": "required", "label": "Required", "default": false }
      ]
    }
  ],
  "presets": [
    {
      "name": "3rd Party - Bulk Order Form",
      "category": "3rd Party Integrations",
      "blocks": []
    }
  ]
}
{% endschema %}
