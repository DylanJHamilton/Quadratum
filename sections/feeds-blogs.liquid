{% comment %}
  Quadratum — Feed · Blog List / Grid (Flagship Blog Index Feed)
  File: sections/feeds-blogs.liquid

  CRITICAL:
  • MUST use shared snippet: blog-card
  • One feed supports List / Grid / Masonry layouts
  • Progressive enhancement: initial render works without JS
  • Pagination is crawlable + server-side (Shopify paginate) where supported
  • "Load more" enhances on top of standard pagination (fallback preserved)

  IMPORTANT QUIRK (Shopify):
  • In some non-blog templates (ex: page.json), paginate chosen_blog.articles may return 0 items
    even when chosen_blog.articles_count > 0.
  • We detect that and gracefully fall back to a non-paginated render (still SEO-safe; just no paging).
{% endcomment %}

{%- liquid
  assign sid = section.id

  assign chosen_blog = section.settings.blog
  if chosen_blog == blank
    assign first_pair = blogs | first
    if first_pair != blank
      assign chosen_blog = first_pair[1]
    endif
  endif

  assign filter_tag_raw = section.settings.filter_tag | default: ''
  assign filter_tag = filter_tag_raw | strip

  assign per_page = section.settings.per_page | default: 12
  assign layout_mode = section.settings.layout_mode | default: 'list'

  assign cols_m = section.settings.cols_mobile | default: 1
  assign cols_t = section.settings.cols_tablet | default: 2
  assign cols_d = section.settings.cols_desktop | default: 3

  assign gap_token = section.settings.gap_token | default: 'md'
  assign pad_token = section.settings.pad_token | default: 'lg'

  assign excerpt_mode = section.settings.excerpt_mode | default: 'words'
  assign excerpt_len_words = section.settings.excerpt_words | default: 24
  assign excerpt_len_chars = section.settings.excerpt_chars | default: 160

  assign show_image = section.settings.show_image
  assign show_author = section.settings.show_author
  assign show_date = section.settings.show_date
  assign show_read_time = section.settings.show_read_time
  assign show_tags = section.settings.show_tags
  assign show_excerpt = section.settings.show_excerpt

  assign pagination_mode = section.settings.pagination_mode | default: 'standard'
  assign load_more_label = section.settings.load_more_label | default: 'Load more'
  assign cta_label = section.settings.cta_label | default: 'Read more'

  assign list_img_cap = section.settings.list_image_cap | default: 240

  assign on_tagged_page = false
  if filter_tag != blank and current_tags != blank and current_tags contains filter_tag
    assign on_tagged_page = true
  endif

  assign tagged_url = ''
  if filter_tag != blank and chosen_blog != blank
    assign tagged_url = chosen_blog.url | append: '/tagged/' | append: filter_tag | handleize
  endif

  comment
    Token -> CSS var mapping WITH FALLBACK LENGTHS.
    Critical fix: var(--q-gap-md) can be undefined in dev shells; use var(--q-gap-md, 28px).
  endcomment

  assign gap_var = 'var(--q-gap-md, 28px)'
  case gap_token
    when 'xs'
      assign gap_var = 'var(--q-gap-xs, 12px)'
    when 'sm'
      assign gap_var = 'var(--q-gap-sm, 18px)'
    when 'md'
      assign gap_var = 'var(--q-gap-md, 28px)'
    when 'lg'
      assign gap_var = 'var(--q-gap-lg, 36px)'
    when 'xl'
      assign gap_var = 'var(--q-gap-xl, 48px)'
  endcase

  assign pad_var = 'var(--q-gap-lg, 24px)'
  case pad_token
    when 'none'
      assign pad_var = '0px'
    when 'xs'
      assign pad_var = 'var(--q-gap-xs, 12px)'
    when 'sm'
      assign pad_var = 'var(--q-gap-sm, 16px)'
    when 'md'
      assign pad_var = 'var(--q-gap-md, 20px)'
    when 'lg'
      assign pad_var = 'var(--q-gap-lg, 24px)'
    when 'xl'
      assign pad_var = 'var(--q-gap-xl, 32px)'
  endcase
-%}

<section
  class="q-feed q-feed--blog q-feed--{{ layout_mode }}"
  data-q-section="feeds-blogs"
  data-q-sid="{{ sid }}"
  style="
    --q-feed-gap: {{ gap_var }};
    --q-feed-pad: {{ pad_var }};
    --q-feed-cols-m: {{ cols_m }};
    --q-feed-cols-t: {{ cols_t }};
    --q-feed-cols-d: {{ cols_d }};
    --q-feed-list-img-cap: {{ list_img_cap }}px;
  "
>
  {%- if section.settings.bg_mode != 'none' -%}
    <div
      class="q-feed__bg"
      aria-hidden="true"
      style="
        {%- if section.settings.bg_mode == 'surface' -%}
          background: var(--q-surface);
        {%- elsif section.settings.bg_mode == 'contrast' -%}
          background: var(--q-surface-2);
        {%- endif -%}
      "
    ></div>
  {%- endif -%}

  <div class="q-feed__inner q-container">
    {%- if section.settings.eyebrow != blank or section.settings.heading != blank or section.settings.subheading != blank -%}
      <header class="q-feed__header">
        {%- if section.settings.eyebrow != blank -%}
          <p class="q-feed__eyebrow">{{ section.settings.eyebrow }}</p>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="q-feed__heading">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.subheading != blank -%}
          <div class="q-feed__subheading rte">{{ section.settings.subheading }}</div>
        {%- endif -%}

        {%- if chosen_blog != blank and section.settings.show_blog_title -%}
          <p class="q-feed__blogtitle">
            <a class="q-feed__bloglink" href="{{ chosen_blog.url }}">
              {{ chosen_blog.title }}
            </a>
            {%- if filter_tag != blank -%}
              <span class="q-feed__filterpill" aria-label="Filtered by tag">{{ filter_tag }}</span>
            {%- endif -%}
          </p>
        {%- endif -%}
      </header>
    {%- endif -%}

    {%- if chosen_blog == blank -%}
      <div class="q-feed__empty" role="status">
        <p>Select a blog to display articles.</p>
      </div>
    {%- else -%}

      {%- paginate chosen_blog.articles by per_page -%}
        {%- liquid
          assign rendered_count = 0

          assign paginate_returned_any = false
          if paginate.items_count and paginate.items_count > 0
            assign paginate_returned_any = true
          endif

          assign needs_fallback = false
          if paginate_returned_any == false and chosen_blog.articles_count and chosen_blog.articles_count > 0
            assign needs_fallback = true
          endif
        -%}

        <div
          class="q-feed__items"
          data-q-feed-items
          data-q-layout="{{ layout_mode }}"
          id="q-feed-items-{{ sid }}"
        >
          {%- if needs_fallback -%}
            {%- for article in chosen_blog.articles limit: per_page -%}
              {%- if filter_tag == blank or article.tags contains filter_tag -%}
                {%- liquid
                  assign rendered_count = rendered_count | plus: 1
                  assign raw = article.excerpt_or_content | strip_html | strip

                  assign excerpt_text = raw
                  if show_excerpt
                    if excerpt_mode == 'words'
                      assign excerpt_text = raw | truncatewords: excerpt_len_words, '…'
                    else
                      assign trimmed = raw | truncate: excerpt_len_chars, ''
                      if trimmed != raw
                        assign last_space = trimmed | split: ' ' | pop | join: ' '
                        if last_space != blank
                          assign trimmed = last_space
                        endif
                        assign excerpt_text = trimmed | append: '…'
                      else
                        assign excerpt_text = raw
                      endif
                    endif
                  endif
                -%}

                <div class="q-feed__item">
                  {%- render 'blog-card',
                    article: article,
                    heading_level: 3,
                    show_image: show_image,
                    show_author: show_author,
                    show_date: show_date,
                    show_read_time: show_read_time,
                    show_tags: show_tags,
                    show_excerpt: show_excerpt,
                    excerpt_text: excerpt_text,
                    cta_label: cta_label
                  -%}
                </div>
              {%- endif -%}
            {%- endfor -%}
          {%- else -%}
            {%- for article in paginate.items -%}
              {%- if filter_tag == blank or article.tags contains filter_tag -%}
                {%- liquid
                  assign rendered_count = rendered_count | plus: 1
                  assign raw = article.excerpt_or_content | strip_html | strip

                  assign excerpt_text = raw
                  if show_excerpt
                    if excerpt_mode == 'words'
                      assign excerpt_text = raw | truncatewords: excerpt_len_words, '…'
                    else
                      assign trimmed = raw | truncate: excerpt_len_chars, ''
                      if trimmed != raw
                        assign last_space = trimmed | split: ' ' | pop | join: ' '
                        if last_space != blank
                          assign trimmed = last_space
                        endif
                        assign excerpt_text = trimmed | append: '…'
                      else
                        assign excerpt_text = raw
                      endif
                    endif
                  endif
                -%}

                <div class="q-feed__item">
                  {%- render 'blog-card',
                    article: article,
                    heading_level: 3,
                    show_image: show_image,
                    show_author: show_author,
                    show_date: show_date,
                    show_read_time: show_read_time,
                    show_tags: show_tags,
                    show_excerpt: show_excerpt,
                    excerpt_text: excerpt_text,
                    cta_label: cta_label
                  -%}
                </div>
              {%- endif -%}
            {%- endfor -%}
          {%- endif -%}
        </div>

        {%- if rendered_count == 0 -%}
          <div class="q-feed__empty" role="status">
            {%- if filter_tag != blank -%}
              <p>No articles match this filter yet.</p>
              {%- if on_tagged_page == false and tagged_url != blank -%}
                <p class="q-feed__emptyhint">
                  <a class="q-feed__page" href="{{ tagged_url }}">View the tagged page</a>
                </p>
              {%- endif -%}
            {%- else -%}
              <p>No articles yet.</p>
            {%- endif -%}
          </div>
        {%- else -%}
          {%- if needs_fallback == false -%}
            <div class="q-feed__nav" data-q-feed-nav>
              {%- if pagination_mode == 'load_more' -%}
                <button
                  class="q-feed__loadmore q-btn"
                  type="button"
                  data-q-loadmore
                  {%- if paginate.next == blank -%} disabled aria-disabled="true"{%- endif -%}
                  data-next-url="{{ paginate.next.url }}"
                  aria-controls="q-feed-items-{{ sid }}"
                >
                  <span data-q-loadmore-label>{{ load_more_label }}</span>
                  <span class="q-feed__spinner" aria-hidden="true"></span>
                </button>

                <noscript>
                  <nav class="q-feed__pagination" aria-label="Pagination">
                    {%- if paginate.previous -%}
                      <a class="q-feed__page" href="{{ paginate.previous.url }}">{{ 'general.pagination.previous' | t | default: 'Previous' }}</a>
                    {%- endif -%}
                    <span class="q-feed__pageinfo">{{ paginate.current_page }} / {{ paginate.pages }}</span>
                    {%- if paginate.next -%}
                      <a class="q-feed__page" href="{{ paginate.next.url }}">{{ 'general.pagination.next' | t | default: 'Next' }}</a>
                    {%- endif -%}
                  </nav>
                </noscript>

                <nav class="q-feed__pagination q-feed__pagination--fallback" aria-label="Pagination" data-q-pagination-fallback>
                  {%- if paginate.previous -%}
                    <a class="q-feed__page" href="{{ paginate.previous.url }}">{{ 'general.pagination.previous' | t | default: 'Previous' }}</a>
                  {%- endif -%}
                  <span class="q-feed__pageinfo">{{ paginate.current_page }} / {{ paginate.pages }}</span>
                  {%- if paginate.next -%}
                    <a class="q-feed__page" href="{{ paginate.next.url }}">{{ 'general.pagination.next' | t | default: 'Next' }}</a>
                  {%- endif -%}
                </nav>
              {%- else -%}
                <nav class="q-feed__pagination" aria-label="Pagination">
                  {%- if paginate.previous -%}
                    <a class="q-feed__page" href="{{ paginate.previous.url }}">{{ 'general.pagination.previous' | t | default: 'Previous' }}</a>
                  {%- endif -%}
                  <span class="q-feed__pageinfo">{{ paginate.current_page }} / {{ paginate.pages }}</span>
                  {%- if paginate.next -%}
                    <a class="q-feed__page" href="{{ paginate.next.url }}">{{ 'general.pagination.next' | t | default: 'Next' }}</a>
                  {%- endif -%}
                </nav>
              {%- endif -%}
            </div>
          {%- endif -%}
        {%- endif -%}

        {%- if pagination_mode == 'load_more' and rendered_count > 0 and needs_fallback == false -%}
          <script>
            (function() {
              var root = document.querySelector('[data-q-section="feeds-blogs"][data-q-sid="{{ sid }}"]');
              if (!root) return;

              var btn = root.querySelector('[data-q-loadmore]');
              var items = root.querySelector('[data-q-feed-items]');
              var fallback = root.querySelector('[data-q-pagination-fallback]');

              if (!btn || !items) return;
              if (fallback) fallback.style.display = 'none';

              var busy = false;

              function setBusy(state) {
                busy = state;
                btn.disabled = state || !btn.dataset.nextUrl;
                btn.setAttribute('aria-busy', state ? 'true' : 'false');
                root.classList.toggle('is-loading', !!state);
              }

              async function loadNext() {
                var nextUrl = btn.dataset.nextUrl;
                if (!nextUrl || busy) return;

                setBusy(true);

                try {
                  var res = await fetch(nextUrl, { credentials: 'same-origin' });
                  if (!res.ok) throw new Error('Network error');

                  var html = await res.text();
                  var doc = new DOMParser().parseFromString(html, 'text/html');
                  var nextRoot = doc.querySelector('[data-q-section="feeds-blogs"][data-q-sid="{{ sid }}"]');
                  if (!nextRoot) throw new Error('Section not found in response');

                  var nextItems = nextRoot.querySelector('[data-q-feed-items]');
                  var nextBtn = nextRoot.querySelector('[data-q-loadmore]');

                  if (nextItems) {
                    while (nextItems.firstElementChild) {
                      items.appendChild(nextItems.firstElementChild);
                    }
                  }

                  var nextUrl2 = nextBtn ? nextBtn.getAttribute('data-next-url') : '';
                  btn.dataset.nextUrl = nextUrl2 || '';

                  if (!btn.dataset.nextUrl) {
                    btn.disabled = true;
                    btn.setAttribute('aria-disabled', 'true');
                  }

                  btn.focus({ preventScroll: false });
                } catch (e) {
                  if (fallback) fallback.style.display = '';
                } finally {
                  setBusy(false);
                }
              }

              btn.addEventListener('click', loadNext);
              setBusy(false);
            })();
          </script>
        {%- endif -%}
      {%- endpaginate -%}
    {%- endif -%}
  </div>

  <style>
    .q-feed--blog { position: relative; }
    .q-feed__bg { position: absolute; inset: 0; z-index: 0; }
    .q-feed__inner { position: relative; z-index: 1; padding-block: var(--q-pad-y, var(--q-section-pad-y)); }

    .q-feed__header { margin-bottom: var(--q-feed-gap); }
    .q-feed__eyebrow { margin: 0 0 var(--q-gap-xs, 8px); font-size: var(--q-fs-sm, 0.95rem); opacity: .85; }
    .q-feed__heading { margin: 0; font-size: var(--q-heading-fs, var(--q-fs-2xl, 2rem)); line-height: var(--q-heading-lh, 1.15); }
    .q-feed__subheading { margin-top: var(--q-gap-sm, 12px); max-width: var(--q-prose, 72ch); }
    .q-feed__blogtitle { margin-top: var(--q-gap-sm, 12px); display: flex; gap: var(--q-gap-sm, 12px); align-items: center; flex-wrap: wrap; }
    .q-feed__bloglink { text-decoration: none; }
    .q-feed__filterpill {
      display: inline-flex;
      align-items: center;
      padding: .25em .6em;
      border-radius: var(--q-radius-pill, 999px);
      border: 1px solid var(--q-border, rgba(0,0,0,.12));
      font-size: var(--q-fs-xs, .85rem);
    }

    /* Items base */
    .q-feed__items{
      display: grid;
      gap: var(--q-feed-gap);
      padding: var(--q-feed-pad); /* OUTER breathing room (you asked for this) */
    }
    .q-feed__item{ margin: 0; min-width: 0; } /* safety wrapper so cards can't collapse gutters */

    /* LIST */
    .q-feed--list .q-feed__items { grid-template-columns: 1fr; }
    .q-feed--list .q-blogcard{
      border: 0;
      border-radius: 0;
      background: transparent;
      overflow: visible;
      padding: var(--q-gap-lg, 24px) 0;
      border-bottom: 1px solid var(--q-border, rgba(0,0,0,.12));
    }
    .q-feed--list .q-blogcard__media{
      display: block;
      border-radius: var(--q-radius-md, 16px);
      overflow: hidden;
      margin-bottom: var(--q-gap-md, 16px);
    }
    .q-feed--list .q-blogcard__img{
      width: 100%;
      height: auto;
      display: block;
      max-height: var(--q-feed-list-img-cap);
      object-fit: cover;
    }
    .q-feed--list .q-blogcard__body{
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: var(--q-gap-sm, 12px);
    }
    .q-feed--list .q-blogcard__title{
      font-size: var(--q-fs-xl, 1.35rem);
      line-height: 1.18;
    }
    .q-feed--list .q-blogcard__excerpt{ max-width: var(--q-prose, 72ch); }

    @media (max-width: 749px){
      .q-feed--list .q-blogcard{ padding: var(--q-gap-md, 16px) 0; }
      .q-feed--list .q-blogcard__img{ max-height: calc(var(--q-feed-list-img-cap) - 40px); }
    }

    /* GRID — real gutters, always */
    .q-feed--grid .q-feed__items{
      grid-template-columns: repeat(var(--q-feed-cols-m), minmax(0, 1fr));
      column-gap: var(--q-feed-gap);
      row-gap: var(--q-feed-gap);
    }
    @media (min-width: 750px){
      .q-feed--grid .q-feed__items{
        grid-template-columns: repeat(var(--q-feed-cols-t), minmax(0, 1fr));
        column-gap: var(--q-feed-gap);
        row-gap: var(--q-feed-gap);
      }
    }
    @media (min-width: 990px){
      .q-feed--grid .q-feed__items{
        grid-template-columns: repeat(var(--q-feed-cols-d), minmax(0, 1fr));
        column-gap: var(--q-feed-gap);
        row-gap: var(--q-feed-gap);
      }
    }

    /* Guardrails: cards cannot “eat” the gap via margins/width hacks */
    .q-feed--grid .q-feed__items > *{
      margin: 0 !important;
      width: auto !important;
      max-width: 100% !important;
      box-sizing: border-box;
    }

    /* Add breathing between image and content in grid */
    .q-feed--grid .q-blogcard__media{ margin-bottom: var(--q-gap-sm, 12px); }
    .q-feed--grid .q-blogcard__body{
      padding: var(--q-gap-md, 16px);
      display: flex;
      flex-direction: column;
      gap: var(--q-gap-sm, 12px);
    }

    /* MASONRY (unchanged) */
    .q-feed--masonry .q-feed__items{
      display: block;
      column-gap: var(--q-feed-gap);
      columns: var(--q-feed-cols-m);
      padding: var(--q-feed-pad);
    }
    .q-feed--masonry .q-feed__items > *{
      break-inside: avoid;
      margin: 0 0 var(--q-feed-gap);
      display: block;
    }
    @media (min-width: 750px){ .q-feed--masonry .q-feed__items{ columns: var(--q-feed-cols-t); } }
    @media (min-width: 990px){ .q-feed--masonry .q-feed__items{ columns: var(--q-feed-cols-d); } }

    /* Nav */
    .q-feed__nav { margin-top: var(--q-feed-gap); display: flex; justify-content: center; }
    .q-feed__pagination { display: inline-flex; align-items: center; gap: var(--q-gap-sm, 12px); }
    .q-feed__page { text-decoration: none; padding: .45em .8em; border-radius: var(--q-radius-sm, 10px); border: 1px solid var(--q-border, rgba(0,0,0,.12)); }
    .q-feed__pageinfo { font-size: var(--q-fs-sm, .95rem); opacity: .85; }

    .q-feed__loadmore { display: inline-flex; align-items: center; gap: var(--q-gap-sm, 12px); }
    .q-feed__spinner{
      width: 1em; height: 1em;
      border-radius: 999px;
      border: 2px solid currentColor;
      border-right-color: transparent;
      opacity: 0;
      transform: rotate(0deg);
    }
    .q-feed--blog.is-loading .q-feed__spinner{ opacity: .6; animation: qspin 700ms linear infinite; }
    @keyframes qspin { to { transform: rotate(360deg); } }

    .q-feed__empty { text-align: center; padding: var(--q-gap-lg, 24px) 0; }
    .q-feed__emptyhint { margin-top: var(--q-gap-sm, 12px); }
  </style>
</section>

{% schema %}
{
  "name": "Feeds - Blog List / Grid",
  "tag": "section",
  "class": "section q-section q-section--feed-blog",
  "settings": [
    { "type": "header", "content": "Content" },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog source",
      "info": "If not selected, the first available blog is used so the feed renders immediately."
    },
    {
      "type": "text",
      "id": "filter_tag",
      "label": "Optional tag filter",
      "info": "Only show articles that include this tag. Leave blank for all articles."
    },
    {
      "type": "range",
      "id": "per_page",
      "label": "Posts per page",
      "min": 4,
      "max": 24,
      "step": 1,
      "default": 12
    },

    { "type": "header", "content": "Header" },
    { "type": "text", "id": "eyebrow", "label": "Eyebrow" },
    { "type": "text", "id": "heading", "label": "Heading" },
    { "type": "richtext", "id": "subheading", "label": "Subheading" },
    {
      "type": "checkbox",
      "id": "show_blog_title",
      "label": "Show blog title link",
      "default": true
    },

    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "layout_mode",
      "label": "Display mode",
      "default": "list",
      "options": [
        { "value": "list", "label": "List" },
        { "value": "grid", "label": "Grid" },
        { "value": "masonry", "label": "Masonry" }
      ]
    },
    {
      "type": "select",
      "id": "gap_token",
      "label": "Gap spacing",
      "default": "md",
      "options": [
        { "value": "xs", "label": "XS" },
        { "value": "sm", "label": "SM" },
        { "value": "md", "label": "MD" },
        { "value": "lg", "label": "LG" },
        { "value": "xl", "label": "XL" }
      ]
    },
    {
      "type": "select",
      "id": "pad_token",
      "label": "Outer padding",
      "default": "lg",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "xs", "label": "XS" },
        { "value": "sm", "label": "SM" },
        { "value": "md", "label": "MD" },
        { "value": "lg", "label": "LG" },
        { "value": "xl", "label": "XL" }
      ]
    },
    {
      "type": "range",
      "id": "cols_mobile",
      "label": "Columns (mobile) — Grid & Masonry",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "cols_tablet",
      "label": "Columns (tablet) — Grid & Masonry",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "cols_desktop",
      "label": "Columns (desktop) — Grid & Masonry",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 3
    },

    { "type": "header", "content": "Card content" },
    { "type": "checkbox", "id": "show_image", "label": "Show featured image", "default": true },
    { "type": "checkbox", "id": "show_author", "label": "Show author", "default": true },
    { "type": "checkbox", "id": "show_date", "label": "Show publish date", "default": true },
    { "type": "checkbox", "id": "show_read_time", "label": "Show estimated read time", "default": true },
    { "type": "checkbox", "id": "show_tags", "label": "Show tags / categories", "default": false },
    { "type": "checkbox", "id": "show_excerpt", "label": "Show excerpt", "default": true },
    {
      "type": "select",
      "id": "excerpt_mode",
      "label": "Excerpt length mode",
      "default": "words",
      "options": [
        { "value": "words", "label": "Words" },
        { "value": "chars", "label": "Characters" }
      ]
    },
    { "type": "range", "id": "excerpt_words", "label": "Excerpt words", "min": 8, "max": 60, "step": 1, "default": 24 },
    { "type": "range", "id": "excerpt_chars", "label": "Excerpt characters", "min": 80, "max": 320, "step": 10, "default": 160 },
    { "type": "text", "id": "cta_label", "label": "Card CTA label", "default": "Read more" },

    { "type": "range", "id": "list_image_cap", "label": "List image max height (px)", "min": 140, "max": 420, "step": 10, "default": 240 },

    { "type": "header", "content": "Pagination" },
    {
      "type": "select",
      "id": "pagination_mode",
      "label": "Pagination mode",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard pagination (links)" },
        { "value": "load_more", "label": "Load more button (progressive enhancement)" }
      ]
    },
    { "type": "text", "id": "load_more_label", "label": "Load more button label", "default": "Load more" },

    { "type": "header", "content": "Root background" },
    {
      "type": "select",
      "id": "bg_mode",
      "label": "Background",
      "default": "none",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "surface", "label": "Surface" },
        { "value": "contrast", "label": "Contrast surface" }
      ]
    }
  ],
  "presets": [
    { "name": "Feeds - Blog List / Grid", "category": "Content Feeds" }
  ]
}
{% endschema %}
