{% comment %}
  Quadratum — Standout Banner
  • Split-screen (50-50, 60-40, 40-60) or single-panel hero
  • Per-panel media (image/video), overlays, content positioning
  • Theme-aware typography, colors, and buttons
{% endcomment %}

{{ 'standout-hero-banner.css' | asset_url | stylesheet_tag }}

{%- assign s = section.settings -%}

{%- comment %} THEME TOKENS {% endcomment -%}
{%- assign T_font_heading        = settings.font_heading -%}
{%- assign T_font_body           = settings.font_body -%}
{%- assign T_head_letter         = settings.headings_letterspacing | default: 0 -%}
{%- assign T_head_uppercase      = settings.headings_uppercase -%}
{%- assign T_btn_variant_default = settings.button_variant_default | default: 'solid' -%}
{%- assign T_btn_radius          = settings.button_radius | default: 12 -%}
{%- assign T_btn_bw              = settings.button_border_width | default: 1 -%}
{%- assign T_btn_hover_op        = settings.button_hover_opacity | default: 92 -%}
{%- assign T_btn_active_scale    = settings.button_active_scale | default: 98 -%}

{%- assign C_primary        = settings.color_primary        | default: '#2563eb' -%}
{%- assign C_secondary      = settings.color_secondary      | default: '#111827' -%}
{%- assign C_text_base      = settings.text_base            | default: '#111111' -%}
{%- assign C_text_on_color  = settings.text_on_color        | default: '#ffffff' -%}

{%- comment %} LAYOUT {% endcomment -%}
{%- assign layout = s.layout | default: 'split-50-50' -%}
{%- assign layout_class = 'q-sb-grid-50-50' -%}
{%- if layout == 'split-60-40' -%}{%- assign layout_class = 'q-sb-grid-60-40' -%}{%- endif -%}
{%- if layout == 'split-40-60' -%}{%- assign layout_class = 'q-sb-grid-40-60' -%}{%- endif -%}
{%- if layout == 'single' -%}{%- assign layout_class = 'q-sb-grid-single' -%}{%- endif -%}

{%- assign min_h_desktop = s.min_height | default: '75vh' -%}
{%- assign min_h_mobile  = s.min_height_mobile | default: '60vh' -%}

{%- assign stack_mobile = s.stack_on_mobile | default: true -%}
{%- assign reverse_mobile = s.reverse_on_mobile | default: false -%}
{%- assign dom_id = s.anchor_id | default: section.id -%}
{%- assign min_h_mobile_css  = min_h_mobile  -%}
{%- assign min_h_desktop_css = min_h_desktop -%}
{%- if min_h_mobile  == '100vh' -%}{%- assign min_h_mobile_css  = '100svh' -%}{%- endif -%}
{%- if min_h_desktop == '100vh' -%}{%- assign min_h_desktop_css = '100svh' -%}{%- endif -%}


{%- comment %} VISIBILITY {% endcomment -%}
{%- assign visibility_classes = '' -%}
{%- if s.hide_on_mobile  -%}{%- assign visibility_classes = visibility_classes | append: ' hidden md:flex' -%}{%- endif -%}
{%- if s.hide_on_desktop -%}{%- assign visibility_classes = visibility_classes | append: ' flex md:hidden' -%}{%- endif -%}

{%- comment %} PANEL HELPERS {% endcomment -%}
{%- capture left_panel -%}
  {% render 'standout-banner-panel',
    image: s.left_image,
    mobile_image: s.left_mobile_image,
    video_url: s.left_video_url,
    bg_color: s.left_bg_color,
    overlay_type: s.left_overlay_type,
    overlay_color: s.left_overlay_color,
    overlay_opacity: s.left_overlay_opacity,
    grad_start: s.left_grad_start,
    grad_start_opacity: s.left_grad_start_opacity,
    grad_end: s.left_grad_end,
    grad_end_opacity: s.left_grad_end_opacity,
    grad_angle: s.left_grad_angle,
    accent_text: s.left_accent_text,
    accent_color: s.left_accent_color,
    heading: s.left_heading,
    heading_color: s.left_heading_color,
    subheading: s.left_subheading,
    subheading_color: s.left_subheading_color,
    cta_text: s.left_cta_text,
    cta_link: s.left_cta_link,
    cta_variant: s.left_cta_variant,
    cta2_text: s.left_cta2_text,
    cta2_link: s.left_cta2_link,
    cta2_variant: s.left_cta2_variant,
    content_position: s.left_content_position,
    content_position_mobile: s.left_content_position_mobile,
    text_alignment: s.left_text_alignment,
    content_max_width: s.left_content_max_width,
    section_id: section.id,
    panel_id: 'left'
  %}
{%- endcapture -%}

{%- capture right_panel -%}
  {% render 'standout-banner-panel',
    image: s.right_image,
    mobile_image: s.right_mobile_image,
    video_url: s.right_video_url,
    bg_color: s.right_bg_color,
    overlay_type: s.right_overlay_type,
    overlay_color: s.right_overlay_color,
    overlay_opacity: s.right_overlay_opacity,
    grad_start: s.right_grad_start,
    grad_start_opacity: s.right_grad_start_opacity,
    grad_end: s.right_grad_end,
    grad_end_opacity: s.right_grad_end_opacity,
    grad_angle: s.right_grad_angle,
    accent_text: s.right_accent_text,
    accent_color: s.right_accent_color,
    heading: s.right_heading,
    heading_color: s.right_heading_color,
    subheading: s.right_subheading,
    subheading_color: s.right_subheading_color,
    cta_text: s.right_cta_text,
    cta_link: s.right_cta_link,
    cta_variant: s.right_cta_variant,
    cta2_text: s.right_cta2_text,
    cta2_link: s.right_cta2_link,
    cta2_variant: s.right_cta2_variant,
    content_position: s.right_content_position,
    content_position_mobile: s.right_content_position_mobile,
    text_alignment: s.right_text_alignment,
    content_max_width: s.right_content_max_width,
    section_id: section.id,
    panel_id: 'right'
  %}
{%- endcapture -%}

<style>
  /* Theme typography hooks (inherits global theme settings) */
  #{{ dom_id }} .q-sb-heading {
    {% if T_font_heading %}font-family: {{ T_font_heading.family }}, {{ T_font_heading.fallback_families }};{% endif %}
    {% if T_head_uppercase %}text-transform: uppercase;{% endif %}
    {% if T_head_letter != 0 %}letter-spacing: {{ T_head_letter | divided_by: 1000.0 }}em;{% endif %}
  }

  /* Stable viewport height + per-section scoping */
  @media (max-width: 767.98px) { #{{ dom_id }} { --q-sb-min-h: {{ min_h_mobile_css }}; } }
  @media (min-width: 768px)   { #{{ dom_id }} { --q-sb-min-h: {{ min_h_desktop_css }}; } }

  /* Make panels actually use that min height (works even if the CSS file forgets) */
  #{{ dom_id }} .q-sb-container,
  #{{ dom_id }} .q-sb-panel { min-height: var(--q-sb-min-h, 60svh); }

  /* Prefer dynamic viewport units when supported (iOS/Android browser chrome) */
  @supports (height: 100dvh) {
    #{{ dom_id }} .q-sb-container,
    #{{ dom_id }} .q-sb-panel { min-height: var(--q-sb-min-h, 60dvh); }
  }
</style>


<section
  id="{{ dom_id }}"
  class="q-standout-banner{{ visibility_classes }}"
  role="region"
  aria-label="{{ s.aria_label | default: 'Standout banner' }}"
  style="
    padding-top: {{ s.padding_top | default: 0 }}px;
    padding-bottom: {{ s.padding_bottom | default: 0 }}px;
    margin-top: {{ s.margin_top | default: 0 }}px;
    margin-bottom: {{ s.margin_bottom | default: 0 }}px;
  "
>
  <div class="q-sb-container {{ layout_class }} {% if stack_mobile %}q-sb-stack-mobile{% endif %} {% if reverse_mobile %}q-sb-reverse-mobile{% endif %}">
    {% if layout == 'single' %}
      {{ left_panel }}
    {% else %}
      {{ left_panel }}
      {{ right_panel }}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Standout Banner",
  "tag": "section",
  "class": "q-standout-banner-section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout style",
      "default": "split-50-50",
      "options": [
        { "value": "split-50-50", "label": "Split 50/50" },
        { "value": "split-60-40", "label": "Split 60/40" },
        { "value": "split-40-60", "label": "Split 40/60" },
        { "value": "single", "label": "Single panel" }
      ]
    },
    {
      "type": "select",
      "id": "min_height",
      "label": "Minimum height (desktop)",
      "default": "75vh",
      "options": [
        { "value": "50vh", "label": "50% viewport" },
        { "value": "60vh", "label": "60% viewport" },
        { "value": "75vh", "label": "75% viewport" },
        { "value": "100vh", "label": "Full screen" },
        { "value": "auto", "label": "Auto" }
      ]
    },
    {
      "type": "select",
      "id": "min_height_mobile",
      "label": "Minimum height (mobile)",
      "default": "60vh",
      "options": [
        { "value": "50vh", "label": "50% viewport" },
        { "value": "60vh", "label": "60% viewport" },
        { "value": "75vh", "label": "75% viewport" },
        { "value": "100vh", "label": "Full screen" },
        { "value": "auto", "label": "Auto" }
      ]
    },
    {
      "type": "checkbox",
      "id": "stack_on_mobile",
      "label": "Stack panels on mobile",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "reverse_on_mobile",
      "label": "Reverse order on mobile",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 200,
      "step": 10,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin top",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin bottom",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "LEFT PANEL — Media"
    },
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "left_mobile_image",
      "label": "Mobile image (optional)"
    },
    {
      "type": "text",
      "id": "left_video_url",
      "label": "Video URL (MP4)",
      "info": "Optional; will use image as poster if provided"
    },
    {
      "type": "color",
      "id": "left_bg_color",
      "label": "Background color (if no media)",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "LEFT PANEL — Overlay"
    },
    {
      "type": "select",
      "id": "left_overlay_type",
      "label": "Overlay type",
      "default": "gradient",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "solid", "label": "Solid color" },
        { "value": "gradient", "label": "Gradient" }
      ]
    },
    {
      "type": "color",
      "id": "left_overlay_color",
      "label": "Overlay color (solid)",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "left_overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40,
      "unit": "%"
    },
    {
      "type": "color",
      "id": "left_grad_start",
      "label": "Gradient start",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "left_grad_start_opacity",
      "label": "Gradient start opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60,
      "unit": "%"
    },
    {
      "type": "color",
      "id": "left_grad_end",
      "label": "Gradient end",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "left_grad_end_opacity",
      "label": "Gradient end opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 0,
      "unit": "%"
    },
    {
      "type": "range",
      "id": "left_grad_angle",
      "label": "Gradient angle",
      "min": 0,
      "max": 360,
      "step": 15,
      "default": 180,
      "unit": "deg"
    },
    {
      "type": "header",
      "content": "LEFT PANEL — Content"
    },
    {
      "type": "text",
      "id": "left_accent_text",
      "label": "Accent text"
    },
    {
      "type": "color",
      "id": "left_accent_color",
      "label": "Accent color",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "left_heading",
      "label": "Heading",
      "default": "City Edit"
    },
    {
      "type": "color",
      "id": "left_heading_color",
      "label": "Heading color",
      "default": "#ffffff"
    },
    {
      "type": "textarea",
      "id": "left_subheading",
      "label": "Subheading"
    },
    {
      "type": "color",
      "id": "left_subheading_color",
      "label": "Subheading color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "LEFT PANEL — Layout"
    },
    {
      "type": "select",
      "id": "left_content_position",
      "label": "Content position (desktop)",
      "default": "center-center",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-center", "label": "Top center" },
        { "value": "top-right", "label": "Top right" },
        { "value": "center-left", "label": "Center left" },
        { "value": "center-center", "label": "Center center" },
        { "value": "center-right", "label": "Center right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-center", "label": "Bottom center" },
        { "value": "bottom-right", "label": "Bottom right" }
      ]
    },
    {
      "type": "select",
      "id": "left_content_position_mobile",
      "label": "Content position (mobile)",
      "default": "center-center",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-center", "label": "Top center" },
        { "value": "top-right", "label": "Top right" },
        { "value": "center-left", "label": "Center left" },
        { "value": "center-center", "label": "Center center" },
        { "value": "center-right", "label": "Center right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-center", "label": "Bottom center" },
        { "value": "bottom-right", "label": "Bottom right" }
      ]
    },
    {
      "type": "select",
      "id": "left_text_alignment",
      "label": "Text alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "left_content_max_width",
      "label": "Content max width",
      "default": "medium",
      "options": [
        { "value": "narrow", "label": "Narrow (28rem)" },
        { "value": "medium", "label": "Medium (36rem)" },
        { "value": "wide", "label": "Wide (42rem)" }
      ]
    },
    {
      "type": "header",
      "content": "LEFT PANEL — CTAs"
    },
    {
      "type": "text",
      "id": "left_cta_text",
      "label": "Primary button text"
    },
    {
      "type": "url",
      "id": "left_cta_link",
      "label": "Primary button link"
    },
    {
      "type": "select",
      "id": "left_cta_variant",
      "label": "Primary button style",
      "default": "luxury",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" },
        { "value": "luxury", "label": "Luxury" },
        { "value": "elegant", "label": "Elegant" }
      ]
    },
    {
      "type": "text",
      "id": "left_cta2_text",
      "label": "Secondary button text"
    },
    {
      "type": "url",
      "id": "left_cta2_link",
      "label": "Secondary button link"
    },
    {
      "type": "select",
      "id": "left_cta2_variant",
      "label": "Secondary button style",
      "default": "outline",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" },
        { "value": "luxury", "label": "Luxury" },
        { "value": "elegant", "label": "Elegant" }
      ]
    },
    {
      "type": "header",
      "content": "RIGHT PANEL — Media"
    },
    {
      "type": "image_picker",
      "id": "right_image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "right_mobile_image",
      "label": "Mobile image (optional)"
    },
    {
      "type": "text",
      "id": "right_video_url",
      "label": "Video URL (MP4)"
    },
    {
      "type": "color",
      "id": "right_bg_color",
      "label": "Background color (if no media)",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "RIGHT PANEL — Overlay"
    },
    {
      "type": "select",
      "id": "right_overlay_type",
      "label": "Overlay type",
      "default": "gradient",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "solid", "label": "Solid color" },
        { "value": "gradient", "label": "Gradient" }
      ]
    },
    {
      "type": "color",
      "id": "right_overlay_color",
      "label": "Overlay color (solid)",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "right_overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40,
      "unit": "%"
    },
    {
      "type": "color",
      "id": "right_grad_start",
      "label": "Gradient start",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "right_grad_start_opacity",
      "label": "Gradient start opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60,
      "unit": "%"
    },
    {
      "type": "color",
      "id": "right_grad_end",
      "label": "Gradient end",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "right_grad_end_opacity",
      "label": "Gradient end opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 0,
      "unit": "%"
    },
    {
      "type": "range",
      "id": "right_grad_angle",
      "label": "Gradient angle",
      "min": 0,
      "max": 360,
      "step": 15,
      "default": 180,
      "unit": "deg"
    },
    {
      "type": "header",
      "content": "RIGHT PANEL — Content"
    },
    {
      "type": "text",
      "id": "right_accent_text",
      "label": "Accent text"
    },
    {
      "type": "color",
      "id": "right_accent_color",
      "label": "Accent color",
      "default": "#111111"
    },
    {
      "type": "text",
      "id": "right_heading",
      "label": "Heading",
      "default": "Resort Collection"
    },
    {
      "type": "color",
      "id": "right_heading_color",
      "label": "Heading color",
      "default": "#111111"
    },
    {
      "type": "textarea",
      "id": "right_subheading",
      "label": "Subheading"
    },
    {
      "type": "color",
      "id": "right_subheading_color",
      "label": "Subheading color",
      "default": "#111111"
    },
    {
      "type": "header",
      "content": "RIGHT PANEL — Layout"
    },
    {
      "type": "select",
      "id": "right_content_position",
      "label": "Content position (desktop)",
      "default": "center-center",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-center", "label": "Top center" },
        { "value": "top-right", "label": "Top right" },
        { "value": "center-left", "label": "Center left" },
        { "value": "center-center", "label": "Center center" },
        { "value": "center-right", "label": "Center right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-center", "label": "Bottom center" },
        { "value": "bottom-right", "label": "Bottom right" }
      ]
    },
    {
      "type": "select",
      "id": "right_content_position_mobile",
      "label": "Content position (mobile)",
      "default": "center-center",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-center", "label": "Top center" },
        { "value": "top-right", "label": "Top right" },
        { "value": "center-left", "label": "Center left" },
        { "value": "center-center", "label": "Center center" },
        { "value": "center-right", "label": "Center right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-center", "label": "Bottom center" },
        { "value": "bottom-right", "label": "Bottom right" }
      ]
    },
    {
      "type": "select",
      "id": "right_text_alignment",
      "label": "Text alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "right_content_max_width",
      "label": "Content max width",
      "default": "medium",
      "options": [
        { "value": "narrow", "label": "Narrow (28rem)" },
        { "value": "medium", "label": "Medium (36rem)" },
        { "value": "wide", "label": "Wide (42rem)" }
      ]
    },
    {
      "type": "header",
      "content": "RIGHT PANEL — CTAs"
    },
    {
      "type": "text",
      "id": "right_cta_text",
      "label": "Primary button text"
    },
    {
      "type": "url",
      "id": "right_cta_link",
      "label": "Primary button link"
    },
    {
      "type": "select",
      "id": "right_cta_variant",
      "label": "Primary button style",
      "default": "luxury",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" },
        { "value": "luxury", "label": "Luxury" },
        { "value": "elegant", "label": "Elegant" }
      ]
    },
    {
      "type": "text",
      "id": "right_cta2_text",
      "label": "Secondary button text"
    },
    {
      "type": "url",
      "id": "right_cta2_link",
      "label": "Secondary button link"
    },
    {
      "type": "select",
      "id": "right_cta2_variant",
      "label": "Secondary button style",
      "default": "outline",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" },
        { "value": "luxury", "label": "Luxury" },
        { "value": "elegant", "label": "Elegant" }
      ]
    },
    {
      "type": "header",
      "content": "Visibility"
    },
    {
      "type": "text",
      "id": "anchor_id",
      "label": "Anchor ID (optional)"
    },
    {
      "type": "text",
      "id": "aria_label",
      "label": "ARIA label",
      "default": "Standout banner"
    },
    {
      "type": "checkbox",
      "id": "hide_on_mobile",
      "label": "Hide on mobile",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_on_desktop",
      "label": "Hide on desktop",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "Standout Hero Banner",
      "category": "Hero Banners"
    }
  ]
}
{% endschema %}
