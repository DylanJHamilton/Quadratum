{% comment %}
  Quadratum — Forms: Quote (Full) (integrations-enabled)
  • Layouts: Card / Split / Steps
  • Routing: Shopify Contact / Shopify Customer / Custom Endpoint
  • Engines: snippets/form-core.liquid + snippets/form-dispatch.liquid
  • Validation/steps/captcha: assets/frontend-form-logic-form-sections.js
  • Auto-inherits global Integrations: captcha, default endpoint, tags, marketing meta

  Minimal refactor (only what we need):
  - Prevent checkbox/radio from inheriting text-input chrome (padding/width/etc.)
  - Keep the fix fully scoped to #{{ section.id }}
  - Add defer to reCAPTCHA script for consistency
{% endcomment %}

{{ 'forms-sections.css' | asset_url | stylesheet_tag }}
{{ 'frontend-form-logic-form-sections.js' | asset_url | script_tag }}

{%- assign s = section.settings -%}
{%- assign g = settings -%}

{%- comment -%}
  Effective values (globals-first fallback):
  • Captcha: from Theme → Integrations unless section overrides
  • Tags: merge theme default + section tags
  • Endpoint: use section.endpoint_url; if blank and destination==custom_endpoint, fall back to g.forms_global_endpoint
{%- endcomment -%}

{%- assign _cm = s.captcha_mode | default: 'inherit' -%}
{%- if _cm == 'inherit' -%}{%- assign _cm = blank -%}{%- endif -%}
{%- assign eff_captcha_mode = _cm | default: g.forms_captcha_provider | default: 'none' -%}

{%- assign eff_captcha_key = s.captcha_site_key | default: '' -%}
{%- if eff_captcha_key == blank -%}
  {%- if eff_captcha_mode == 'turnstile' -%}
    {%- assign eff_captcha_key = g.captcha_turnstile_site_key | default: '' -%}
  {%- elsif eff_captcha_mode == 'recaptcha_v3' -%}
    {%- assign eff_captcha_key = g.captcha_recaptcha_site_key | default: '' -%}
  {%- endif -%}
{%- endif -%}

{%- assign tags_theme = g.forms_default_tags | default: 'form, web' -%}
{%- assign tags_section = s.hidden_tags | default: '' -%}
{%- assign eff_tags = tags_theme -%}
{%- if tags_section != blank -%}{%- assign eff_tags = tags_theme | append: ', ' | append: tags_section -%}{%- endif -%}

{%- assign eff_endpoint = s.endpoint_url -%}
{%- if eff_endpoint == blank and s.destination == 'custom_endpoint' -%}
  {%- assign eff_endpoint = g.forms_global_endpoint | default: '' -%}
{%- endif -%}

{%- assign hide_m = s.hide_on_mobile -%}
{%- assign hide_d = s.hide_on_desktop -%}

{%- assign anchor_id = s.anchor_id | strip -%}

{%- assign BTN_default = g.button_variant_default | default: 'solid' -%}
{%- assign _btn_choice = s.button_variant | default: 'inherit' -%}
{%- assign _btn_variant = BTN_default -%}
{%- if _btn_choice != 'inherit' and _btn_choice != blank -%}{%- assign _btn_variant = _btn_choice -%}{%- endif -%}
{%- assign btn_mode_class = 'q-btn--solid' -%}
{%- if _btn_variant == 'outline' -%}{%- assign btn_mode_class = 'q-btn--outline' -%}{%- endif -%}
{%- if _btn_variant == 'ghost' -%}{%- assign btn_mode_class = 'q-btn--ghost' -%}{%- endif -%}

{%- assign overlay_css = 'transparent' -%}
{%- assign overlay_alpha = s.overlay_opacity | default: 24 | divided_by: 100.0 -%}
{%- if s.overlay_type == 'solid' -%}
  {%- assign overlay_css = s.overlay_color | default: '#000000' | color_modify: 'alpha', overlay_alpha -%}
{%- elsif s.overlay_type == 'gradient' -%}
  {%- capture overlay_css -%}
    linear-gradient(
      {{ s.gradient_angle | default: 0 }}deg,
      {{ s.gradient_from | default: '#000000' | color_modify: 'alpha', overlay_alpha }},
      {{ s.gradient_to   | default: '#000000' | color_modify: 'alpha', overlay_alpha }}
    )
  {%- endcapture -%}
{%- endif -%}

<section
  id="{{ section.id }}"
  class="q-form q-form--quote-full{% if hide_m %} is-hidden-m{% endif %}{% if hide_d %} is-hidden-d{% endif %} q-cta-quote-form"
  role="region"
  aria-label="{{ s.aria_label | default: 'Quote request form' }}"
  data-template="{{ s.template_style }}"
  data-captcha="{{ eff_captcha_mode }}"
  data-captcha-key="{{ eff_captcha_key | escape }}"
  data-btn-variant="{{ btn_mode_class }}"
  data-msg-error="{{ s.error_text | escape }}"
  data-msg-success="{{ s.success_text | escape }}"
  data-marketing-app="{{ g.email_marketing_app | default: 'none' }}"
  data-marketing-consent="{{ g.marketing_consent_mode | default: 'optional' }}"
  data-marketing-double-opt-in="{{ g.marketing_double_opt_in | default: true }}"
  data-marketing-map-name="{{ g.marketing_map_name | default: true }}"
  data-marketing-map-phone="{{ g.marketing_map_phone | default: true }}"
  data-marketing-map-company="{{ g.marketing_map_company | default: true }}"
  data-utm-source="{{ g.marketing_utm_source | default: 'quote_form' }}"
  data-utm-medium="{{ g.marketing_utm_medium | default: 'web' }}"
  data-utm-campaign="{{ g.marketing_utm_campaign | default: 'lead_gen' }}"
  data-proxy-forms="{{ g.proxy_forms_endpoint | default: g.forms_global_endpoint | default: '' }}"
  data-proxy-marketing="{{ g.marketing_proxy_endpoint | default: '' }}"
  {% if anchor_id != blank %}data-anchor-id="{{ anchor_id | escape }}"{% endif %}
  style="
    --q-pad-y: {{ s.padding_y | default: 48 }}px;
    --q-pad-x: {{ s.padding_x | default: 24 }}px;
    --q-card-radius: {{ s.card_radius | default: 16 }}px;
    --q-input-radius: {{ s.input_radius | default: 10 }}px;
    --q-input-border: {{ s.input_border | default: 1 }}px;
    --q-form-bg: {{ s.form_bg | default: '#ffffff' }};
    --q-bg-color: {{ s.bg_color | default: '#ffffff' }};
    --q-overlay: {{ overlay_css | strip }};
    background-color: var(--q-bg-color);
    {% if s.bg_image != blank %}background-image: url({{ s.bg_image | image_url: width: 1920 }}); background-size: cover; background-position: center;{% endif %}
  "
>
  {%- comment -%}Optional deep-link anchor WITHOUT duplicating section id{%- endcomment -%}
  {%- if anchor_id != blank and anchor_id != section.id -%}
    <span id="{{ anchor_id | escape }}" class="q-anchor" aria-hidden="true"></span>
  {%- endif -%}

  {% if s.bg_video != blank %}
    <video class="q-bg-video" autoplay muted loop playsinline aria-hidden="true">
      <source src="{{ s.bg_video | escape }}" type="video/mp4">
    </video>
  {% endif %}
  {% if s.overlay_type != 'none' %}
    <div class="q-overlay" aria-hidden="true"></div>
  {% endif %}

  <div class="{% if s.container_mode == 'full' %}q-wrap-full{% else %}q-wrap{% endif %}">
    {%- assign H = s.heading_level | default: 'h2' -%}
    <div class="q-head">
      {% if s.kicker != blank %}<p class="q-kicker">{{ s.kicker }}</p>{% endif %}
      <{{ H }} class="q-title">{{ s.heading | default: 'Get a Fast, Accurate Quote' }}</{{ H }}>
      {% if s.subheading != blank %}<p class="q-sub">{{ s.subheading }}</p>{% endif %}
    </div>

    {%- capture form_surface_start -%}
      <div class="q-surface q-shadow-{{ s.card_shadow | default: 'md' }}" style="background: var(--q-form-bg); border-radius: var(--q-card-radius);">
        <div class="q-live" aria-live="polite" role="status"></div>
    {%- endcapture -%}
    {%- capture form_surface_end -%}
      </div>
    {%- endcapture -%}

    {%- if s.template_style == 'split' -%}
      <div class="q-split q-split--{{ s.split_media_side | default: 'right' }}">
        {{ form_surface_start }}
          {%- render 'form-dispatch',
            id: section.id,
            settings: s,
            blocks: section.blocks,
            theme_settings: g,
            eff_captcha_mode: eff_captcha_mode,
            eff_captcha_key: eff_captcha_key,
            eff_endpoint_url: eff_endpoint,
            eff_tags: eff_tags,
            eff_marketing_app: g.email_marketing_app,
            eff_marketing_proxy: g.marketing_proxy_endpoint,
            eff_marketing_map_name: g.marketing_map_name,
            eff_marketing_map_phone: g.marketing_map_phone,
            eff_marketing_map_company: g.marketing_map_company,
            eff_marketing_consent_mode: g.marketing_consent_mode,
            eff_marketing_double_opt_in: g.marketing_double_opt_in,
            eff_utm_source: g.marketing_utm_source,
            eff_utm_medium: g.marketing_utm_medium,
            eff_utm_campaign: g.marketing_utm_campaign
          -%}
          {%- if s.template_style == 'steps' -%}
            <div data-q-steps class="q-steps-ui">
              <div class="q-steps-bar"><span class="q-steps-fill"></span></div>
              <div class="q-steps-count"></div>
            </div>
          {%- endif -%}
        {{ form_surface_end }}

        <aside class="q-media">
          {% if s.split_image != blank %}
            {{ s.split_image | image_url: width: 1200 | image_tag: loading: 'lazy', alt: s.heading | default: 'Quote form media' }}
          {% endif %}
        </aside>
      </div>
    {%- else -%}
      {{ form_surface_start }}
        {%- render 'form-dispatch',
          id: section.id,
          settings: s,
          blocks: section.blocks,
          theme_settings: g,
          eff_captcha_mode: eff_captcha_mode,
          eff_captcha_key: eff_captcha_key,
          eff_endpoint_url: eff_endpoint,
          eff_tags: eff_tags,
          eff_marketing_app: g.email_marketing_app,
          eff_marketing_proxy: g.marketing_proxy_endpoint,
          eff_marketing_map_name: g.marketing_map_name,
          eff_marketing_map_phone: g.marketing_map_phone,
          eff_marketing_map_company: g.marketing_map_company,
          eff_marketing_consent_mode: g.marketing_consent_mode,
          eff_marketing_double_opt_in: g.marketing_double_opt_in,
          eff_utm_source: g.marketing_utm_source,
          eff_utm_medium: g.marketing_utm_medium,
          eff_utm_campaign: g.marketing_utm_campaign
        -%}
        {%- if s.template_style == 'steps' -%}
          <div data-q-steps class="q-steps-ui">
            <div class="q-steps-bar"><span class="q-steps-fill"></span></div>
            <div class="q-steps-count"></div>
          </div>
        {%- endif -%}
      {{ form_surface_end }}
    {%- endif -%}
  </div>

  {%- if eff_captcha_mode == 'turnstile' and eff_captcha_key != blank -%}
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" defer></script>
  {%- endif -%}
  {%- if eff_captcha_mode == 'recaptcha_v3' and eff_captcha_key != blank -%}
    <script src="https://www.google.com/recaptcha/api.js?render={{ eff_captcha_key | escape }}" defer></script>
  {%- endif -%}

  <style>
    /* ===== Quadratum – Quote Form (scoped) ===== */
    #{{ section.id }} { position: relative; padding: var(--q-pad-y) var(--q-pad-x); overflow: hidden; }
    #{{ section.id }} .q-anchor{ position: relative; top: -80px; height: 0; width: 0; display: block; visibility: hidden; }

    #{{ section.id }} .q-overlay { position:absolute; inset:0; background: var(--q-overlay); pointer-events:none; }
    #{{ section.id }} .q-bg-video { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:0; }
    #{{ section.id }} .q-wrap { max-width: var(--q-cont-lg, 72rem); margin: 0 auto; position: relative; z-index: 1; }
    #{{ section.id }} .q-wrap-full { width: 100%; margin: 0; position: relative; z-index: 1; }
    #{{ section.id }} .q-head { margin-bottom: var(--space-md, 1rem); }
    #{{ section.id }} .q-kicker { color: var(--text-muted, #6b7280); font-weight: 600; margin: 0 0 .25rem 0; }
    #{{ section.id }} .q-title { margin: 0 0 .5rem 0; line-height: 1.1; }
    #{{ section.id }} .q-sub { color: var(--text-muted, #6b7280); margin: 0 0 1rem 0; }

    #{{ section.id }} .q-surface { padding: var(--space-lg, 1.5rem); }
    #{{ section.id }} .q-shadow-none { box-shadow: none; }
    #{{ section.id }} .q-shadow-sm { box-shadow: 0 1px 2px rgba(0,0,0,.06); }
    #{{ section.id }} .q-shadow-md { box-shadow: 0 6px 18px rgba(0,0,0,.08); }
    #{{ section.id }} .q-shadow-lg { box-shadow: 0 12px 32px rgba(0,0,0,.12); }

    #{{ section.id }} .q-split { display: grid; gap: var(--space-md, 1rem); align-items: stretch; }
    @media (min-width: 768px){
      #{{ section.id }} .q-split { grid-template-columns: 1fr 1fr; }
      #{{ section.id }} .q-split--left { direction: rtl; }
      #{{ section.id }} .q-split--left > * { direction: ltr; }
    }
    #{{ section.id }} .q-media img { width: 100%; height: 100%; object-fit: cover; border-radius: var(--q-card-radius); }

    /* Form chrome */
    #{{ section.id }} .q-form { display: grid; gap: var(--space-md, 1rem); }
    #{{ section.id }} .q-fields { display: grid; gap: var(--space-md, 1rem); }
    #{{ section.id }} .q-field { display: grid; gap: .375rem; }
    #{{ section.id }} .q-field.half { grid-column: span 1; }
    @media (min-width: 768px){
      #{{ section.id }} .q-fields { grid-template-columns: 1fr 1fr; }
      #{{ section.id }} .q-field:not(.half) { grid-column: 1 / -1; }
    }
    #{{ section.id }} .q-label { font-weight: 600; }

    /* Text-like controls only (prevents checkbox/radio from inheriting padding/width) */
    #{{ section.id }} input.q-input:not([type="checkbox"]):not([type="radio"]),
    #{{ section.id }} select.q-select,
    #{{ section.id }} textarea.q-textarea {
      width: 100%;
      border-radius: var(--q-input-radius);
      border: var(--q-input-border) solid var(--border-color, #e5e7eb);
      padding: .65rem .8rem;
      background: #fff;
      color: var(--text-base, #111111);
    }

    #{{ section.id }} .q-textarea { min-height: 120px; resize: vertical; }

    #{{ section.id }} .q-radio { display: inline-flex; align-items: center; gap: .5rem; margin-right: 1rem; }

    /* Checkbox & radio control sizing */
    #{{ section.id }} input.q-input[type="checkbox"],
    #{{ section.id }} input.q-input[type="radio"]{
      width: auto !important;
      min-width: 1rem;
      max-width: 1rem;
      height: 1.05rem;
      padding: 0 !important;
      margin: 0;
      display: inline-block;
      vertical-align: middle;
    }

    #{{ section.id }} .q-error { color: var(--color-error, #dc2626); font-size: .875rem; min-height: 1rem; }
    #{{ section.id }} [aria-invalid="true"] { outline: 2px solid rgba(220,38,38,.3); }

    /* Buttons */
    #{{ section.id }} .q-btn { display:inline-flex; align-items:center; justify-content:center; gap:.5rem; padding:.75rem 1rem; border-radius: var(--button-radius, 12px); border-width: var(--button_border_width, 1px); cursor:pointer; }
    #{{ section.id }} .q-btn--solid { background: var(--color_primary, #2563eb); color: var(--text_on_color, #fff); border: 1px solid transparent; }
    #{{ section.id }} .q-btn--outline { background: transparent; color: var(--color_primary, #2563eb); border: 1px solid currentColor; }
    #{{ section.id }} .q-btn--ghost { background: transparent; color: var(--color_primary, #2563eb); border: 1px solid transparent; }
    #{{ section.id }} .q-btn[aria-busy="true"] { opacity: .7; pointer-events: none; }

    /* Steps UI */
    #{{ section.id }}[data-template="steps"] .q-steps-ui { margin-top: .75rem; }
    #{{ section.id }} .q-steps-bar { position: relative; height: 6px; background: rgba(0,0,0,.08); border-radius: 999px; overflow: hidden; }
    #{{ section.id }} .q-steps-fill { position: absolute; inset: 0 auto 0 0; width: 0%; background: var(--color_primary, #2563eb); }
    #{{ section.id }} .q-steps-count { margin-top: .5rem; font-size: .875rem; color: var(--text-muted, #6b7280); }
    #{{ section.id }} .q-step { display: none; }
    #{{ section.id }} .q-step.is-active { display: grid; gap: var(--space-md, 1rem); }

    /* Visibility helpers */
    #{{ section.id }} .is-hidden { display: none !important; }
    @media (max-width: 767.98px){ #{{ section.id }}.is-hidden-m { display:none !important; } }
    @media (min-width: 768px){ #{{ section.id }}.is-hidden-d { display:none !important; } }
  </style>
</section>

{% schema %}
{
  "name": "Forms – Quote (Full)",
  "tag": "section",
  "class": "q-form q-form--quote-full",
  "settings": [
    { "type": "text", "id": "aria_label", "label": "ARIA label", "default": "Quote request form" },

    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "template_style",
      "label": "Template style",
      "default": "card",
      "options": [
        { "value": "card", "label": "Card" },
        { "value": "split", "label": "Split" },
        { "value": "steps", "label": "Steps" }
      ]
    },
    {
      "type": "select",
      "id": "split_media_side",
      "label": "Split media side",
      "default": "right",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ]
    },
    { "type": "image_picker", "id": "split_image", "label": "Split media image" },

    { "type": "header", "content": "Background & Overlay (root only)" },
    { "type": "image_picker", "id": "bg_image", "label": "Background image" },
    { "type": "url", "id": "bg_video", "label": "Background video URL (MP4)" },
    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#ffffff" },
    {
      "type": "select",
      "id": "overlay_type",
      "label": "Overlay type",
      "default": "none",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "solid", "label": "Solid" },
        { "value": "gradient", "label": "Gradient" }
      ]
    },
    { "type": "color", "id": "overlay_color", "label": "Overlay color", "default": "#000000" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay opacity (%)", "min": 0, "max": 100, "step": 1, "default": 24 },
    { "type": "color", "id": "gradient_from", "label": "Gradient from", "default": "#000000" },
    { "type": "color", "id": "gradient_to", "label": "Gradient to", "default": "#000000" },
    { "type": "range", "id": "gradient_angle", "label": "Gradient angle", "min": 0, "max": 360, "step": 5, "default": 0 },

    { "type": "header", "content": "Content" },
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "Request a quote" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Get a Fast, Accurate Quote" },
    {
      "type": "select",
      "id": "heading_level",
      "label": "Heading level",
      "default": "h2",
      "options": [
        { "value": "h2", "label": "H2" },
        { "value": "h3", "label": "H3" }
      ]
    },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Tell us a few details and we’ll reply within 1 business day." },
    { "type": "text", "id": "success_text", "label": "Success message", "default": "Thanks! Your request has been sent." },
    { "type": "text", "id": "error_text", "label": "Error message", "default": "Please fix the highlighted fields and try again." },

    { "type": "header", "content": "Destination" },
    {
      "type": "select",
      "id": "destination",
      "label": "Submission destination",
      "default": "shopify_contact",
      "options": [
        { "value": "shopify_contact", "label": "Shopify Contact" },
        { "value": "shopify_customer", "label": "Shopify Customer" },
        { "value": "custom_endpoint", "label": "Custom endpoint" }
      ]
    },
    { "type": "url", "id": "endpoint_url", "label": "Custom endpoint URL (overrides global)" },
    { "type": "text", "id": "hidden_tags", "label": "Hidden tags (comma-separated)", "default": "form, web, quote-full" },

    { "type": "header", "content": "Captcha" },
    {
      "type": "select",
      "id": "captcha_mode",
      "label": "Captcha mode (overrides global)",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Inherit from Theme → Integrations" },
        { "value": "none", "label": "None" },
        { "value": "turnstile", "label": "Cloudflare Turnstile" },
        { "value": "recaptcha_v3", "label": "reCAPTCHA v3" }
      ]
    },
    { "type": "text", "id": "captcha_site_key", "label": "Captcha site key (override)" },

    { "type": "header", "content": "Button & Inputs" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Request Quote" },
    {
      "type": "select",
      "id": "button_variant",
      "label": "Button variant",
      "default": "inherit",
      "options": [
        { "value": "inherit", "label": "Inherit (theme default)" },
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" },
        { "value": "ghost", "label": "Ghost" }
      ]
    },
    { "type": "color", "id": "form_bg", "label": "Form surface color", "default": "#ffffff" },
    { "type": "range", "id": "input_radius", "label": "Input radius (px)", "min": 0, "max": 20, "step": 1, "default": 10 },
    { "type": "range", "id": "input_border", "label": "Input border (px)", "min": 0, "max": 3, "step": 1, "default": 1 },

    { "type": "header", "content": "Sizing & Visibility" },
    {
      "type": "select",
      "id": "container_mode",
      "label": "Container width",
      "default": "contained",
      "options": [
        { "value": "contained", "label": "Contained" },
        { "value": "full", "label": "Full width" }
      ]
    },
    { "type": "range", "id": "padding_y", "label": "Section padding Y (px)", "min": 0, "max": 200, "step": 4, "default": 48 },
    { "type": "range", "id": "padding_x", "label": "Section padding X (px)", "min": 0, "max": 120, "step": 4, "default": 24 },
    { "type": "range", "id": "card_radius", "label": "Card radius (px)", "min": 0, "max": 28, "step": 1, "default": 16 },
    {
      "type": "select",
      "id": "card_shadow",
      "label": "Card shadow",
      "default": "md",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" }
      ]
    },
    { "type": "text", "id": "anchor_id", "label": "Anchor id (optional)" },
    { "type": "checkbox", "id": "hide_on_mobile", "label": "Hide on mobile", "default": false },
    { "type": "checkbox", "id": "hide_on_desktop", "label": "Hide on desktop", "default": false }
  ],
  "blocks": [
    {
      "type": "field",
      "name": "Field",
      "settings": [
        {
          "type": "select",
          "id": "field_type",
          "label": "Field type",
          "default": "text",
          "options": [
            { "value": "text", "label": "Text" },
            { "value": "email", "label": "Email" },
            { "value": "tel", "label": "Phone" },
            { "value": "textarea", "label": "Textarea" },
            { "value": "select", "label": "Select" },
            { "value": "radio", "label": "Radio" },
            { "value": "checkbox", "label": "Checkbox" },
            { "value": "consent", "label": "Consent" },
            { "value": "hidden", "label": "Hidden" },
            { "value": "number", "label": "Number" },
            { "value": "url", "label": "URL" },
            { "value": "date", "label": "Date" },
            { "value": "time", "label": "Time" },
            { "value": "password", "label": "Password" },
            { "value": "file", "label": "File" },
            { "value": "html", "label": "HTML" }
          ]
        },
        { "type": "text", "id": "name_attr", "label": "Input name", "default": "contact[field]" },
        { "type": "text", "id": "label", "label": "Label", "default": "Field" },
        { "type": "text", "id": "placeholder", "label": "Placeholder" },
        { "type": "checkbox", "id": "required", "label": "Required", "default": false },
        { "type": "text", "id": "help_text", "label": "Help text" },
        { "type": "text", "id": "default_value", "label": "Default value" },
        { "type": "textarea", "id": "options", "label": "Options (value|label per line)" },
        { "type": "text", "id": "accept", "label": "Accept (file types)" },
        {
          "type": "select",
          "id": "width",
          "label": "Width",
          "default": "full",
          "options": [
            { "value": "full", "label": "Full" },
            { "value": "half", "label": "Half" }
          ]
        },
        { "type": "header", "content": "Conditional display" },
        { "type": "checkbox", "id": "condition_enable", "label": "Enable condition", "default": false },
        { "type": "text", "id": "condition_field", "label": "When field name is" },
        {
          "type": "select",
          "id": "condition_operator",
          "label": "Operator",
          "default": "equals",
          "options": [
            { "value": "equals", "label": "Equals" },
            { "value": "contains", "label": "Contains" },
            { "value": "checked", "label": "Checked" }
          ]
        },
        { "type": "text", "id": "condition_value", "label": "Value" },
        { "type": "header", "content": "HTML field" },
        { "type": "richtext", "id": "html_content", "label": "HTML content", "default": "<p>Rich text</p>" }
      ]
    },
    {
      "type": "step",
      "name": "Step (for Steps layout)",
      "settings": [
        { "type": "text", "id": "step_title", "label": "Step title", "default": "Step" },
        { "type": "textarea", "id": "step_desc", "label": "Step description" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Forms - Quote (Full)",
      "category": "Forms",
      "settings": {
        "template_style": "card",
        "destination": "shopify_contact",
        "button_label": "Request Quote",
        "hidden_tags": "form, web, quote-full"
      },
      "blocks": [
        { "type": "field", "settings": { "field_type": "text", "name_attr": "contact[name]", "label": "Name", "required": true, "width": "full" } },
        { "type": "field", "settings": { "field_type": "email", "name_attr": "contact[email]", "label": "Email", "required": true, "width": "full" } },
        { "type": "field", "settings": { "field_type": "tel", "name_attr": "contact[phone]", "label": "Phone", "required": false, "width": "full" } },
        { "type": "field", "settings": { "field_type": "text", "name_attr": "contact[company]", "label": "Company", "required": false, "width": "full" } },
        { "type": "field", "settings": { "field_type": "select", "name_attr": "contact[project_type]", "label": "Project type", "options": "website|Website\nbranding|Branding\necommerce|Ecommerce", "required": false, "width": "half" } },
        { "type": "field", "settings": { "field_type": "select", "name_attr": "contact[budget]", "label": "Budget", "options": "<10k|Under $10k\n10-25k|$10–25k\n25-50k|$25–50k\n50k+|$50k+", "required": false, "width": "half" } },
        { "type": "field", "settings": { "field_type": "select", "name_attr": "contact[timeline]", "label": "Timeline", "options": "asap|ASAP\n1-2mo|1–2 months\n3-6mo|3–6 months", "required": false, "width": "half" } },
        { "type": "field", "settings": { "field_type": "textarea", "name_attr": "contact[body]", "label": "Message", "required": false, "width": "full" } },
        { "type": "field", "settings": { "field_type": "consent", "name_attr": "contact[consent]", "label": "I agree to be contacted about my request", "required": false, "width": "full" } }
      ]
    }
  ]
}
{% endschema %}

{% javascript %}{% endjavascript %}
