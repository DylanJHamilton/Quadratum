/* Quadratum â€” Forms (global styles for sections using .q-form) */
/* Scope everything to the section root class */
.q-form{ position:relative; color: var(--q-text, #111); }

/* ===== Layout scaffolding ===== */
.q-form .q-bleed{ position:relative; }
.q-form .q-bg{ position:absolute; inset:0; z-index:0; overflow:hidden; pointer-events:none; }
.q-form .q-media{ width:100%; height:100%; object-fit:cover; display:block; }
.q-form .q-overlay{ position:absolute; inset:0; pointer-events:none; }
.q-form .q-layer{ position:relative; z-index:1; padding: var(--q-pad-y, 64px) 0; }

/* container widths (derive from theme tokens with fallbacks) */
.q-form .q-wrap{
  max-width: var(--q-cont, var(--q-cont-lg, 1152px));
  margin: 0 auto;
  padding-left: var(--q-pad-x, 24px);
  padding-right: var(--q-pad-x, 24px);
}

/* grid for Split template */
.q-form .q-grid{ display:grid; gap:24px; align-items:stretch; }
@media (min-width: 768px){
  .q-form .q-grid.split-left  { grid-template-columns: 1.1fr 1fr; }
  .q-form .q-grid.split-right { grid-template-columns: 1fr 1.1fr; }
}

/* card */
.q-form .q-card{
  background: var(--q-form-bg, #fff);
  border-radius: var(--q-card-br, 16px);
  padding: 28px;
  box-shadow:
    0 1px 2px rgba(0,0,0,.06),
    0 8px 24px rgba(0,0,0,.08);
}
.q-form .q-media-card{ border-radius: var(--q-card-br, 16px); overflow:hidden; background:#000; min-height: 240px; }

/* headings */
.q-form .q-head .q-kicker{ color: var(--q-muted, #6b7280); font-size:.95rem; margin:0 0 4px; }
.q-form .q-head .q-heading{ margin:0 0 8px; color: var(--q-text, #111); line-height:1.2; }
.q-form .q-head .q-sub{ color: var(--q-muted, #6b7280); margin:0 0 16px; }

/* fields layout */
.q-form .q-fields{ display:flex; flex-wrap:wrap; gap:12px; }
.q-form .q-field{ width:100%; text-align:left; }
.q-form .q-field.half{ width: calc(50% - 6px); }
@media (max-width: 639.98px){ .q-form .q-field.half{ width:100%; } }

/* form controls */
.q-form .q-label{ display:block; font-weight:600; margin:8px 0 6px; color: var(--q-text, #111); }
.q-form .q-help{ font-size:.875rem; color: var(--q-muted, #6b7280); margin:4px 0 0; }
.q-form .q-input,
.q-form .q-select,
.q-form .q-textarea{
  width:100%;
  border:1px solid var(--q-input-bdr, #E5E7EB);
  border-radius: var(--q-input-br, 10px);
  padding: 12px 14px;
  background:#fff;
  color: var(--q-text, #111);
}
.q-form .q-textarea{ min-height: 120px; resize: vertical; }
.q-form .q-radio{
  display:flex; align-items:center; gap:10px; justify-content:flex-start; width:max-content;
}
.q-form .q-radio input{ margin:0; flex:0 0 auto; width: auto; }
.q-form .q-check{ width:auto; height:1.05rem; margin:0; padding:0; }

.q-form .q-error{ color: var(--q-error, #dc2626); font-size:.85rem; margin-top:6px; }
.q-form [aria-invalid="true"]{ border-color: var(--q-error, #dc2626); outline:1px solid var(--q-error, #dc2626); }

/* focus */
.q-form .q-input:focus,
.q-form .q-select:focus,
.q-form .q-textarea:focus{
  outline: 2px solid var(--q-input-focus,#93C5FD);
  outline-offset: 2px;
}

/* buttons */
.q-form .q-actions{ display:flex; gap:12px; justify-content:flex-start; }
.q-form .q-actions.is-center{ justify-content:center; }
.q-form .q-actions.is-end{ justify-content:flex-end; }

.q-form .q-btn{
  --_bg: var(--q-btn-bg, #2563eb);
  --_fg: var(--q-btn-fg, #fff);
  --_bdr: var(--q-btn-bdr, var(--q-btn-bg, #2563eb));
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px;
  padding: 12px 20px;
  border-radius: var(--q-btn-br, 12px);
  border-width: var(--q-btn-bw, 1px);
  border-style: solid;
  text-decoration:none; cursor:pointer; user-select:none;
  transition: transform .12s ease, opacity .12s ease, background-color .12s ease, color .12s ease, border-color .12s ease;
}
.q-form .q-btn.q-btn--solid   { background: var(--_bg); color: var(--_fg); border-color: var(--_bg); }
.q-form .q-btn.q-btn--outline { background: transparent; color: var(--_bg); border-color: var(--_bg); }
.q-form .q-btn.q-btn--ghost   { background: transparent; color: var(--_bg); border-color: transparent; }
.q-form .q-btn[disabled]{ opacity:.6; pointer-events:none; }
.q-form .q-btn:not([disabled]):hover{ opacity: calc(var(--q-btn-hover-op, 92) / 100); }
.q-form .q-btn:not([disabled]):active{ transform: scale(var(--q-btn-active-scale, .98)); }
.q-form .q-btn.is-full{ width:100%; }

/* live region */
.q-form .q-live{ position:relative; margin:8px 0 0; min-height: 1.2em; }
.q-form .q-live .ok{ color: var(--q-success, #16a34a); }
.q-form .q-live .bad{ color: var(--q-error, #dc2626); }

/* Steps */
.q-form [data-q-steps]{ margin-top: 10px; }
.q-form .q-steps-nav{ display:flex; align-items:center; gap:10px; margin:0 0 12px; }
.q-form .q-steps-bar{ flex:1; height:6px; background: rgba(0,0,0,.08); border-radius:6px; overflow:hidden; }
.q-form .q-steps-fill{ height:100%; background: var(--q-btn-bg, #2563eb); width:0%; transition: width .2s ease; }
.q-form .q-steps-count{ font-size:.875rem; color: var(--q-muted, #6b7280); }
.q-form .q-steps-actions{ display:flex; gap:8px; margin-top:16px; }
.q-form .q-step{ display:none; }
.q-form .q-step.is-active{ display:block; }

/* Conditional */
.q-form .is-hidden{ display:none !important; }

/* Native select + arrow (color via --q-select-arrow or falls back to btn color) */
.q-form .q-select-wrap{ position:relative; }
.q-form .q-select{
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
  padding-right: 42px; /* room for chevron */
  background-color:#fff;
  background-repeat:no-repeat;
  background-position: right 12px center;
}
.q-form .q-select-wrap::after{
  content:""; position:absolute; right:12px; top:50%; transform:translateY(-50%);
  width: 10px; height: 6px;
  background: currentColor;
  -webkit-mask: radial-gradient(circle 5px at 50% 100%, #000 98%, transparent 100%) top/10px 6px no-repeat,
                linear-gradient(#000 0 0) bottom/10px 2px no-repeat;
          mask: radial-gradient(circle 5px at 50% 100%, #000 98%, transparent 100%) top/10px 6px no-repeat,
                linear-gradient(#000 0 0) bottom/10px 2px no-repeat;
  color: var(--q-select-arrow, var(--q-btn-bg, #2563eb));
  opacity:.6; pointer-events:none;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .q-form .q-btn { transition: none; }
  .q-form .q-steps-fill{ transition: none; }
}

/* Windows high-contrast improvement */
@media (forced-colors: active){
  .q-form .q-select{ background: ButtonFace; color: ButtonText; }
}


/* ===== Fields Layout (Improved for half-width alignment) ===== */
.q-form .q-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 16px; /* increased from 12px for breathing room */
  align-items: flex-start;
}

/* Field widths */
.q-form .q-field {
  flex: 1 1 100%;
  min-width: 220px;
  text-align: left;
}

/* Half-width fields auto-space evenly without calc hacks */
.q-form .q-field.half {
  flex: 1 1 calc(50% - 8px);
}

/* Optional: thirds, quarters (for finer layouts later) */
.q-form .q-field.third  { flex: 1 1 calc(33.333% - 10px); }
.q-form .q-field.quarter{ flex: 1 1 calc(25% - 10px); }

@media (max-width: 639.98px) {
  .q-form .q-field.half,
  .q-form .q-field.third,
  .q-form .q-field.quarter {
    flex: 1 1 100%;
  }
}
