{%- comment -%}
  Quadratum — Content · Text (Centered / Full Width)
  File: sections/basic-content-helper-text-centered-full-width.liquid

  Requirements:
  - No JS
  - SEO-safe: kicker is not a heading, title is h2, body is richtext
  - A11Y-safe reading order
  - Full-width wrapper, inner container width via max_width
  - Alignment: left (default) or center
  - No inline styles; all colors via scoped CSS variables
  - Designer controls via CSS variables (no duplicated rules)
  - Hide entirely if all fields empty
{%- endcomment -%}

{%- liquid
  assign s = section.settings

  assign kicker_txt = s.kicker | strip
  assign title_txt  = s.title  | strip

  assign body_plain = s.body | strip_html | replace: '&nbsp;', ' ' | strip

  assign has_kicker = false
  assign has_title  = false
  assign has_body   = false

  if kicker_txt != blank
    assign has_kicker = true
  endif

  if title_txt != blank
    assign has_title = true
  endif

  if body_plain != blank
    assign has_body = true
  endif

  if has_kicker == false and has_title == false and has_body == false
    break
  endif

  assign align = s.alignment | default: 'left'
  assign width = s.max_width | default: 'default'
  assign surface = s.surface | default: 'none'
-%}

<style>
  /* Scoped variables (no inline styles) */
  #shopify-section-{{ section.id }} {
    --q-ct-pad-y: {{ s.pad_y | default: 56 }}px;
    --q-ct-gap: {{ s.element_gap | default: 12 }}px;

    /* Width tokens (fallbacks are safe) */
    --q-ct-max-w: var(--q-container-default, 960px);
    --q-ct-max-w-narrow: var(--q-container-narrow, 720px);
    --q-ct-max-w-wide: var(--q-container-wide, 1200px);

    /* Typography tokens (designer adjustable via settings -> class -> vars) */
    --q-ct-title-size: var(--q-text-2xl, 1.75rem);
    --q-ct-title-weight: var(--q-font-weight-semibold, 600);
    --q-ct-body-size: var(--q-text-base, 1rem);
    --q-ct-kicker-size: var(--q-text-sm, 0.95rem);
    --q-ct-kicker-opacity: 0.72;

    /* Color tokens (can be overridden by custom colors toggle) */
    --q-ct-bg: transparent;
    --q-ct-text: var(--q-color-text, currentColor);
    --q-ct-muted: var(--q-color-text-muted, currentColor);
    --q-ct-accent: var(--q-color-accent, currentColor);
  }

  {%- if s.use_custom_colors -%}
  #shopify-section-{{ section.id }} {
    {%- if s.bg_color != blank -%} --q-ct-bg: {{ s.bg_color }}; {%- endif -%}
    {%- if s.text_color != blank -%} --q-ct-text: {{ s.text_color }}; {%- endif -%}
    {%- if s.muted_text_color != blank -%} --q-ct-muted: {{ s.muted_text_color }}; {%- endif -%}
    {%- if s.accent_color != blank -%} --q-ct-accent: {{ s.accent_color }}; {%- endif -%}
  }
  {%- endif -%}

  /* Width modifiers */
  #shopify-section-{{ section.id }} .q-ct.is-width-narrow  { --q-ct-max-w: var(--q-ct-max-w-narrow); }
  #shopify-section-{{ section.id }} .q-ct.is-width-default { --q-ct-max-w: var(--q-container-default, 960px); }
  #shopify-section-{{ section.id }} .q-ct.is-width-wide    { --q-ct-max-w: var(--q-ct-max-w-wide); }

  /* Surface modifiers (token-first, custom uses --q-ct-bg) */
  #shopify-section-{{ section.id }} .q-ct.is-surface-none { background: transparent; }
  #shopify-section-{{ section.id }} .q-ct.is-surface-subtle { background: var(--q-surface-1, var(--q-color-surface-1, transparent)); }
  #shopify-section-{{ section.id }} .q-ct.is-surface-contrast { background: var(--q-surface-2, var(--q-color-surface-2, transparent)); }
  #shopify-section-{{ section.id }} .q-ct.is-surface-custom { background: var(--q-ct-bg); }

  /* Base */
  #shopify-section-{{ section.id }} .q-ct {
    width: 100%;
    padding-block: var(--q-ct-pad-y);
    color: var(--q-ct-text);
  }

  #shopify-section-{{ section.id }} .q-ct__inner {
    width: 100%;
    max-width: var(--q-ct-max-w);
    margin-inline: auto;
    padding-inline: var(--q-page-gutter, var(--q-container-gutter, 18px));
  }

  #shopify-section-{{ section.id }} .q-ct__stack {
    display: flex;
    flex-direction: column;
    gap: var(--q-ct-gap);
  }

  /* Alignment modifiers */
  #shopify-section-{{ section.id }} .q-ct.is-align-left .q-ct__stack { text-align: left; }
  #shopify-section-{{ section.id }} .q-ct.is-align-center .q-ct__stack { text-align: center; }

  /* Kicker */
  #shopify-section-{{ section.id }} .q-ct__kicker {
    margin: 0;
    font-size: var(--q-ct-kicker-size);
    opacity: var(--q-ct-kicker-opacity);
    color: var(--q-ct-muted);
    letter-spacing: var(--q-tracking-wide, 0.02em);
  }

  /* Title */
  #shopify-section-{{ section.id }} .q-ct__title {
    margin: 0;
    font-size: var(--q-ct-title-size);
    font-weight: var(--q-ct-title-weight);
    line-height: var(--q-leading-tight, 1.15);
    text-wrap: balance;
  }

  /* Body */
  #shopify-section-{{ section.id }} .q-ct__body {
    font-size: var(--q-ct-body-size);
    line-height: var(--q-leading-relaxed, 1.6);
    color: var(--q-ct-text);
  }

  #shopify-section-{{ section.id }} .q-ct__body > :first-child { margin-top: 0; }
  #shopify-section-{{ section.id }} .q-ct__body > :last-child { margin-bottom: 0; }

  /* Richtext links: visible + keyboard accessible */
  #shopify-section-{{ section.id }} .q-ct__body a {
    color: var(--q-ct-accent);
    text-decoration: underline;
    text-decoration-thickness: from-font;
    text-underline-offset: 0.18em;
  }
  #shopify-section-{{ section.id }} .q-ct__body a:focus-visible {
    outline: 2px solid var(--q-ct-accent);
    outline-offset: 2px;
    border-radius: var(--q-radius-sm, 6px);
  }

  /* Designer-driven typography controls (classes -> vars) */
  /* Title size */
  #shopify-section-{{ section.id }} .q-ct.is-title-size-lg  { --q-ct-title-size: var(--q-text-xl, 1.5rem); }
  #shopify-section-{{ section.id }} .q-ct.is-title-size-xl  { --q-ct-title-size: var(--q-text-2xl, 1.75rem); }
  #shopify-section-{{ section.id }} .q-ct.is-title-size-2xl { --q-ct-title-size: var(--q-text-3xl, 2rem); }

  /* Title weight */
  #shopify-section-{{ section.id }} .q-ct.is-title-weight-regular { --q-ct-title-weight: var(--q-font-weight-regular, 400); }
  #shopify-section-{{ section.id }} .q-ct.is-title-weight-medium  { --q-ct-title-weight: var(--q-font-weight-medium, 500); }
  #shopify-section-{{ section.id }} .q-ct.is-title-weight-semibold{ --q-ct-title-weight: var(--q-font-weight-semibold, 600); }
  #shopify-section-{{ section.id }} .q-ct.is-title-weight-bold    { --q-ct-title-weight: var(--q-font-weight-bold, 700); }

  /* Body size */
  #shopify-section-{{ section.id }} .q-ct.is-body-size-sm   { --q-ct-body-size: var(--q-text-sm, 0.95rem); }
  #shopify-section-{{ section.id }} .q-ct.is-body-size-base { --q-ct-body-size: var(--q-text-base, 1rem); }
  #shopify-section-{{ section.id }} .q-ct.is-body-size-lg   { --q-ct-body-size: var(--q-text-lg, 1.125rem); }

  /* Kicker size */
  #shopify-section-{{ section.id }} .q-ct.is-kicker-size-xs   { --q-ct-kicker-size: var(--q-text-xs, 0.85rem); }
  #shopify-section-{{ section.id }} .q-ct.is-kicker-size-sm   { --q-ct-kicker-size: var(--q-text-sm, 0.95rem); }
  #shopify-section-{{ section.id }} .q-ct.is-kicker-size-base { --q-ct-kicker-size: var(--q-text-base, 1rem); }

  /* Kicker opacity */
  #shopify-section-{{ section.id }} .q-ct.is-kicker-opacity-60 { --q-ct-kicker-opacity: 0.60; }
  #shopify-section-{{ section.id }} .q-ct.is-kicker-opacity-72 { --q-ct-kicker-opacity: 0.72; }
  #shopify-section-{{ section.id }} .q-ct.is-kicker-opacity-84 { --q-ct-kicker-opacity: 0.84; }
</style>

<section
  class="q-ct
    is-align-{{ align }}
    is-width-{{ width }}
    is-title-size-{{ s.title_size | default: 'xl' }}
    is-title-weight-{{ s.title_weight | default: 'semibold' }}
    is-body-size-{{ s.body_size | default: 'base' }}
    is-kicker-size-{{ s.kicker_size | default: 'sm' }}
    is-kicker-opacity-{{ s.kicker_opacity | default: '72' }}
    {%- if s.use_custom_colors -%} is-surface-custom{%- else -%} is-surface-{{ surface }}{%- endif -%}
  "
>
  <div class="q-ct__inner">
    <div class="q-ct__stack">
      {%- if has_kicker -%}
        <p class="q-ct__kicker">{{ kicker_txt }}</p>
      {%- endif -%}

      {%- if has_title -%}
        <h2 class="q-ct__title">{{ title_txt }}</h2>
      {%- endif -%}

      {%- if has_body -%}
        <div class="q-ct__body rte">
          {{ s.body }}
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Basic Text Content",
  "tag": "section",
  "class": "q-section q-section--content-text",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker",
      "default": "Optional kicker (short context line)"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "A clear section title that reads well anywhere"
    },
    {
      "type": "richtext",
      "id": "body",
      "label": "Body",
      "default": "<p>Use this block for introductions, explanations, transitions, or disclaimers. Keep it calm and readable—this section is designed to appear multiple times on a page without visual noise.</p>"
    },

    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Alignment",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "select",
      "id": "max_width",
      "label": "Max width",
      "default": "default",
      "options": [
        { "value": "narrow", "label": "Narrow" },
        { "value": "default", "label": "Default" },
        { "value": "wide", "label": "Wide" }
      ]
    },

    {
      "type": "header",
      "content": "Design controls"
    },
    {
      "type": "select",
      "id": "title_size",
      "label": "Title size",
      "default": "xl",
      "options": [
        { "value": "lg", "label": "Large" },
        { "value": "xl", "label": "Extra large" },
        { "value": "2xl", "label": "2× extra large" }
      ]
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title weight",
      "default": "semibold",
      "options": [
        { "value": "regular", "label": "Regular" },
        { "value": "medium", "label": "Medium" },
        { "value": "semibold", "label": "Semibold" },
        { "value": "bold", "label": "Bold" }
      ]
    },
    {
      "type": "select",
      "id": "body_size",
      "label": "Body size",
      "default": "base",
      "options": [
        { "value": "sm", "label": "Small" },
        { "value": "base", "label": "Base" },
        { "value": "lg", "label": "Large" }
      ]
    },
    {
      "type": "select",
      "id": "kicker_size",
      "label": "Kicker size",
      "default": "sm",
      "options": [
        { "value": "xs", "label": "Extra small" },
        { "value": "sm", "label": "Small" },
        { "value": "base", "label": "Base" }
      ]
    },
    {
      "type": "select",
      "id": "kicker_opacity",
      "label": "Kicker opacity",
      "default": "72",
      "options": [
        { "value": "60", "label": "60%" },
        { "value": "72", "label": "72%" },
        { "value": "84", "label": "84%" }
      ]
    },
    {
      "type": "range",
      "id": "element_gap",
      "label": "Spacing between elements",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 12
    },

    {
      "type": "header",
      "content": "Standard Quadratum controls"
    },
    {
      "type": "range",
      "id": "pad_y",
      "label": "Vertical padding",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 56
    },
    {
      "type": "select",
      "id": "surface",
      "label": "Background surface",
      "default": "none",
      "options": [
        { "value": "none", "label": "None (transparent)" },
        { "value": "subtle", "label": "Subtle" },
        { "value": "contrast", "label": "Contrast" }
      ]
    },

    {
      "type": "header",
      "content": "Custom colors"
    },
    {
      "type": "checkbox",
      "id": "use_custom_colors",
      "label": "Use custom colors",
      "default": false
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "muted_text_color",
      "label": "Muted text color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color (links)",
      "default": "#111111"
    }
  ],
  "presets": [
    {
      "name": "Content · Text (Centered / Full Width)",
      "category": "Basic Content Helpers"
    }
  ]
}
{% endschema %}
