{% comment %} Standout Banner Panel Snippet {% endcomment %}

{%- assign pos_map = 'top-left:start start,top-center:start center,top-right:start end,center-left:center start,center-center:center center,center-right:center end,bottom-left:end start,bottom-center:end center,bottom-right:end end' | split: ',' -%}
{%- assign pos_desktop = content_position | default: 'center-center' -%}
{%- assign pos_mobile = content_position_mobile | default: 'center-center' -%}
{%- assign pos_d_css = 'center center' -%}
{%- assign pos_m_css = 'center center' -%}
{%- for pair in pos_map -%}
  {%- assign parts = pair | split: ':' -%}
  {%- if parts[0] == pos_desktop -%}{%- assign pos_d_css = parts[1] -%}{%- endif -%}
  {%- if parts[0] == pos_mobile -%}{%- assign pos_m_css = parts[1] -%}{%- endif -%}
{%- endfor -%}

{%- assign max_w = 'max-w-xl' -%}
{%- if content_max_width == 'narrow' -%}{%- assign max_w = 'max-w-md' -%}{%- endif -%}
{%- if content_max_width == 'wide' -%}{%- assign max_w = 'max-w-2xl' -%}{%- endif -%}

{%- assign overlay_style = '' -%}
{%- if overlay_type == 'solid' -%}
  {%- assign oc = overlay_color | default: '#000000' -%}
  {%- assign oo = overlay_opacity | default: 40 | divided_by: 100.0 -%}
  {%- assign overlay_style = 'background-color: ' | append: oc | append: '; opacity: ' | append: oo | append: ';' -%}
{%- elsif overlay_type == 'gradient' -%}
  {%- assign g1 = grad_start | default: '#000000' -%}
  {%- assign g2 = grad_end | default: '#000000' -%}
  {%- assign g1o = grad_start_opacity | default: 60 | divided_by: 100.0 -%}
  {%- assign g2o = grad_end_opacity | default: 0 | divided_by: 100.0 -%}
  {%- assign ang = grad_angle | default: 180 -%}
  {%- assign g1c = g1 | color_modify: 'alpha', g1o -%}
  {%- assign g2c = g2 | color_modify: 'alpha', g2o -%}
  {%- assign overlay_style = 'background: linear-gradient(' | append: ang | append: 'deg, ' | append: g1c | append: ', ' | append: g2c | append: ');' -%}
{%- endif -%}

<div class="q-sb-panel" data-panel="{{ panel_id }}">
  <div class="q-sb-media">
    {% if video_url != blank %}
      <video class="q-sb-bg" autoplay loop muted playsinline preload="metadata"
        {% if image != blank %}poster="{{ image | image_url: width: 1600 }}"{% endif %}>
        <source src="{{ video_url }}" type="video/mp4">
      </video>
    {% elsif image != blank %}
      {% if mobile_image != blank %}
        <img src="{{ mobile_image | image_url: width: 960 }}" alt="" class="q-sb-bg q-sb-mobile-only" loading="eager">
      {% endif %}
      <img src="{{ image | image_url: width: 1920 }}" alt="" class="q-sb-bg {% if mobile_image != blank %}q-sb-desktop-only{% endif %}" loading="eager">
    {% else %}
      <div class="q-sb-bg" style="background-color: {{ bg_color | default: '#000000' }};"></div>
    {% endif %}
    
    {% if overlay_type != 'none' %}
      <div class="q-sb-overlay" style="{{ overlay_style }}"></div>
    {% endif %}
  </div>

  <div class="q-sb-content" style="place-items: {{ pos_m_css }};" data-desktop-align="{{ pos_d_css }}">
    <div class="q-sb-inner {{ max_w }}" style="text-align: {{ text_alignment | default: 'center' }};">
      {% if accent_text != blank %}
        <p class="q-sb-accent" style="color: {{ accent_color | default: '#ffffff' }};">{{ accent_text }}</p>
      {% endif %}
      
      {% if heading != blank %}
        <h2 class="q-sb-heading" style="color: {{ heading_color | default: '#ffffff' }};">{{ heading }}</h2>
      {% endif %}
      
      {% if subheading != blank %}
        <p class="q-sb-subheading" style="color: {{ subheading_color | default: '#ffffff' }};">{{ subheading }}</p>
      {% endif %}
      
      {% if cta_text != blank or cta2_text != blank %}
        <div class="q-sb-ctas">
          {% if cta_text != blank %}
            <a href="{{ cta_link | default: '#' }}" class="q-btn q-btn--{{ cta_variant | default: 'luxury' }}">{{ cta_text }}</a>
          {% endif %}
          {% if cta2_text != blank %}
            <a href="{{ cta2_link | default: '#' }}" class="q-btn q-btn--{{ cta2_variant | default: 'outline' }}">{{ cta2_text }}</a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
