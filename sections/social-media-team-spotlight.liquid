{%- comment -%}
  sections/social-media-team-spotlight.liquid
  Quadratum — Social Media · Team / Leadership Spotlight (LinkedIn-aware, manual)
{%- endcomment -%}

{%- if section.settings.enable_section -%}
  {%- liquid
    assign s = section.settings
    assign align = s.align | default: 'left'
  -%}

  <section
    id="social-media-team-spotlight-{{ section.id }}"
    class="q-section q-team-spotlight q-team-spotlight--align-{{ align }}"
    aria-label="{{ s.aria_label | escape }}"
  >
    <div class="q-section__inner">
      {%- if s.kicker != blank or s.heading != blank or s.body != blank -%}
        <header class="q-section__header q-section__header--{{ align }}">
          {%- if s.kicker != blank -%}
            <p class="q-section__kicker">{{ s.kicker | escape }}</p>
          {%- endif -%}

          {%- if s.heading != blank -%}
            <h2 class="q-section__heading">{{ s.heading | escape }}</h2>
          {%- endif -%}

          {%- if s.body != blank -%}
            <div class="q-section__body">{{ s.body | escape | newline_to_br }}</div>
          {%- endif -%}
        </header>
      {%- endif -%}

      {%- if section.blocks.size > 0 -%}
        <div class="q-team-spotlight__grid">
          {%- for block in section.blocks -%}
            {%- liquid
              assign b = block.settings

              assign avatar = b.avatar
              assign name = b.name | default: 'Alex Rivera'
              assign role = b.role | default: 'Founder & Creative Director'
              assign bio = b.bio | default: 'Short bio goes here. Share 1–3 sentences about this person and what they do.'
              assign linkedin_url = b.linkedin_url
              assign linkedin_label = b.linkedin_label | default: 'View on LinkedIn'

              assign has_linkedin = false
              if linkedin_url != blank and linkedin_url != '#'
                assign has_linkedin = true
              endif
            -%}

            <article class="q-team-spotlight__card" {{ block.shopify_attributes }}>
              <div class="q-team-spotlight__avatar-wrap">
                {%- if avatar != blank -%}
                  {{ avatar | image_url: width: 320 | image_tag: class: 'q-team-spotlight__avatar', loading: 'lazy', alt: name | escape }}
                {%- else -%}
                  <div class="q-team-spotlight__avatar q-team-spotlight__avatar--placeholder" aria-hidden="true"></div>
                {%- endif -%}
              </div>

              <div class="q-team-spotlight__content">
                <h3 class="q-team-spotlight__name">{{ name | escape }}</h3>

                {%- if role != blank -%}
                  <p class="q-team-spotlight__role">{{ role | escape }}</p>
                {%- endif -%}

                {%- if bio != blank -%}
                  <p class="q-team-spotlight__bio">{{ bio | escape | newline_to_br }}</p>
                {%- endif -%}

                {%- if has_linkedin -%}
                  <div class="q-team-spotlight__actions">
                    <a
                      href="{{ linkedin_url }}"
                      class="q-team-spotlight__linkedin-link"
                      target="_blank"
                      rel="noopener noreferrer"
                      aria-label="View {{ name | escape }} on LinkedIn"
                    >
                      <span class="q-team-spotlight__linkedin-icon" aria-hidden="true">
                        <svg class="q-icon q-icon--linkedin" width="24" height="24" viewBox="0 0 24 24" role="img" focusable="false" aria-hidden="true">
                          <path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5ZM.5 8.5H4.5V23.5H.5V8.5ZM8.5 8.5H12.33V10.55H12.38C12.91 9.55 14.2 8.5 16.09 8.5 20.14 8.5 20.9 11.16 20.9 14.61V23.5H16.9V15.65C16.9 13.78 16.86 11.37 14.33 11.37 11.77 11.37 11.38 13.37 11.38 15.52V23.5H7.38V8.5H8.5Z" fill="currentColor"/>
                        </svg>
                      </span>
                      <span class="q-team-spotlight__linkedin-label">{{ linkedin_label | escape }}</span>
                    </a>
                  </div>
                {%- endif -%}
              </div>
            </article>
          {%- endfor -%}
        </div>
      {%- else -%}
        {%- if request.design_mode -%}
          <div class="q-team-spotlight__empty" role="status" aria-live="polite">
            <p>Add “Member” blocks to populate this section.</p>
          </div>
        {%- endif -%}
      {%- endif -%}
    </div>
  </section>
{%- endif -%}

{% schema %}
{
  "name": "Social Media - LI Team",
  "tag": "section",
  "class": "q-section q-team-spotlight",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_section",
      "label": "Enable section",
      "default": true
    },
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker",
      "default": "Our team"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Meet the people behind the brand"
    },
    {
      "type": "textarea",
      "id": "body",
      "label": "Body text",
      "default": "A small team with a big focus: building beautiful experiences, shipping fast, and supporting customers every step of the way."
    },
    {
      "type": "select",
      "id": "align",
      "label": "Content alignment",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "text",
      "id": "aria_label",
      "label": "ARIA label for section",
      "default": "Team and leadership spotlight section"
    }
  ],
  "blocks": [
    {
      "type": "member",
      "name": "Member",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar / headshot"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Alex Rivera"
        },
        {
          "type": "text",
          "id": "role",
          "label": "Role",
          "default": "Founder & Creative Director"
        },
        {
          "type": "textarea",
          "id": "bio",
          "label": "Bio",
          "default": "Alex leads the brand vision and ensures every experience feels premium, clear, and conversion-focused."
        },
        {
          "type": "url",
          "id": "linkedin_url",
          "label": "LinkedIn URL",
        },
        {
          "type": "text",
          "id": "linkedin_label",
          "label": "LinkedIn button label",
          "default": "View on LinkedIn"
        }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Social Media - LinkedIn Team Spotlight",
      "category": "Social Media",
      "blocks": [
        { "type": "member" },
        { "type": "member" },
        { "type": "member" }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
  .q-team-spotlight__grid{
    display:grid;
    gap: var(--q-gap, 16px);
    grid-template-columns: repeat(1, minmax(0, 1fr));
    align-items: stretch;
  }

  @media (min-width: 640px){
    .q-team-spotlight__grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }

  @media (min-width: 960px){
    .q-team-spotlight__grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  @media (min-width: 1200px){
    .q-team-spotlight__grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
  }

  .q-team-spotlight__card{
    border-radius: var(--q-radius-lg, 16px);
    padding: var(--q-pad, 16px);
    border: 1px solid rgba(0,0,0,0.08);
    background: transparent;
  }

  .q-team-spotlight__avatar-wrap{
    margin-bottom: 12px;
  }

  .q-team-spotlight__avatar{
    width: 72px;
    height: 72px;
    border-radius: 999px;
    object-fit: cover;
    display: block;
  }

  .q-team-spotlight__avatar--placeholder{
    background: rgba(0,0,0,0.06);
  }

  .q-team-spotlight__name{ margin: 0; }
  .q-team-spotlight__role{ margin: 6px 0 0; }
  .q-team-spotlight__bio{ margin: 10px 0 0; }

  .q-team-spotlight__actions{ margin-top: 12px; }

  .q-team-spotlight__linkedin-link{
    display: inline-flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    border-radius: 999px;
    padding: 10px 14px;
    border: 1px solid rgba(0,0,0,0.12);
  }

  .q-team-spotlight__linkedin-icon{ display: inline-flex; }
  .q-team-spotlight__linkedin-label{ line-height: 1; }

  .q-team-spotlight--align-center .q-team-spotlight__card{
    text-align: center;
  }
  .q-team-spotlight--align-center .q-team-spotlight__actions{
    display: flex;
    justify-content: center;
  }
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
