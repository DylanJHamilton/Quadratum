/* Quadratum — Interactive · Gallery
   Asset: assets/intractive-content-gallery.css
*/

.q-gallery {
  padding: var(--q-gallery-pad-y) var(--q-gallery-pad-x);
  color: var(--q-gallery-text, inherit);
  background: var(--q-gallery-bg, transparent);
}

.q-gallery__frame { margin: 0 auto; }
.q-mw--full { max-width: none; }
.q-mw--xl { max-width: 1200px; }
.q-mw--lg { max-width: 1040px; }
.q-mw--md { max-width: 880px; }

.q-gallery__header { margin-bottom: clamp(16px, 2vw, 28px); }
.q-gallery__heading { margin: 0; line-height: 1.1; }
.q-gallery__subheading { margin-top: 8px; color: var(--q-gallery-muted, inherit); }

/* GRID */
.q-gallery__grid {
  display: grid;
  gap: var(--q-gallery-gap);
  grid-template-columns: repeat(var(--q-gallery-cols-d), minmax(var(--q-gallery-min-card), 1fr));
}
@media (max-width: 990px) {
  .q-gallery__grid {
    grid-template-columns: repeat(var(--q-gallery-cols-t), minmax(var(--q-gallery-min-card), 1fr));
  }
}
@media (max-width: 749px) {
  .q-gallery__grid {
    grid-template-columns: repeat(var(--q-gallery-cols-m), minmax(var(--q-gallery-min-card), 1fr));
  }
}

/* MASONRY v1 — CSS columns */
.q-gallery__masonry {
  column-gap: var(--q-gallery-gap);
  columns: var(--q-gallery-cols-d);
}
@media (max-width: 990px) { .q-gallery__masonry { columns: var(--q-gallery-cols-t); } }
@media (max-width: 749px) { .q-gallery__masonry { columns: var(--q-gallery-cols-m); } }
.q-gallery__masonry .q-gallery__item {
  break-inside: avoid;
  margin: 0 0 var(--q-gallery-gap);
}

/* SHARED CARD */
.q-gallery__item {
  position: relative;
  border-radius: var(--q-gallery-radius);
  overflow: clip;
  background: var(--q-gallery-surface, transparent);
  border: 1px solid var(--q-gallery-border, transparent);
  box-shadow: 0 10px 30px rgba(0,0,0, calc(0.06 * var(--q-gallery-shadow)));
}

.q-gallery__media-link {
  display: block;
  text-decoration: none;
  color: inherit;
  outline: none;
}
.q-gallery__media-link[role="button"] { cursor: pointer; }

.q-gallery__media { position: relative; width: 100%; }

/* Ratios */
.q-ratio--natural { aspect-ratio: auto; }
.q-ratio--1x1 { aspect-ratio: 1 / 1; }
.q-ratio--4x3 { aspect-ratio: 4 / 3; }
.q-ratio--3x4 { aspect-ratio: 3 / 4; }

.q-gallery__img,
.q-gallery__img-fallback {
  width: 100%;
  height: 100%;
  display: block;
}

.q-gallery__img { object-fit: cover; }
.q-gallery__media[data-fit="contain"] .q-gallery__img {
  object-fit: contain;
  background: var(--q-gallery-surface, #f6f6f6);
}

.q-gallery__img-fallback {
  min-height: 180px;
  display: grid;
  place-items: center;
  padding: 18px;
  color: var(--q-gallery-muted, #666);
}
.q-gallery__img-fallback-text { font-size: 14px; text-align: center; }

/* Captions */
.q-gallery__caption { pointer-events: none; }

.q-gallery__caption--overlay {
  position: absolute;
  inset: 0;
  display: grid;
  align-content: end;
  gap: 6px;
  padding: 14px;
  background: linear-gradient(
    to top,
    rgba(0,0,0, var(--q-gallery-overlay-o)),
    rgba(0,0,0, 0)
  );
  color: #fff;
  opacity: 1;
  transform: translateY(0);
  transition: opacity .18s ease, transform .18s ease;
}

.q-gallery--caption-hover .q-gallery__caption--overlay {
  opacity: 0;
  transform: translateY(6px);
}

.q-gallery--caption-hover .q-gallery__media-link:hover .q-gallery__caption--overlay,
.q-gallery--caption-hover .q-gallery__media-link:focus-visible .q-gallery__caption--overlay {
  opacity: 1;
  transform: translateY(0);
}

.q-gallery__caption--below {
  padding: 12px 14px 14px;
  display: grid;
  gap: 6px;
  color: var(--q-gallery-text, inherit);
  pointer-events: auto;
}

.q-gallery__tag {
  font-size: 12px;
  letter-spacing: .06em;
  text-transform: uppercase;
  color: var(--q-gallery-muted, #666);
}

.q-gallery__title { font-weight: 600; line-height: 1.2; }
.q-gallery__desc { color: var(--q-gallery-muted, #666); line-height: 1.35; font-size: 14px; }

/* Clamps */
.q-gallery--clamp .q-gallery__title {
  display: -webkit-box;
  -webkit-line-clamp: var(--q-gallery-title-lines);
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.q-gallery--clamp .q-gallery__desc {
  display: -webkit-box;
  -webkit-line-clamp: var(--q-gallery-desc-lines);
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Focus */
.q-gallery__media-link:focus-visible {
  outline: 2px solid var(--q-gallery-accent, #1a73e8);
  outline-offset: 3px;
  border-radius: calc(var(--q-gallery-radius) + 2px);
}

/* CAROUSEL baseline scroll-snap */
.q-gallery__carousel { position: relative; }
.q-gallery__track {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: calc((100% / var(--q-gallery-slides-d)) - (var(--q-gallery-gap) * (1 - (1 / var(--q-gallery-slides-d)))));
  gap: var(--q-gallery-gap);
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  padding-bottom: 6px;
  -webkit-overflow-scrolling: touch;
}
@media (max-width: 990px) {
  .q-gallery__track {
    grid-auto-columns: calc((100% / var(--q-gallery-slides-t)) - (var(--q-gallery-gap) * (1 - (1 / var(--q-gallery-slides-t)))));
  }
}
@media (max-width: 749px) {
  .q-gallery__track {
    grid-auto-columns: calc((100% / var(--q-gallery-slides-m)) - (var(--q-gallery-gap) * (1 - (1 / var(--q-gallery-slides-m)))));
  }
}
.q-gallery__slide { scroll-snap-align: start; }

.q-gallery__nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 42px;
  height: 42px;
  border-radius: 999px;
  border: 1px solid var(--q-gallery-border, #e7e7e7);
  background: var(--q-gallery-bg, #fff);
  box-shadow: 0 10px 30px rgba(0,0,0, .10);
  cursor: pointer;
}
.q-gallery__nav--prev { left: 8px; }
.q-gallery__nav--next { right: 8px; }

.q-gallery__nav::before {
  content: "";
  display: block;
  width: 10px;
  height: 10px;
  margin: 0 auto;
  border-top: 2px solid var(--q-gallery-accent, #1a73e8);
  border-right: 2px solid var(--q-gallery-accent, #1a73e8);
  transform: rotate(45deg);
}
.q-gallery__nav--prev::before { transform: rotate(225deg); }

.q-gallery__dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 12px;
}
.q-gallery__dots button {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  border: 0;
  background: var(--q-gallery-border, #e7e7e7);
  cursor: pointer;
}
.q-gallery__dots button[aria-current="true"] { background: var(--q-gallery-accent, #1a73e8); }

/* ACCORDION */
.q-gallery__accordion {
  display: flex;
  gap: var(--q-gallery-gap);
  min-height: 320px;
}

.q-gallery__panel {
  flex: 1 1 0;
  min-width: var(--q-gallery-acc-minw);
  transition: flex .24s ease, transform .24s ease;
}

.q-gallery__panel.is-active { flex: 4 1 0; }
.q-gallery__panel .q-gallery__media { height: 100%; }
.q-gallery__panel .q-gallery__img { height: 100%; }

@media (max-width: 749px) {
  .q-gallery__accordion { flex-direction: column; min-height: auto; }
  .q-gallery__panel,
  .q-gallery__panel.is-active { flex: unset; }
}

/* Optional: accordion mobile carousel */
@media (max-width: 749px) {
  .q-gallery__accordion.is-mobile-carousel {
    flex-direction: row;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }
  .q-gallery__accordion.is-mobile-carousel .q-gallery__panel {
    scroll-snap-align: start;
    min-width: min(86vw, 520px);
  }
}

/* LIGHTBOX */
html.q-gallery-lock,
html.q-gallery-lock body { overflow: hidden; }

.q-gallery__lightbox[hidden] { display: none; }
.q-gallery__lightbox { position: fixed; inset: 0; z-index: 9999; }

.q-gallery__lightbox-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.72); }

.q-gallery__lightbox-panel {
  position: absolute;
  inset: 24px;
  border-radius: 18px;
  background: #0f0f10;
  border: 1px solid rgba(255,255,255,.12);
  overflow: hidden;
  display: grid;
}

@media (max-width: 749px) { .q-gallery__lightbox-panel { inset: 12px; } }

.q-gallery__lightbox-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.35);
  cursor: pointer;
}

.q-gallery__lightbox-close::before,
.q-gallery__lightbox-close::after {
  content: "";
  position: absolute;
  inset: 50%;
  width: 18px;
  height: 2px;
  background: #fff;
  transform-origin: center;
}
.q-gallery__lightbox-close::before { transform: translate(-50%,-50%) rotate(45deg); }
.q-gallery__lightbox-close::after { transform: translate(-50%,-50%) rotate(-45deg); }

.q-gallery__lightbox-figure {
  margin: 0;
  display: grid;
  grid-template-rows: 1fr auto;
  height: 100%;
}

.q-gallery__lightbox-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #0f0f10;
}

.q-gallery__lightbox-cap {
  padding: 12px 16px;
  color: rgba(255,255,255,.82);
  font-size: 14px;
  border-top: 1px solid rgba(255,255,255,.10);
}

.q-gallery__lightbox-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 46px;
  height: 46px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.35);
  cursor: pointer;
}

.q-gallery__lightbox-nav--prev { left: 12px; }
.q-gallery__lightbox-nav--next { right: 12px; }

.q-gallery__lightbox-nav::before {
  content: "";
  display: block;
  width: 11px;
  height: 11px;
  margin: 0 auto;
  border-top: 2px solid #fff;
  border-right: 2px solid #fff;
  transform: rotate(45deg);
}
.q-gallery__lightbox-nav--prev::before { transform: rotate(225deg); }

/* --- Carousel baseline: always scrolls even without JS --- */
.q-gallery__carousel {
  position: relative;
}

.q-gallery__track {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: calc((100% - (var(--q-gallery-gap) * (var(--q-gallery-slides-m) - 1))) / var(--q-gallery-slides-m));
  gap: var(--q-gallery-gap);

  overflow-x: auto;
  overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory;
  scroll-padding: 1px;
  -webkit-overflow-scrolling: touch;

  padding-bottom: 6px; /* makes scrollbar less ugly */
}

.q-gallery__track > * {
  scroll-snap-align: start;
}

/* Breakpoint columns for "slides per view" */
@media (min-width: 768px) {
  .q-gallery__track {
    grid-auto-columns: calc((100% - (var(--q-gallery-gap) * (var(--q-gallery-slides-t) - 1))) / var(--q-gallery-slides-t));
  }
}
@media (min-width: 1024px) {
  .q-gallery__track {
    grid-auto-columns: calc((100% - (var(--q-gallery-gap) * (var(--q-gallery-slides-d) - 1))) / var(--q-gallery-slides-d));
  }
}

/* Hide scrollbar (optional) */
.q-gallery__track::-webkit-scrollbar { height: 8px; }
.q-gallery__track::-webkit-scrollbar-thumb { border-radius: 999px; background: rgba(0,0,0,0.25); }
